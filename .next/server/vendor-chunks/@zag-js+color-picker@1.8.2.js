"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@zag-js+color-picker@1.8.2";
exports.ids = ["vendor-chunks/@zag-js+color-picker@1.8.2"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@zag-js+color-picker@1.8.2/node_modules/@zag-js/color-picker/dist/index.mjs":
/*!********************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@zag-js+color-picker@1.8.2/node_modules/@zag-js/color-picker/dist/index.mjs ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   anatomy: () => (/* binding */ anatomy),\n/* harmony export */   areaProps: () => (/* binding */ areaProps),\n/* harmony export */   channelProps: () => (/* binding */ channelProps),\n/* harmony export */   connect: () => (/* binding */ connect),\n/* harmony export */   machine: () => (/* binding */ machine),\n/* harmony export */   parse: () => (/* binding */ parse),\n/* harmony export */   props: () => (/* binding */ props),\n/* harmony export */   splitAreaProps: () => (/* binding */ splitAreaProps),\n/* harmony export */   splitChannelProps: () => (/* binding */ splitChannelProps),\n/* harmony export */   splitProps: () => (/* binding */ splitProps),\n/* harmony export */   splitSwatchProps: () => (/* binding */ splitSwatchProps),\n/* harmony export */   splitSwatchTriggerProps: () => (/* binding */ splitSwatchTriggerProps),\n/* harmony export */   splitTransparencyGridProps: () => (/* binding */ splitTransparencyGridProps),\n/* harmony export */   swatchProps: () => (/* binding */ swatchProps),\n/* harmony export */   swatchTriggerProps: () => (/* binding */ swatchTriggerProps),\n/* harmony export */   transparencyGridProps: () => (/* binding */ transparencyGridProps)\n/* harmony export */ });\n/* harmony import */ var _zag_js_anatomy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @zag-js/anatomy */ \"(ssr)/./node_modules/.pnpm/@zag-js+anatomy@1.8.2/node_modules/@zag-js/anatomy/dist/index.mjs\");\n/* harmony import */ var _zag_js_color_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @zag-js/color-utils */ \"(ssr)/./node_modules/.pnpm/@zag-js+color-utils@1.8.2/node_modules/@zag-js/color-utils/dist/index.mjs\");\n/* harmony import */ var _zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @zag-js/dom-query */ \"(ssr)/./node_modules/.pnpm/@zag-js+dom-query@1.8.2/node_modules/@zag-js/dom-query/dist/index.mjs\");\n/* harmony import */ var _zag_js_popper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @zag-js/popper */ \"(ssr)/./node_modules/.pnpm/@zag-js+popper@1.8.2/node_modules/@zag-js/popper/dist/index.mjs\");\n/* harmony import */ var _zag_js_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @zag-js/core */ \"(ssr)/./node_modules/.pnpm/@zag-js+core@1.8.2/node_modules/@zag-js/core/dist/index.mjs\");\n/* harmony import */ var _zag_js_dismissable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @zag-js/dismissable */ \"(ssr)/./node_modules/.pnpm/@zag-js+dismissable@1.8.2/node_modules/@zag-js/dismissable/dist/index.mjs\");\n/* harmony import */ var _zag_js_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @zag-js/utils */ \"(ssr)/./node_modules/.pnpm/@zag-js+utils@1.8.2/node_modules/@zag-js/utils/dist/index.mjs\");\n/* harmony import */ var _zag_js_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @zag-js/types */ \"(ssr)/./node_modules/.pnpm/@zag-js+types@1.8.2/node_modules/@zag-js/types/dist/index.mjs\");\n\n\n\n\n\n\n\n\n\n// src/color-picker.anatomy.ts\nvar anatomy = (0,_zag_js_anatomy__WEBPACK_IMPORTED_MODULE_0__.createAnatomy)(\"color-picker\", [\n  \"root\",\n  \"label\",\n  \"control\",\n  \"trigger\",\n  \"positioner\",\n  \"content\",\n  \"area\",\n  \"areaThumb\",\n  \"valueText\",\n  \"areaBackground\",\n  \"channelSlider\",\n  \"channelSliderLabel\",\n  \"channelSliderTrack\",\n  \"channelSliderThumb\",\n  \"channelSliderValueText\",\n  \"channelInput\",\n  \"transparencyGrid\",\n  \"swatchGroup\",\n  \"swatchTrigger\",\n  \"swatchIndicator\",\n  \"swatch\",\n  \"eyeDropperTrigger\",\n  \"formatTrigger\",\n  \"formatSelect\"\n]);\nvar parts = anatomy.build();\nvar getRootId = (ctx) => ctx.ids?.root ?? `color-picker:${ctx.id}`;\nvar getLabelId = (ctx) => ctx.ids?.label ?? `color-picker:${ctx.id}:label`;\nvar getHiddenInputId = (ctx) => ctx.ids?.hiddenInput ?? `color-picker:${ctx.id}:hidden-input`;\nvar getControlId = (ctx) => ctx.ids?.control ?? `color-picker:${ctx.id}:control`;\nvar getTriggerId = (ctx) => ctx.ids?.trigger ?? `color-picker:${ctx.id}:trigger`;\nvar getContentId = (ctx) => ctx.ids?.content ?? `color-picker:${ctx.id}:content`;\nvar getPositionerId = (ctx) => ctx.ids?.positioner ?? `color-picker:${ctx.id}:positioner`;\nvar getFormatSelectId = (ctx) => ctx.ids?.formatSelect ?? `color-picker:${ctx.id}:format-select`;\nvar getAreaId = (ctx) => ctx.ids?.area ?? `color-picker:${ctx.id}:area`;\nvar getAreaGradientId = (ctx) => ctx.ids?.areaGradient ?? `color-picker:${ctx.id}:area-gradient`;\nvar getAreaThumbId = (ctx) => ctx.ids?.areaThumb ?? `color-picker:${ctx.id}:area-thumb`;\nvar getChannelSliderTrackId = (ctx, channel) => ctx.ids?.channelSliderTrack?.(channel) ?? `color-picker:${ctx.id}:slider-track:${channel}`;\nvar getChannelSliderThumbId = (ctx, channel) => ctx.ids?.channelSliderThumb?.(channel) ?? `color-picker:${ctx.id}:slider-thumb:${channel}`;\nvar getContentEl = (ctx) => ctx.getById(getContentId(ctx));\nvar getAreaThumbEl = (ctx) => ctx.getById(getAreaThumbId(ctx));\nvar getChannelSliderThumbEl = (ctx, channel) => ctx.getById(getChannelSliderThumbId(ctx, channel));\nvar getFormatSelectEl = (ctx) => ctx.getById(getFormatSelectId(ctx));\nvar getHiddenInputEl = (ctx) => ctx.getById(getHiddenInputId(ctx));\nvar getAreaEl = (ctx) => ctx.getById(getAreaId(ctx));\nvar getAreaValueFromPoint = (ctx, point) => {\n  const areaEl = getAreaEl(ctx);\n  if (!areaEl) return;\n  const { percent } = (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.getRelativePoint)(point, areaEl);\n  return percent;\n};\nvar getControlEl = (ctx) => ctx.getById(getControlId(ctx));\nvar getTriggerEl = (ctx) => ctx.getById(getTriggerId(ctx));\nvar getPositionerEl = (ctx) => ctx.getById(getPositionerId(ctx));\nvar getChannelSliderTrackEl = (ctx, channel) => ctx.getById(getChannelSliderTrackId(ctx, channel));\nvar getChannelSliderValueFromPoint = (ctx, point, channel) => {\n  const trackEl = getChannelSliderTrackEl(ctx, channel);\n  if (!trackEl) return;\n  const { percent } = (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.getRelativePoint)(point, trackEl);\n  return percent;\n};\nvar getChannelInputEls = (ctx) => {\n  return [\n    ...(0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.queryAll)(getContentEl(ctx), \"input[data-channel]\"),\n    ...(0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.queryAll)(getControlEl(ctx), \"input[data-channel]\")\n  ];\n};\nfunction getChannelDisplayColor(color, channel) {\n  switch (channel) {\n    case \"hue\":\n      return (0,_zag_js_color_utils__WEBPACK_IMPORTED_MODULE_2__.parseColor)(`hsl(${color.getChannelValue(\"hue\")}, 100%, 50%)`);\n    case \"lightness\":\n    case \"brightness\":\n    case \"saturation\":\n    case \"red\":\n    case \"green\":\n    case \"blue\":\n      return color.withChannelValue(\"alpha\", 1);\n    case \"alpha\": {\n      return color;\n    }\n    default:\n      throw new Error(\"Unknown color channel: \" + channel);\n  }\n}\nfunction getChannelValue(color, channel) {\n  if (channel == null) return \"\";\n  if (channel === \"hex\") {\n    return color.toString(\"hex\");\n  }\n  if (channel === \"css\") {\n    return color.toString(\"css\");\n  }\n  if (channel in color) {\n    return color.getChannelValue(channel).toString();\n  }\n  const isHSL = color.getFormat() === \"hsla\";\n  switch (channel) {\n    case \"hue\":\n      return isHSL ? color.toFormat(\"hsla\").getChannelValue(\"hue\").toString() : color.toFormat(\"hsba\").getChannelValue(\"hue\").toString();\n    case \"saturation\":\n      return isHSL ? color.toFormat(\"hsla\").getChannelValue(\"saturation\").toString() : color.toFormat(\"hsba\").getChannelValue(\"saturation\").toString();\n    case \"lightness\":\n      return color.toFormat(\"hsla\").getChannelValue(\"lightness\").toString();\n    case \"brightness\":\n      return color.toFormat(\"hsba\").getChannelValue(\"brightness\").toString();\n    case \"red\":\n    case \"green\":\n    case \"blue\":\n      return color.toFormat(\"rgba\").getChannelValue(channel).toString();\n    default:\n      return color.getChannelValue(channel).toString();\n  }\n}\nfunction getChannelRange(color, channel) {\n  switch (channel) {\n    case \"hex\":\n      const minColor = (0,_zag_js_color_utils__WEBPACK_IMPORTED_MODULE_2__.parseColor)(\"#000000\");\n      const maxColor = (0,_zag_js_color_utils__WEBPACK_IMPORTED_MODULE_2__.parseColor)(\"#FFFFFF\");\n      return {\n        minValue: minColor.toHexInt(),\n        maxValue: maxColor.toHexInt(),\n        pageSize: 10,\n        step: 1\n      };\n    case \"css\":\n      return void 0;\n    case \"hue\":\n    case \"saturation\":\n    case \"lightness\":\n      return color.toFormat(\"hsla\").getChannelRange(channel);\n    case \"brightness\":\n      return color.toFormat(\"hsba\").getChannelRange(channel);\n    case \"red\":\n    case \"green\":\n    case \"blue\":\n      return color.toFormat(\"rgba\").getChannelRange(channel);\n    default:\n      return color.getChannelRange(channel);\n  }\n}\n\n// src/utils/get-slider-background.ts\nfunction getSliderBackgroundDirection(orientation, dir) {\n  if (orientation === \"vertical\") {\n    return \"top\";\n  } else if (dir === \"ltr\") {\n    return \"right\";\n  } else {\n    return \"left\";\n  }\n}\nvar getSliderBackground = (props2) => {\n  const { channel, value, dir, orientation } = props2;\n  const bgDirection = getSliderBackgroundDirection(orientation, dir);\n  const { minValue, maxValue } = value.getChannelRange(channel);\n  switch (channel) {\n    case \"hue\":\n      return `linear-gradient(to ${bgDirection}, rgb(255, 0, 0) 0%, rgb(255, 255, 0) 17%, rgb(0, 255, 0) 33%, rgb(0, 255, 255) 50%, rgb(0, 0, 255) 67%, rgb(255, 0, 255) 83%, rgb(255, 0, 0) 100%)`;\n    case \"lightness\": {\n      let start = value.withChannelValue(channel, minValue).toString(\"css\");\n      let middle = value.withChannelValue(channel, (maxValue - minValue) / 2).toString(\"css\");\n      let end = value.withChannelValue(channel, maxValue).toString(\"css\");\n      return `linear-gradient(to ${bgDirection}, ${start}, ${middle}, ${end})`;\n    }\n    case \"saturation\":\n    case \"brightness\":\n    case \"red\":\n    case \"green\":\n    case \"blue\":\n    case \"alpha\": {\n      let start = value.withChannelValue(channel, minValue).toString(\"css\");\n      let end = value.withChannelValue(channel, maxValue).toString(\"css\");\n      return `linear-gradient(to ${bgDirection}, ${start}, ${end})`;\n    }\n    default:\n      throw new Error(\"Unknown color channel: \" + channel);\n  }\n};\n\n// src/color-picker.connect.ts\nfunction connect(service, normalize) {\n  const { context, send, prop, computed, state, scope } = service;\n  const value = context.get(\"value\");\n  const format = context.get(\"format\");\n  const areaValue = computed(\"areaValue\");\n  const valueAsString = computed(\"valueAsString\");\n  const disabled = computed(\"disabled\");\n  const interactive = computed(\"interactive\");\n  const dragging = state.hasTag(\"dragging\");\n  const open = state.hasTag(\"open\");\n  const focused = state.hasTag(\"focused\");\n  const getAreaChannels = (props2) => {\n    const channels = areaValue.getChannels();\n    return {\n      xChannel: props2.xChannel ?? channels[1],\n      yChannel: props2.yChannel ?? channels[2]\n    };\n  };\n  const currentPlacement = context.get(\"currentPlacement\");\n  const popperStyles = (0,_zag_js_popper__WEBPACK_IMPORTED_MODULE_3__.getPlacementStyles)({\n    ...prop(\"positioning\"),\n    placement: currentPlacement\n  });\n  function getSwatchTriggerState(props2) {\n    const color = (0,_zag_js_color_utils__WEBPACK_IMPORTED_MODULE_2__.normalizeColor)(props2.value).toFormat(context.get(\"format\"));\n    return {\n      value: color,\n      valueAsString: color.toString(\"hex\"),\n      checked: color.isEqual(value),\n      disabled: props2.disabled || !interactive\n    };\n  }\n  return {\n    dragging,\n    open,\n    valueAsString,\n    value,\n    setOpen(nextOpen) {\n      const open2 = state.hasTag(\"open\");\n      if (open2 === nextOpen) return;\n      send({ type: nextOpen ? \"OPEN\" : \"CLOSE\" });\n    },\n    setValue(value2) {\n      send({ type: \"VALUE.SET\", value: (0,_zag_js_color_utils__WEBPACK_IMPORTED_MODULE_2__.normalizeColor)(value2), src: \"set-color\" });\n    },\n    getChannelValue(channel) {\n      return getChannelValue(value, channel);\n    },\n    getChannelValueText(channel, locale) {\n      return value.formatChannelValue(channel, locale);\n    },\n    setChannelValue(channel, channelValue) {\n      const color = value.withChannelValue(channel, channelValue);\n      send({ type: \"VALUE.SET\", value: color, src: \"set-channel\" });\n    },\n    format: context.get(\"format\"),\n    setFormat(format2) {\n      const formatValue = value.toFormat(format2);\n      send({ type: \"VALUE.SET\", value: formatValue, src: \"set-format\" });\n    },\n    alpha: value.getChannelValue(\"alpha\"),\n    setAlpha(alphaValue) {\n      const color = value.withChannelValue(\"alpha\", alphaValue);\n      send({ type: \"VALUE.SET\", value: color, src: \"set-alpha\" });\n    },\n    getRootProps() {\n      return normalize.element({\n        ...parts.root.attrs,\n        dir: prop(\"dir\"),\n        id: getRootId(scope),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        \"data-readonly\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"readOnly\")),\n        \"data-invalid\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"invalid\")),\n        style: {\n          \"--value\": value.toString(\"css\")\n        }\n      });\n    },\n    getLabelProps() {\n      return normalize.element({\n        ...parts.label.attrs,\n        dir: prop(\"dir\"),\n        id: getLabelId(scope),\n        htmlFor: getHiddenInputId(scope),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        \"data-readonly\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"readOnly\")),\n        \"data-invalid\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"invalid\")),\n        \"data-focus\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(focused),\n        onClick(event) {\n          event.preventDefault();\n          const inputEl = (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.query)(getControlEl(scope), \"[data-channel=hex]\");\n          inputEl?.focus({ preventScroll: true });\n        }\n      });\n    },\n    getControlProps() {\n      return normalize.element({\n        ...parts.control.attrs,\n        id: getControlId(scope),\n        dir: prop(\"dir\"),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        \"data-readonly\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"readOnly\")),\n        \"data-invalid\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"invalid\")),\n        \"data-state\": open ? \"open\" : \"closed\",\n        \"data-focus\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(focused)\n      });\n    },\n    getTriggerProps() {\n      return normalize.button({\n        ...parts.trigger.attrs,\n        id: getTriggerId(scope),\n        dir: prop(\"dir\"),\n        disabled,\n        \"aria-label\": `select color. current color is ${valueAsString}`,\n        \"aria-controls\": getContentId(scope),\n        \"aria-labelledby\": getLabelId(scope),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        \"data-readonly\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"readOnly\")),\n        \"data-invalid\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"invalid\")),\n        \"data-placement\": currentPlacement,\n        \"aria-expanded\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(open),\n        \"data-state\": open ? \"open\" : \"closed\",\n        \"data-focus\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(focused),\n        type: \"button\",\n        onClick() {\n          if (!interactive) return;\n          send({ type: \"TRIGGER.CLICK\" });\n        },\n        onBlur() {\n          if (!interactive) return;\n          send({ type: \"TRIGGER.BLUR\" });\n        },\n        style: {\n          position: \"relative\"\n        }\n      });\n    },\n    getPositionerProps() {\n      return normalize.element({\n        ...parts.positioner.attrs,\n        id: getPositionerId(scope),\n        dir: prop(\"dir\"),\n        style: popperStyles.floating\n      });\n    },\n    getContentProps() {\n      return normalize.element({\n        ...parts.content.attrs,\n        id: getContentId(scope),\n        dir: prop(\"dir\"),\n        tabIndex: -1,\n        \"data-placement\": currentPlacement,\n        \"data-state\": open ? \"open\" : \"closed\",\n        hidden: !open\n      });\n    },\n    getValueTextProps() {\n      return normalize.element({\n        ...parts.valueText.attrs,\n        dir: prop(\"dir\"),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        \"data-focus\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(focused)\n      });\n    },\n    getAreaProps(props2 = {}) {\n      const { xChannel, yChannel } = getAreaChannels(props2);\n      const { areaStyles } = (0,_zag_js_color_utils__WEBPACK_IMPORTED_MODULE_2__.getColorAreaGradient)(areaValue, {\n        xChannel,\n        yChannel,\n        dir: prop(\"dir\")\n      });\n      return normalize.element({\n        ...parts.area.attrs,\n        id: getAreaId(scope),\n        role: \"group\",\n        \"data-invalid\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"invalid\")),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        \"data-readonly\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"readOnly\")),\n        onPointerDown(event) {\n          if (!interactive) return;\n          if (!(0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.isLeftClick)(event)) return;\n          if ((0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.isModifierKey)(event)) return;\n          const point = (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.getEventPoint)(event);\n          const channel = { xChannel, yChannel };\n          send({ type: \"AREA.POINTER_DOWN\", point, channel, id: \"area\" });\n          event.preventDefault();\n        },\n        style: {\n          position: \"relative\",\n          touchAction: \"none\",\n          forcedColorAdjust: \"none\",\n          ...areaStyles\n        }\n      });\n    },\n    getAreaBackgroundProps(props2 = {}) {\n      const { xChannel, yChannel } = getAreaChannels(props2);\n      const { areaGradientStyles } = (0,_zag_js_color_utils__WEBPACK_IMPORTED_MODULE_2__.getColorAreaGradient)(areaValue, {\n        xChannel,\n        yChannel,\n        dir: prop(\"dir\")\n      });\n      return normalize.element({\n        ...parts.areaBackground.attrs,\n        id: getAreaGradientId(scope),\n        \"data-invalid\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"invalid\")),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        \"data-readonly\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"readOnly\")),\n        style: {\n          position: \"relative\",\n          touchAction: \"none\",\n          forcedColorAdjust: \"none\",\n          ...areaGradientStyles\n        }\n      });\n    },\n    getAreaThumbProps(props2 = {}) {\n      const { xChannel, yChannel } = getAreaChannels(props2);\n      const channel = { xChannel, yChannel };\n      const xPercent = areaValue.getChannelValuePercent(xChannel);\n      const yPercent = 1 - areaValue.getChannelValuePercent(yChannel);\n      const xValue = areaValue.getChannelValue(xChannel);\n      const yValue = areaValue.getChannelValue(yChannel);\n      const color = areaValue.withChannelValue(\"alpha\", 1).toString(\"css\");\n      return normalize.element({\n        ...parts.areaThumb.attrs,\n        id: getAreaThumbId(scope),\n        dir: prop(\"dir\"),\n        tabIndex: disabled ? void 0 : 0,\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        \"data-invalid\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"invalid\")),\n        \"data-readonly\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"readOnly\")),\n        role: \"slider\",\n        \"aria-valuemin\": 0,\n        \"aria-valuemax\": 100,\n        \"aria-valuenow\": xValue,\n        \"aria-label\": `${xChannel} and ${yChannel}`,\n        \"aria-roledescription\": \"2d slider\",\n        \"aria-valuetext\": `${xChannel} ${xValue}, ${yChannel} ${yValue}`,\n        style: {\n          position: \"absolute\",\n          left: `${xPercent * 100}%`,\n          top: `${yPercent * 100}%`,\n          transform: \"translate(-50%, -50%)\",\n          touchAction: \"none\",\n          forcedColorAdjust: \"none\",\n          \"--color\": color,\n          background: color\n        },\n        onFocus() {\n          if (!interactive) return;\n          send({ type: \"AREA.FOCUS\", id: \"area\", channel });\n        },\n        onKeyDown(event) {\n          if (event.defaultPrevented) return;\n          if (!interactive) return;\n          const step = (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.getEventStep)(event);\n          const keyMap = {\n            ArrowUp() {\n              send({ type: \"AREA.ARROW_UP\", channel, step });\n            },\n            ArrowDown() {\n              send({ type: \"AREA.ARROW_DOWN\", channel, step });\n            },\n            ArrowLeft() {\n              send({ type: \"AREA.ARROW_LEFT\", channel, step });\n            },\n            ArrowRight() {\n              send({ type: \"AREA.ARROW_RIGHT\", channel, step });\n            },\n            PageUp() {\n              send({ type: \"AREA.PAGE_UP\", channel, step });\n            },\n            PageDown() {\n              send({ type: \"AREA.PAGE_DOWN\", channel, step });\n            },\n            Escape(event2) {\n              event2.stopPropagation();\n            }\n          };\n          const exec = keyMap[(0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.getEventKey)(event, {\n            dir: prop(\"dir\")\n          })];\n          if (exec) {\n            exec(event);\n            event.preventDefault();\n          }\n        }\n      });\n    },\n    getTransparencyGridProps(props2 = {}) {\n      const { size = \"12px\" } = props2;\n      return normalize.element({\n        ...parts.transparencyGrid.attrs,\n        style: {\n          \"--size\": size,\n          width: \"100%\",\n          height: \"100%\",\n          position: \"absolute\",\n          backgroundColor: \"#fff\",\n          backgroundImage: \"conic-gradient(#eeeeee 0 25%, transparent 0 50%, #eeeeee 0 75%, transparent 0)\",\n          backgroundSize: \"var(--size) var(--size)\",\n          inset: \"0px\",\n          zIndex: \"auto\",\n          pointerEvents: \"none\"\n        }\n      });\n    },\n    getChannelSliderProps(props2) {\n      const { orientation = \"horizontal\", channel, format: format2 } = props2;\n      return normalize.element({\n        ...parts.channelSlider.attrs,\n        \"data-channel\": channel,\n        \"data-orientation\": orientation,\n        role: \"presentation\",\n        onPointerDown(event) {\n          if (!interactive) return;\n          if (!(0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.isLeftClick)(event)) return;\n          if ((0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.isModifierKey)(event)) return;\n          const point = (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.getEventPoint)(event);\n          send({ type: \"CHANNEL_SLIDER.POINTER_DOWN\", channel, format: format2, point, id: channel, orientation });\n          event.preventDefault();\n        },\n        style: {\n          position: \"relative\",\n          touchAction: \"none\"\n        }\n      });\n    },\n    getChannelSliderTrackProps(props2) {\n      const { orientation = \"horizontal\", channel, format: format2 } = props2;\n      const normalizedValue = format2 ? value.toFormat(format2) : areaValue;\n      return normalize.element({\n        ...parts.channelSliderTrack.attrs,\n        id: getChannelSliderTrackId(scope, channel),\n        role: \"group\",\n        \"data-channel\": channel,\n        \"data-orientation\": orientation,\n        style: {\n          position: \"relative\",\n          forcedColorAdjust: \"none\",\n          backgroundImage: getSliderBackground({\n            orientation,\n            channel,\n            dir: prop(\"dir\"),\n            value: normalizedValue\n          })\n        }\n      });\n    },\n    getChannelSliderLabelProps(props2) {\n      const { channel } = props2;\n      return normalize.element({\n        ...parts.channelSliderLabel.attrs,\n        \"data-channel\": channel,\n        onClick(event) {\n          if (!interactive) return;\n          event.preventDefault();\n          const thumbId = getChannelSliderThumbId(scope, channel);\n          scope.getById(thumbId)?.focus({ preventScroll: true });\n        },\n        style: {\n          userSelect: \"none\",\n          WebkitUserSelect: \"none\"\n        }\n      });\n    },\n    getChannelSliderValueTextProps(props2) {\n      return normalize.element({\n        ...parts.channelSliderValueText.attrs,\n        \"data-channel\": props2.channel\n      });\n    },\n    getChannelSliderThumbProps(props2) {\n      const { orientation = \"horizontal\", channel, format: format2 } = props2;\n      const normalizedValue = format2 ? value.toFormat(format2) : areaValue;\n      const channelRange = normalizedValue.getChannelRange(channel);\n      const channelValue = normalizedValue.getChannelValue(channel);\n      const offset = (channelValue - channelRange.minValue) / (channelRange.maxValue - channelRange.minValue);\n      const placementStyles = orientation === \"horizontal\" ? { left: `${offset * 100}%`, top: \"50%\" } : { top: `${offset * 100}%`, left: \"50%\" };\n      return normalize.element({\n        ...parts.channelSliderThumb.attrs,\n        id: getChannelSliderThumbId(scope, channel),\n        role: \"slider\",\n        \"aria-label\": channel,\n        tabIndex: disabled ? void 0 : 0,\n        \"data-channel\": channel,\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        \"data-orientation\": orientation,\n        \"aria-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        \"aria-orientation\": orientation,\n        \"aria-valuemax\": channelRange.maxValue,\n        \"aria-valuemin\": channelRange.minValue,\n        \"aria-valuenow\": channelValue,\n        \"aria-valuetext\": `${channel} ${channelValue}`,\n        style: {\n          forcedColorAdjust: \"none\",\n          position: \"absolute\",\n          background: getChannelDisplayColor(areaValue, channel).toString(\"css\"),\n          ...placementStyles\n        },\n        onFocus() {\n          if (!interactive) return;\n          send({ type: \"CHANNEL_SLIDER.FOCUS\", channel });\n        },\n        onKeyDown(event) {\n          if (event.defaultPrevented) return;\n          if (!interactive) return;\n          const step = (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.getEventStep)(event) * channelRange.step;\n          const keyMap = {\n            ArrowUp() {\n              send({ type: \"CHANNEL_SLIDER.ARROW_UP\", channel, step });\n            },\n            ArrowDown() {\n              send({ type: \"CHANNEL_SLIDER.ARROW_DOWN\", channel, step });\n            },\n            ArrowLeft() {\n              send({ type: \"CHANNEL_SLIDER.ARROW_LEFT\", channel, step });\n            },\n            ArrowRight() {\n              send({ type: \"CHANNEL_SLIDER.ARROW_RIGHT\", channel, step });\n            },\n            PageUp() {\n              send({ type: \"CHANNEL_SLIDER.PAGE_UP\", channel });\n            },\n            PageDown() {\n              send({ type: \"CHANNEL_SLIDER.PAGE_DOWN\", channel });\n            },\n            Home() {\n              send({ type: \"CHANNEL_SLIDER.HOME\", channel });\n            },\n            End() {\n              send({ type: \"CHANNEL_SLIDER.END\", channel });\n            },\n            Escape(event2) {\n              event2.stopPropagation();\n            }\n          };\n          const exec = keyMap[(0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.getEventKey)(event, {\n            dir: prop(\"dir\")\n          })];\n          if (exec) {\n            exec(event);\n            event.preventDefault();\n          }\n        }\n      });\n    },\n    getChannelInputProps(props2) {\n      const { channel } = props2;\n      const isTextField = channel === \"hex\" || channel === \"css\";\n      const channelRange = getChannelRange(value, channel);\n      return normalize.input({\n        ...parts.channelInput.attrs,\n        dir: prop(\"dir\"),\n        type: isTextField ? \"text\" : \"number\",\n        \"data-channel\": channel,\n        \"aria-label\": channel,\n        spellCheck: false,\n        autoComplete: \"off\",\n        disabled,\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        \"data-invalid\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"invalid\")),\n        \"data-readonly\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"readOnly\")),\n        readOnly: prop(\"readOnly\"),\n        defaultValue: getChannelValue(value, channel),\n        min: channelRange?.minValue,\n        max: channelRange?.maxValue,\n        step: channelRange?.step,\n        onBeforeInput(event) {\n          if (isTextField || !interactive) return;\n          const value2 = event.currentTarget.value;\n          if (value2.match(/[^0-9.]/g)) {\n            event.preventDefault();\n          }\n        },\n        onFocus(event) {\n          if (!interactive) return;\n          send({ type: \"CHANNEL_INPUT.FOCUS\", channel });\n          event.currentTarget.select();\n        },\n        onBlur(event) {\n          if (!interactive) return;\n          const value2 = isTextField ? event.currentTarget.value : event.currentTarget.valueAsNumber;\n          send({ type: \"CHANNEL_INPUT.BLUR\", channel, value: value2, isTextField });\n        },\n        onKeyDown(event) {\n          if (event.defaultPrevented) return;\n          if (!interactive) return;\n          if (event.key === \"Enter\") {\n            const value2 = isTextField ? event.currentTarget.value : event.currentTarget.valueAsNumber;\n            send({ type: \"CHANNEL_INPUT.CHANGE\", channel, value: value2, isTextField });\n            event.preventDefault();\n          }\n        },\n        style: {\n          appearance: \"none\",\n          WebkitAppearance: \"none\",\n          MozAppearance: \"textfield\"\n        }\n      });\n    },\n    getHiddenInputProps() {\n      return normalize.input({\n        type: \"text\",\n        disabled,\n        name: prop(\"name\"),\n        tabIndex: -1,\n        readOnly: prop(\"readOnly\"),\n        required: prop(\"required\"),\n        id: getHiddenInputId(scope),\n        style: _zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.visuallyHiddenStyle,\n        defaultValue: valueAsString\n      });\n    },\n    getEyeDropperTriggerProps() {\n      return normalize.button({\n        ...parts.eyeDropperTrigger.attrs,\n        type: \"button\",\n        dir: prop(\"dir\"),\n        disabled,\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        \"data-invalid\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"invalid\")),\n        \"data-readonly\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"readOnly\")),\n        \"aria-label\": \"Pick a color from the screen\",\n        onClick() {\n          if (!interactive) return;\n          send({ type: \"EYEDROPPER.CLICK\" });\n        }\n      });\n    },\n    getSwatchGroupProps() {\n      return normalize.element({\n        ...parts.swatchGroup.attrs,\n        role: \"group\"\n      });\n    },\n    getSwatchTriggerState,\n    getSwatchTriggerProps(props2) {\n      const swatchState = getSwatchTriggerState(props2);\n      return normalize.button({\n        ...parts.swatchTrigger.attrs,\n        disabled: swatchState.disabled,\n        dir: prop(\"dir\"),\n        type: \"button\",\n        \"aria-label\": `select ${swatchState.valueAsString} as the color`,\n        \"data-state\": swatchState.checked ? \"checked\" : \"unchecked\",\n        \"data-value\": swatchState.valueAsString,\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(swatchState.disabled),\n        onClick() {\n          if (swatchState.disabled) return;\n          send({ type: \"SWATCH_TRIGGER.CLICK\", value: swatchState.value });\n        },\n        style: {\n          \"--color\": swatchState.valueAsString,\n          position: \"relative\"\n        }\n      });\n    },\n    getSwatchIndicatorProps(props2) {\n      const swatchState = getSwatchTriggerState(props2);\n      return normalize.element({\n        ...parts.swatchIndicator.attrs,\n        dir: prop(\"dir\"),\n        hidden: !swatchState.checked\n      });\n    },\n    getSwatchProps(props2) {\n      const { respectAlpha = true } = props2;\n      const swatchState = getSwatchTriggerState(props2);\n      const color = swatchState.value.toString(respectAlpha ? \"css\" : \"hex\");\n      return normalize.element({\n        ...parts.swatch.attrs,\n        dir: prop(\"dir\"),\n        \"data-state\": swatchState.checked ? \"checked\" : \"unchecked\",\n        \"data-value\": swatchState.valueAsString,\n        style: {\n          \"--color\": color,\n          position: \"relative\",\n          background: color\n        }\n      });\n    },\n    getFormatTriggerProps() {\n      return normalize.button({\n        ...parts.formatTrigger.attrs,\n        dir: prop(\"dir\"),\n        type: \"button\",\n        \"aria-label\": `change color format to ${getNextFormat(format)}`,\n        onClick(event) {\n          if (event.currentTarget.disabled) return;\n          const nextFormat = getNextFormat(format);\n          send({ type: \"FORMAT.SET\", format: nextFormat, src: \"format-trigger\" });\n        }\n      });\n    },\n    getFormatSelectProps() {\n      return normalize.select({\n        ...parts.formatSelect.attrs,\n        \"aria-label\": \"change color format\",\n        dir: prop(\"dir\"),\n        defaultValue: prop(\"format\"),\n        disabled,\n        onChange(event) {\n          const format2 = assertFormat(event.currentTarget.value);\n          send({ type: \"FORMAT.SET\", format: format2, src: \"format-select\" });\n        }\n      });\n    }\n  };\n}\nvar formats = [\"hsba\", \"hsla\", \"rgba\"];\nvar formatRegex = new RegExp(`^(${formats.join(\"|\")})$`);\nfunction getNextFormat(format) {\n  const index = formats.indexOf(format);\n  return formats[index + 1] ?? formats[0];\n}\nfunction assertFormat(format) {\n  if (formatRegex.test(format)) return format;\n  throw new Error(`Unsupported color format: ${format}`);\n}\nvar parse = (colorString) => {\n  return (0,_zag_js_color_utils__WEBPACK_IMPORTED_MODULE_2__.parseColor)(colorString);\n};\n\n// src/color-picker.machine.ts\nvar { and } = (0,_zag_js_core__WEBPACK_IMPORTED_MODULE_4__.createGuards)();\nvar machine = (0,_zag_js_core__WEBPACK_IMPORTED_MODULE_4__.createMachine)({\n  props({ props: props2 }) {\n    return {\n      dir: \"ltr\",\n      defaultValue: parse(\"#000000\"),\n      defaultFormat: \"rgba\",\n      openAutoFocus: true,\n      ...props2,\n      positioning: {\n        placement: \"bottom\",\n        ...props2.positioning\n      }\n    };\n  },\n  initialState({ prop }) {\n    const open = prop(\"open\") || prop(\"defaultOpen\");\n    return open ? \"open\" : \"idle\";\n  },\n  context({ prop, bindable, getContext }) {\n    return {\n      value: bindable(() => ({\n        defaultValue: prop(\"defaultValue\"),\n        value: prop(\"value\"),\n        isEqual(a, b) {\n          return a.toString(\"css\") === b?.toString(\"css\");\n        },\n        hash(a) {\n          return a.toString(\"css\");\n        },\n        onChange(value) {\n          const ctx = getContext();\n          const valueAsString = value.toString(ctx.get(\"format\"));\n          prop(\"onValueChange\")?.({ value, valueAsString });\n        }\n      })),\n      format: bindable(() => ({\n        defaultValue: prop(\"defaultFormat\"),\n        value: prop(\"format\"),\n        onChange(format) {\n          prop(\"onFormatChange\")?.({ format });\n        }\n      })),\n      activeId: bindable(() => ({ defaultValue: null })),\n      activeChannel: bindable(() => ({ defaultValue: null })),\n      activeOrientation: bindable(() => ({ defaultValue: null })),\n      fieldsetDisabled: bindable(() => ({ defaultValue: false })),\n      restoreFocus: bindable(() => ({ defaultValue: true })),\n      currentPlacement: bindable(() => ({\n        defaultValue: void 0\n      }))\n    };\n  },\n  computed: {\n    rtl: ({ prop }) => prop(\"dir\") === \"rtl\",\n    disabled: ({ prop, context }) => !!prop(\"disabled\") || context.get(\"fieldsetDisabled\"),\n    interactive: ({ prop }) => !(prop(\"disabled\") || prop(\"readOnly\")),\n    valueAsString: ({ context }) => context.get(\"value\").toString(context.get(\"format\")),\n    areaValue: ({ context }) => {\n      const format = context.get(\"format\").startsWith(\"hsl\") ? \"hsla\" : \"hsba\";\n      return context.get(\"value\").toFormat(format);\n    }\n  },\n  effects: [\"trackFormControl\"],\n  watch({ prop, context, action, track }) {\n    track([() => context.hash(\"value\")], () => {\n      action([\"syncInputElements\", \"dispatchChangeEvent\"]);\n    });\n    track([() => context.get(\"format\")], () => {\n      action([\"syncFormatSelectElement\"]);\n    });\n    track([() => prop(\"open\")], () => {\n      action([\"toggleVisibility\"]);\n    });\n  },\n  on: {\n    \"VALUE.SET\": {\n      actions: [\"setValue\"]\n    },\n    \"FORMAT.SET\": {\n      actions: [\"setFormat\"]\n    },\n    \"CHANNEL_INPUT.CHANGE\": {\n      actions: [\"setChannelColorFromInput\"]\n    },\n    \"EYEDROPPER.CLICK\": {\n      actions: [\"openEyeDropper\"]\n    },\n    \"SWATCH_TRIGGER.CLICK\": {\n      actions: [\"setValue\"]\n    }\n  },\n  states: {\n    idle: {\n      tags: [\"closed\"],\n      on: {\n        \"CONTROLLED.OPEN\": {\n          target: \"open\",\n          actions: [\"setInitialFocus\"]\n        },\n        OPEN: [\n          {\n            guard: \"isOpenControlled\",\n            actions: [\"invokeOnOpen\"]\n          },\n          {\n            target: \"open\",\n            actions: [\"invokeOnOpen\", \"setInitialFocus\"]\n          }\n        ],\n        \"TRIGGER.CLICK\": [\n          {\n            guard: \"isOpenControlled\",\n            actions: [\"invokeOnOpen\"]\n          },\n          {\n            target: \"open\",\n            actions: [\"invokeOnOpen\", \"setInitialFocus\"]\n          }\n        ],\n        \"CHANNEL_INPUT.FOCUS\": {\n          target: \"focused\",\n          actions: [\"setActiveChannel\"]\n        }\n      }\n    },\n    focused: {\n      tags: [\"closed\", \"focused\"],\n      on: {\n        \"CONTROLLED.OPEN\": {\n          target: \"open\",\n          actions: [\"setInitialFocus\"]\n        },\n        OPEN: [\n          {\n            guard: \"isOpenControlled\",\n            actions: [\"invokeOnOpen\"]\n          },\n          {\n            target: \"open\",\n            actions: [\"invokeOnOpen\", \"setInitialFocus\"]\n          }\n        ],\n        \"TRIGGER.CLICK\": [\n          {\n            guard: \"isOpenControlled\",\n            actions: [\"invokeOnOpen\"]\n          },\n          {\n            target: \"open\",\n            actions: [\"invokeOnOpen\", \"setInitialFocus\"]\n          }\n        ],\n        \"CHANNEL_INPUT.FOCUS\": {\n          actions: [\"setActiveChannel\"]\n        },\n        \"CHANNEL_INPUT.BLUR\": {\n          target: \"idle\",\n          actions: [\"setChannelColorFromInput\"]\n        },\n        \"TRIGGER.BLUR\": {\n          target: \"idle\"\n        }\n      }\n    },\n    open: {\n      tags: [\"open\"],\n      effects: [\"trackPositioning\", \"trackDismissableElement\"],\n      on: {\n        \"CONTROLLED.CLOSE\": [\n          {\n            guard: \"shouldRestoreFocus\",\n            target: \"focused\",\n            actions: [\"setReturnFocus\"]\n          },\n          {\n            target: \"idle\"\n          }\n        ],\n        \"TRIGGER.CLICK\": [\n          {\n            guard: \"isOpenControlled\",\n            actions: [\"invokeOnClose\"]\n          },\n          {\n            target: \"idle\",\n            actions: [\"invokeOnClose\"]\n          }\n        ],\n        \"AREA.POINTER_DOWN\": {\n          target: \"open:dragging\",\n          actions: [\"setActiveChannel\", \"setAreaColorFromPoint\", \"focusAreaThumb\"]\n        },\n        \"AREA.FOCUS\": {\n          actions: [\"setActiveChannel\"]\n        },\n        \"CHANNEL_SLIDER.POINTER_DOWN\": {\n          target: \"open:dragging\",\n          actions: [\"setActiveChannel\", \"setChannelColorFromPoint\", \"focusChannelThumb\"]\n        },\n        \"CHANNEL_SLIDER.FOCUS\": {\n          actions: [\"setActiveChannel\"]\n        },\n        \"AREA.ARROW_LEFT\": {\n          actions: [\"decrementAreaXChannel\"]\n        },\n        \"AREA.ARROW_RIGHT\": {\n          actions: [\"incrementAreaXChannel\"]\n        },\n        \"AREA.ARROW_UP\": {\n          actions: [\"incrementAreaYChannel\"]\n        },\n        \"AREA.ARROW_DOWN\": {\n          actions: [\"decrementAreaYChannel\"]\n        },\n        \"AREA.PAGE_UP\": {\n          actions: [\"incrementAreaXChannel\"]\n        },\n        \"AREA.PAGE_DOWN\": {\n          actions: [\"decrementAreaXChannel\"]\n        },\n        \"CHANNEL_SLIDER.ARROW_LEFT\": {\n          actions: [\"decrementChannel\"]\n        },\n        \"CHANNEL_SLIDER.ARROW_RIGHT\": {\n          actions: [\"incrementChannel\"]\n        },\n        \"CHANNEL_SLIDER.ARROW_UP\": {\n          actions: [\"incrementChannel\"]\n        },\n        \"CHANNEL_SLIDER.ARROW_DOWN\": {\n          actions: [\"decrementChannel\"]\n        },\n        \"CHANNEL_SLIDER.PAGE_UP\": {\n          actions: [\"incrementChannel\"]\n        },\n        \"CHANNEL_SLIDER.PAGE_DOWN\": {\n          actions: [\"decrementChannel\"]\n        },\n        \"CHANNEL_SLIDER.HOME\": {\n          actions: [\"setChannelToMin\"]\n        },\n        \"CHANNEL_SLIDER.END\": {\n          actions: [\"setChannelToMax\"]\n        },\n        \"CHANNEL_INPUT.BLUR\": {\n          actions: [\"setChannelColorFromInput\"]\n        },\n        INTERACT_OUTSIDE: [\n          {\n            guard: \"isOpenControlled\",\n            actions: [\"invokeOnClose\"]\n          },\n          {\n            guard: \"shouldRestoreFocus\",\n            target: \"focused\",\n            actions: [\"invokeOnClose\", \"setReturnFocus\"]\n          },\n          {\n            target: \"idle\",\n            actions: [\"invokeOnClose\"]\n          }\n        ],\n        CLOSE: [\n          {\n            guard: \"isOpenControlled\",\n            actions: [\"invokeOnClose\"]\n          },\n          {\n            target: \"idle\",\n            actions: [\"invokeOnClose\"]\n          }\n        ],\n        \"SWATCH_TRIGGER.CLICK\": [\n          {\n            guard: and(\"isOpenControlled\", \"closeOnSelect\"),\n            actions: [\"setValue\", \"invokeOnClose\"]\n          },\n          {\n            guard: \"closeOnSelect\",\n            target: \"focused\",\n            actions: [\"setValue\", \"invokeOnClose\", \"setReturnFocus\"]\n          },\n          {\n            actions: [\"setValue\"]\n          }\n        ]\n      }\n    },\n    \"open:dragging\": {\n      tags: [\"open\"],\n      exit: [\"clearActiveChannel\"],\n      effects: [\"trackPointerMove\", \"disableTextSelection\", \"trackPositioning\", \"trackDismissableElement\"],\n      on: {\n        \"CONTROLLED.CLOSE\": [\n          {\n            guard: \"shouldRestoreFocus\",\n            target: \"focused\",\n            actions: [\"setReturnFocus\"]\n          },\n          {\n            target: \"idle\"\n          }\n        ],\n        \"AREA.POINTER_MOVE\": {\n          actions: [\"setAreaColorFromPoint\", \"focusAreaThumb\"]\n        },\n        \"AREA.POINTER_UP\": {\n          target: \"open\",\n          actions: [\"invokeOnChangeEnd\"]\n        },\n        \"CHANNEL_SLIDER.POINTER_MOVE\": {\n          actions: [\"setChannelColorFromPoint\", \"focusChannelThumb\"]\n        },\n        \"CHANNEL_SLIDER.POINTER_UP\": {\n          target: \"open\",\n          actions: [\"invokeOnChangeEnd\"]\n        },\n        INTERACT_OUTSIDE: [\n          {\n            guard: \"isOpenControlled\",\n            actions: [\"invokeOnClose\"]\n          },\n          {\n            guard: \"shouldRestoreFocus\",\n            target: \"focused\",\n            actions: [\"invokeOnClose\", \"setReturnFocus\"]\n          },\n          {\n            target: \"idle\",\n            actions: [\"invokeOnClose\"]\n          }\n        ],\n        CLOSE: [\n          {\n            guard: \"isOpenControlled\",\n            actions: [\"invokeOnClose\"]\n          },\n          {\n            target: \"idle\",\n            actions: [\"invokeOnClose\"]\n          }\n        ]\n      }\n    }\n  },\n  implementations: {\n    guards: {\n      closeOnSelect: ({ prop }) => !!prop(\"closeOnSelect\"),\n      isOpenControlled: ({ prop }) => prop(\"open\") != null,\n      shouldRestoreFocus: ({ context }) => !!context.get(\"restoreFocus\")\n    },\n    effects: {\n      trackPositioning({ context, prop, scope }) {\n        if (!context.get(\"currentPlacement\")) {\n          context.set(\"currentPlacement\", prop(\"positioning\")?.placement);\n        }\n        const anchorEl = getTriggerEl(scope);\n        const getPositionerEl2 = () => getPositionerEl(scope);\n        return (0,_zag_js_popper__WEBPACK_IMPORTED_MODULE_3__.getPlacement)(anchorEl, getPositionerEl2, {\n          ...prop(\"positioning\"),\n          defer: true,\n          onComplete(data) {\n            context.set(\"currentPlacement\", data.placement);\n          }\n        });\n      },\n      trackDismissableElement({ context, scope, prop, send }) {\n        const getContentEl2 = () => getContentEl(scope);\n        return (0,_zag_js_dismissable__WEBPACK_IMPORTED_MODULE_5__.trackDismissableElement)(getContentEl2, {\n          exclude: getTriggerEl(scope),\n          defer: true,\n          onInteractOutside(event) {\n            prop(\"onInteractOutside\")?.(event);\n            if (event.defaultPrevented) return;\n            context.set(\"restoreFocus\", !(event.detail.focusable || event.detail.contextmenu));\n          },\n          onPointerDownOutside: prop(\"onPointerDownOutside\"),\n          onFocusOutside: prop(\"onFocusOutside\"),\n          onDismiss() {\n            send({ type: \"INTERACT_OUTSIDE\" });\n          }\n        });\n      },\n      trackFormControl({ context, scope, send }) {\n        const inputEl = getHiddenInputEl(scope);\n        return (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.trackFormControl)(inputEl, {\n          onFieldsetDisabledChange(disabled) {\n            context.set(\"fieldsetDisabled\", disabled);\n          },\n          onFormReset() {\n            send({ type: \"VALUE.SET\", value: context.initial(\"value\"), src: \"form.reset\" });\n          }\n        });\n      },\n      trackPointerMove({ context, scope, event, send }) {\n        return (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.trackPointerMove)(scope.getDoc(), {\n          onPointerMove({ point }) {\n            const type = context.get(\"activeId\") === \"area\" ? \"AREA.POINTER_MOVE\" : \"CHANNEL_SLIDER.POINTER_MOVE\";\n            send({ type, point, format: event.format });\n          },\n          onPointerUp() {\n            const type = context.get(\"activeId\") === \"area\" ? \"AREA.POINTER_UP\" : \"CHANNEL_SLIDER.POINTER_UP\";\n            send({ type });\n          }\n        });\n      },\n      disableTextSelection({ scope }) {\n        return (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.disableTextSelection)({\n          doc: scope.getDoc(),\n          target: getContentEl(scope)\n        });\n      }\n    },\n    actions: {\n      openEyeDropper({ scope, context }) {\n        const win = scope.getWin();\n        const isSupported = \"EyeDropper\" in win;\n        if (!isSupported) return;\n        const picker = new win.EyeDropper();\n        picker.open().then(({ sRGBHex }) => {\n          const format = context.get(\"value\").getFormat();\n          const color = (0,_zag_js_color_utils__WEBPACK_IMPORTED_MODULE_2__.parseColor)(sRGBHex).toFormat(format);\n          context.set(\"value\", color);\n        }).catch(() => void 0);\n      },\n      setActiveChannel({ context, event }) {\n        context.set(\"activeId\", event.id);\n        if (event.channel) context.set(\"activeChannel\", event.channel);\n        if (event.orientation) context.set(\"activeOrientation\", event.orientation);\n      },\n      clearActiveChannel({ context }) {\n        context.set(\"activeChannel\", null);\n        context.set(\"activeId\", null);\n        context.set(\"activeOrientation\", null);\n      },\n      setAreaColorFromPoint({ context, event, computed, scope }) {\n        const v = event.format ? context.get(\"value\").toFormat(event.format) : computed(\"areaValue\");\n        const { xChannel, yChannel } = event.channel || context.get(\"activeChannel\");\n        const percent = getAreaValueFromPoint(scope, event.point);\n        if (!percent) return;\n        const xValue = v.getChannelPercentValue(xChannel, percent.x);\n        const yValue = v.getChannelPercentValue(yChannel, 1 - percent.y);\n        const color = v.withChannelValue(xChannel, xValue).withChannelValue(yChannel, yValue);\n        context.set(\"value\", color);\n      },\n      setChannelColorFromPoint({ context, event, computed, scope }) {\n        const channel = event.channel || context.get(\"activeId\");\n        const normalizedValue = event.format ? context.get(\"value\").toFormat(event.format) : computed(\"areaValue\");\n        const percent = getChannelSliderValueFromPoint(scope, event.point, channel);\n        if (!percent) return;\n        const orientation = context.get(\"activeOrientation\") || \"horizontal\";\n        const channelPercent = orientation === \"horizontal\" ? percent.x : percent.y;\n        const value = normalizedValue.getChannelPercentValue(channel, channelPercent);\n        const color = normalizedValue.withChannelValue(channel, value);\n        context.set(\"value\", color);\n      },\n      setValue({ context, event }) {\n        context.set(\"value\", event.value);\n      },\n      setFormat({ context, event }) {\n        context.set(\"format\", event.format);\n      },\n      dispatchChangeEvent({ scope, computed }) {\n        (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dispatchInputValueEvent)(getHiddenInputEl(scope), { value: computed(\"valueAsString\") });\n      },\n      syncInputElements({ context, scope }) {\n        syncChannelInputs(scope, context.get(\"value\"));\n      },\n      invokeOnChangeEnd({ context, prop, computed }) {\n        prop(\"onValueChangeEnd\")?.({\n          value: context.get(\"value\"),\n          valueAsString: computed(\"valueAsString\")\n        });\n      },\n      setChannelColorFromInput({ context, event, scope }) {\n        const { channel, isTextField, value } = event;\n        const currentAlpha = context.get(\"value\").getChannelValue(\"alpha\");\n        let color;\n        if (channel === \"alpha\") {\n          let valueAsNumber = parseFloat(value);\n          valueAsNumber = Number.isNaN(valueAsNumber) ? currentAlpha : valueAsNumber;\n          color = context.get(\"value\").withChannelValue(\"alpha\", valueAsNumber);\n        } else if (isTextField) {\n          color = (0,_zag_js_utils__WEBPACK_IMPORTED_MODULE_6__.tryCatch)(\n            () => parse(value).withChannelValue(\"alpha\", currentAlpha),\n            () => context.get(\"value\")\n          );\n        } else {\n          const current = context.get(\"value\").toFormat(context.get(\"format\"));\n          const valueAsNumber = Number.isNaN(value) ? current.getChannelValue(channel) : value;\n          color = current.withChannelValue(channel, valueAsNumber);\n        }\n        syncChannelInputs(scope, context.get(\"value\"), color);\n        context.set(\"value\", color);\n      },\n      incrementChannel({ context, event }) {\n        const color = context.get(\"value\").incrementChannel(event.channel, event.step);\n        context.set(\"value\", color);\n      },\n      decrementChannel({ context, event }) {\n        const color = context.get(\"value\").decrementChannel(event.channel, event.step);\n        context.set(\"value\", color);\n      },\n      incrementAreaXChannel({ context, event, computed }) {\n        const { xChannel } = event.channel;\n        const color = computed(\"areaValue\").incrementChannel(xChannel, event.step);\n        context.set(\"value\", color);\n      },\n      decrementAreaXChannel({ context, event, computed }) {\n        const { xChannel } = event.channel;\n        const color = computed(\"areaValue\").decrementChannel(xChannel, event.step);\n        context.set(\"value\", color);\n      },\n      incrementAreaYChannel({ context, event, computed }) {\n        const { yChannel } = event.channel;\n        const color = computed(\"areaValue\").incrementChannel(yChannel, event.step);\n        context.set(\"value\", color);\n      },\n      decrementAreaYChannel({ context, event, computed }) {\n        const { yChannel } = event.channel;\n        const color = computed(\"areaValue\").decrementChannel(yChannel, event.step);\n        context.set(\"value\", color);\n      },\n      setChannelToMax({ context, event }) {\n        const value = context.get(\"value\");\n        const range = value.getChannelRange(event.channel);\n        const color = value.withChannelValue(event.channel, range.maxValue);\n        context.set(\"value\", color);\n      },\n      setChannelToMin({ context, event }) {\n        const value = context.get(\"value\");\n        const range = value.getChannelRange(event.channel);\n        const color = value.withChannelValue(event.channel, range.minValue);\n        context.set(\"value\", color);\n      },\n      focusAreaThumb({ scope }) {\n        (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.raf)(() => {\n          getAreaThumbEl(scope)?.focus({ preventScroll: true });\n        });\n      },\n      focusChannelThumb({ event, scope }) {\n        (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.raf)(() => {\n          getChannelSliderThumbEl(scope, event.channel)?.focus({ preventScroll: true });\n        });\n      },\n      setInitialFocus({ prop, scope }) {\n        if (!prop(\"openAutoFocus\")) return;\n        (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.raf)(() => {\n          const element = (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.getInitialFocus)({\n            root: getContentEl(scope),\n            getInitialEl: prop(\"initialFocusEl\")\n          });\n          element?.focus({ preventScroll: true });\n        });\n      },\n      setReturnFocus({ scope }) {\n        (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.raf)(() => {\n          getTriggerEl(scope)?.focus({ preventScroll: true });\n        });\n      },\n      syncFormatSelectElement({ context, scope }) {\n        syncFormatSelect(scope, context.get(\"format\"));\n      },\n      invokeOnOpen({ prop }) {\n        prop(\"onOpenChange\")?.({ open: true });\n      },\n      invokeOnClose({ prop }) {\n        prop(\"onOpenChange\")?.({ open: false });\n      },\n      toggleVisibility({ prop, event, send }) {\n        send({ type: prop(\"open\") ? \"CONTROLLED.OPEN\" : \"CONTROLLED.CLOSE\", previousEvent: event });\n      }\n    }\n  }\n});\nfunction syncChannelInputs(scope, currentValue, nextValue) {\n  const channelInputEls = getChannelInputEls(scope);\n  (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.raf)(() => {\n    channelInputEls.forEach((inputEl) => {\n      const channel = inputEl.dataset.channel;\n      (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.setElementValue)(inputEl, getChannelValue(nextValue || currentValue, channel));\n    });\n  });\n}\nfunction syncFormatSelect(scope, format) {\n  const selectEl = getFormatSelectEl(scope);\n  if (!selectEl) return;\n  (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.raf)(() => (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.setElementValue)(selectEl, format));\n}\nvar props = (0,_zag_js_types__WEBPACK_IMPORTED_MODULE_7__.createProps)()([\n  \"closeOnSelect\",\n  \"dir\",\n  \"disabled\",\n  \"format\",\n  \"defaultFormat\",\n  \"getRootNode\",\n  \"id\",\n  \"ids\",\n  \"initialFocusEl\",\n  \"name\",\n  \"positioning\",\n  \"onFocusOutside\",\n  \"onFormatChange\",\n  \"onInteractOutside\",\n  \"onOpenChange\",\n  \"onPointerDownOutside\",\n  \"onValueChange\",\n  \"onValueChangeEnd\",\n  \"defaultOpen\",\n  \"open\",\n  \"positioning\",\n  \"required\",\n  \"readOnly\",\n  \"value\",\n  \"defaultValue\",\n  \"invalid\",\n  \"openAutoFocus\"\n]);\nvar splitProps = (0,_zag_js_utils__WEBPACK_IMPORTED_MODULE_6__.createSplitProps)(props);\nvar areaProps = (0,_zag_js_types__WEBPACK_IMPORTED_MODULE_7__.createProps)()([\"xChannel\", \"yChannel\"]);\nvar splitAreaProps = (0,_zag_js_utils__WEBPACK_IMPORTED_MODULE_6__.createSplitProps)(areaProps);\nvar channelProps = (0,_zag_js_types__WEBPACK_IMPORTED_MODULE_7__.createProps)()([\"channel\", \"orientation\"]);\nvar splitChannelProps = (0,_zag_js_utils__WEBPACK_IMPORTED_MODULE_6__.createSplitProps)(channelProps);\nvar swatchTriggerProps = (0,_zag_js_types__WEBPACK_IMPORTED_MODULE_7__.createProps)()([\"value\", \"disabled\"]);\nvar splitSwatchTriggerProps = (0,_zag_js_utils__WEBPACK_IMPORTED_MODULE_6__.createSplitProps)(swatchTriggerProps);\nvar swatchProps = (0,_zag_js_types__WEBPACK_IMPORTED_MODULE_7__.createProps)()([\"value\", \"respectAlpha\"]);\nvar splitSwatchProps = (0,_zag_js_utils__WEBPACK_IMPORTED_MODULE_6__.createSplitProps)(swatchProps);\nvar transparencyGridProps = (0,_zag_js_types__WEBPACK_IMPORTED_MODULE_7__.createProps)()([\"size\"]);\nvar splitTransparencyGridProps = (0,_zag_js_utils__WEBPACK_IMPORTED_MODULE_6__.createSplitProps)(transparencyGridProps);\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHphZy1qcytjb2xvci1waWNrZXJAMS44LjIvbm9kZV9tb2R1bGVzL0B6YWctanMvY29sb3ItcGlja2VyL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFnRDtBQUN1QztBQUM4TTtBQUNuTztBQUNQO0FBQ0c7QUFDSDtBQUNmOztBQUU1QztBQUNBLGNBQWMsOERBQWE7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxPQUFPO0FBQ2pFLDREQUE0RCxPQUFPO0FBQ25FLHdFQUF3RSxPQUFPO0FBQy9FLGdFQUFnRSxPQUFPO0FBQ3ZFLGdFQUFnRSxPQUFPO0FBQ3ZFLGdFQUFnRSxPQUFPO0FBQ3ZFLHNFQUFzRSxPQUFPO0FBQzdFLDBFQUEwRSxPQUFPO0FBQ2pGLDBEQUEwRCxPQUFPO0FBQ2pFLDBFQUEwRSxPQUFPO0FBQ2pGLG9FQUFvRSxPQUFPO0FBQzNFLDBHQUEwRyxPQUFPLGdCQUFnQixRQUFRO0FBQ3pJLDBHQUEwRyxPQUFPLGdCQUFnQixRQUFRO0FBQ3pJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsVUFBVSxFQUFFLG1FQUFnQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLFVBQVUsRUFBRSxtRUFBZ0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLDJEQUFRO0FBQ2YsT0FBTywyREFBUTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLCtEQUFVLFFBQVEsNkJBQTZCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtEQUFVO0FBQ2pDLHVCQUF1QiwrREFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsbUNBQW1DO0FBQzdDO0FBQ0EsVUFBVSxxQkFBcUI7QUFDL0I7QUFDQTtBQUNBLG1DQUFtQyxZQUFZO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFlBQVksSUFBSSxNQUFNLElBQUksT0FBTyxJQUFJLElBQUk7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFlBQVksSUFBSSxNQUFNLElBQUksSUFBSTtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVLDhDQUE4QztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGtFQUFrQjtBQUN6QztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esa0JBQWtCLG1FQUFjO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsbUNBQW1DO0FBQ2hELEtBQUs7QUFDTDtBQUNBLGFBQWEsMEJBQTBCLG1FQUFjLDRCQUE0QjtBQUNqRixLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhLHFEQUFxRDtBQUNsRSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsYUFBYSwwREFBMEQ7QUFDdkUsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGFBQWEsbURBQW1EO0FBQ2hFLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDJEQUFRO0FBQ2pDLHlCQUF5QiwyREFBUTtBQUNqQyx3QkFBd0IsMkRBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMkRBQVE7QUFDakMseUJBQXlCLDJEQUFRO0FBQ2pDLHdCQUF3QiwyREFBUTtBQUNoQyxzQkFBc0IsMkRBQVE7QUFDOUI7QUFDQTtBQUNBLDBCQUEwQix3REFBSztBQUMvQiwyQkFBMkIscUJBQXFCO0FBQ2hEO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDJEQUFRO0FBQ2pDLHlCQUF5QiwyREFBUTtBQUNqQyx3QkFBd0IsMkRBQVE7QUFDaEM7QUFDQSxzQkFBc0IsMkRBQVE7QUFDOUIsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsY0FBYztBQUN0RTtBQUNBO0FBQ0EseUJBQXlCLDJEQUFRO0FBQ2pDLHlCQUF5QiwyREFBUTtBQUNqQyx3QkFBd0IsMkRBQVE7QUFDaEM7QUFDQSx5QkFBeUIsMkRBQVE7QUFDakM7QUFDQSxzQkFBc0IsMkRBQVE7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHVCQUF1QjtBQUN4QyxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGlCQUFpQixzQkFBc0I7QUFDdkMsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDJEQUFRO0FBQ2pDLHNCQUFzQiwyREFBUTtBQUM5QixPQUFPO0FBQ1AsS0FBSztBQUNMLDRCQUE0QjtBQUM1QixjQUFjLHFCQUFxQjtBQUNuQyxjQUFjLGFBQWEsRUFBRSx5RUFBb0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDJEQUFRO0FBQ2hDLHlCQUF5QiwyREFBUTtBQUNqQyx5QkFBeUIsMkRBQVE7QUFDakM7QUFDQTtBQUNBLGVBQWUsOERBQVc7QUFDMUIsY0FBYyxnRUFBYTtBQUMzQix3QkFBd0IsZ0VBQWE7QUFDckMsNEJBQTRCO0FBQzVCLGlCQUFpQix1REFBdUQ7QUFDeEU7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxzQ0FBc0M7QUFDdEMsY0FBYyxxQkFBcUI7QUFDbkMsY0FBYyxxQkFBcUIsRUFBRSx5RUFBb0I7QUFDekQ7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwyREFBUTtBQUNoQyx5QkFBeUIsMkRBQVE7QUFDakMseUJBQXlCLDJEQUFRO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsaUNBQWlDO0FBQ2pDLGNBQWMscUJBQXFCO0FBQ25DLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwyREFBUTtBQUNqQyx3QkFBd0IsMkRBQVE7QUFDaEMseUJBQXlCLDJEQUFRO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLFVBQVUsTUFBTSxTQUFTO0FBQ2xEO0FBQ0EsNkJBQTZCLFVBQVUsRUFBRSxPQUFPLElBQUksVUFBVSxFQUFFLE9BQU87QUFDdkU7QUFDQTtBQUNBLG1CQUFtQixlQUFlO0FBQ2xDLGtCQUFrQixlQUFlO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGlCQUFpQix5Q0FBeUM7QUFDMUQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrREFBWTtBQUNuQztBQUNBO0FBQ0EscUJBQXFCLHNDQUFzQztBQUMzRCxhQUFhO0FBQ2I7QUFDQSxxQkFBcUIsd0NBQXdDO0FBQzdELGFBQWE7QUFDYjtBQUNBLHFCQUFxQix3Q0FBd0M7QUFDN0QsYUFBYTtBQUNiO0FBQ0EscUJBQXFCLHlDQUF5QztBQUM5RCxhQUFhO0FBQ2I7QUFDQSxxQkFBcUIscUNBQXFDO0FBQzFELGFBQWE7QUFDYjtBQUNBLHFCQUFxQix1Q0FBdUM7QUFDNUQsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDhEQUFXO0FBQ3pDO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLHdDQUF3QztBQUN4QyxjQUFjLGdCQUFnQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBLGNBQWMsdURBQXVEO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw4REFBVztBQUMxQixjQUFjLGdFQUFhO0FBQzNCLHdCQUF3QixnRUFBYTtBQUNyQyxpQkFBaUIsZ0dBQWdHO0FBQ2pIO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBLGNBQWMsdURBQXVEO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQSxjQUFjLFVBQVU7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMscUJBQXFCO0FBQy9ELFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EsY0FBYyx1REFBdUQ7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsU0FBUyxhQUFhLGlCQUFpQixJQUFJLFFBQVEsYUFBYTtBQUMvSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwyREFBUTtBQUNqQztBQUNBLHlCQUF5QiwyREFBUTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixTQUFTLEVBQUUsYUFBYTtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxpQkFBaUIsdUNBQXVDO0FBQ3hELFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsK0RBQVk7QUFDbkM7QUFDQTtBQUNBLHFCQUFxQixnREFBZ0Q7QUFDckUsYUFBYTtBQUNiO0FBQ0EscUJBQXFCLGtEQUFrRDtBQUN2RSxhQUFhO0FBQ2I7QUFDQSxxQkFBcUIsa0RBQWtEO0FBQ3ZFLGFBQWE7QUFDYjtBQUNBLHFCQUFxQixtREFBbUQ7QUFDeEUsYUFBYTtBQUNiO0FBQ0EscUJBQXFCLHlDQUF5QztBQUM5RCxhQUFhO0FBQ2I7QUFDQSxxQkFBcUIsMkNBQTJDO0FBQ2hFLGFBQWE7QUFDYjtBQUNBLHFCQUFxQixzQ0FBc0M7QUFDM0QsYUFBYTtBQUNiO0FBQ0EscUJBQXFCLHFDQUFxQztBQUMxRCxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsOERBQVc7QUFDekM7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQSxjQUFjLFVBQVU7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwyREFBUTtBQUNqQyx3QkFBd0IsMkRBQVE7QUFDaEMseUJBQXlCLDJEQUFRO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGlCQUFpQixzQ0FBc0M7QUFDdkQ7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGlFQUFpRTtBQUNsRixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixtRUFBbUU7QUFDdEY7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGtFQUFtQjtBQUNsQztBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDJEQUFRO0FBQ2pDLHdCQUF3QiwyREFBUTtBQUNoQyx5QkFBeUIsMkRBQVE7QUFDakM7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDBCQUEwQjtBQUMzQztBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsMkJBQTJCO0FBQzNEO0FBQ0E7QUFDQSx5QkFBeUIsMkRBQVE7QUFDakM7QUFDQTtBQUNBLGlCQUFpQix3REFBd0Q7QUFDekUsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELHNCQUFzQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsK0RBQStEO0FBQ2hGO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsMkRBQTJEO0FBQzVFO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGtCQUFrQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsT0FBTztBQUN0RDtBQUNBO0FBQ0EsU0FBUywrREFBVTtBQUNuQjs7QUFFQTtBQUNBLE1BQU0sTUFBTSxFQUFFLDBEQUFZO0FBQzFCLGNBQWMsMkRBQWE7QUFDM0IsVUFBVSxlQUFlO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsaUJBQWlCLE1BQU07QUFDdkI7QUFDQTtBQUNBLEdBQUc7QUFDSCxZQUFZLDRCQUE0QjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0Msc0JBQXNCO0FBQzFEO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLFFBQVE7QUFDN0M7QUFDQSxPQUFPO0FBQ1Asa0NBQWtDLG9CQUFvQjtBQUN0RCx1Q0FBdUMsb0JBQW9CO0FBQzNELDJDQUEyQyxvQkFBb0I7QUFDL0QsMENBQTBDLHFCQUFxQjtBQUMvRCxzQ0FBc0Msb0JBQW9CO0FBQzFEO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQSxZQUFZLE1BQU07QUFDbEIsaUJBQWlCLGVBQWU7QUFDaEMsb0JBQW9CLE1BQU07QUFDMUIsc0JBQXNCLFNBQVM7QUFDL0Isa0JBQWtCLFNBQVM7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsVUFBVSw4QkFBOEI7QUFDeEM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLCtEQUFnQjtBQUNqQyxnQkFBZ0IsMERBQVc7QUFDM0IscUJBQXFCLCtEQUFnQjtBQUNyQyxtQkFBbUIsMERBQVc7QUFDOUIsd0JBQXdCLCtEQUFnQjtBQUN4Qyx5QkFBeUIsMERBQVc7QUFDcEMsOEJBQThCLCtEQUFnQjtBQUM5QyxrQkFBa0IsMERBQVc7QUFDN0IsdUJBQXVCLCtEQUFnQjtBQUN2Qyw0QkFBNEIsMERBQVc7QUFDdkMsaUNBQWlDLCtEQUFnQjs7QUFFeU0iLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcd2VzanJcXERvY3VtZW50c1xcUHJvamV0b3NcXGRhc2gtY3J5cHRvY29pblxcbm9kZV9tb2R1bGVzXFwucG5wbVxcQHphZy1qcytjb2xvci1waWNrZXJAMS44LjJcXG5vZGVfbW9kdWxlc1xcQHphZy1qc1xcY29sb3ItcGlja2VyXFxkaXN0XFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQW5hdG9teSB9IGZyb20gJ0B6YWctanMvYW5hdG9teSc7XG5pbXBvcnQgeyBwYXJzZUNvbG9yLCBnZXRDb2xvckFyZWFHcmFkaWVudCwgbm9ybWFsaXplQ29sb3IgfSBmcm9tICdAemFnLWpzL2NvbG9yLXV0aWxzJztcbmltcG9ydCB7IHJhZiwgZ2V0SW5pdGlhbEZvY3VzLCBkaXNwYXRjaElucHV0VmFsdWVFdmVudCwgZGlzYWJsZVRleHRTZWxlY3Rpb24sIHRyYWNrUG9pbnRlck1vdmUsIHRyYWNrRm9ybUNvbnRyb2wsIHNldEVsZW1lbnRWYWx1ZSwgZ2V0UmVsYXRpdmVQb2ludCwgcXVlcnlBbGwsIGRhdGFBdHRyLCB2aXN1YWxseUhpZGRlblN0eWxlLCBnZXRFdmVudFN0ZXAsIGdldEV2ZW50S2V5LCBpc0xlZnRDbGljaywgaXNNb2RpZmllcktleSwgZ2V0RXZlbnRQb2ludCwgcXVlcnkgfSBmcm9tICdAemFnLWpzL2RvbS1xdWVyeSc7XG5pbXBvcnQgeyBnZXRQbGFjZW1lbnQsIGdldFBsYWNlbWVudFN0eWxlcyB9IGZyb20gJ0B6YWctanMvcG9wcGVyJztcbmltcG9ydCB7IGNyZWF0ZUd1YXJkcywgY3JlYXRlTWFjaGluZSB9IGZyb20gJ0B6YWctanMvY29yZSc7XG5pbXBvcnQgeyB0cmFja0Rpc21pc3NhYmxlRWxlbWVudCB9IGZyb20gJ0B6YWctanMvZGlzbWlzc2FibGUnO1xuaW1wb3J0IHsgdHJ5Q2F0Y2gsIGNyZWF0ZVNwbGl0UHJvcHMgfSBmcm9tICdAemFnLWpzL3V0aWxzJztcbmltcG9ydCB7IGNyZWF0ZVByb3BzIH0gZnJvbSAnQHphZy1qcy90eXBlcyc7XG5cbi8vIHNyYy9jb2xvci1waWNrZXIuYW5hdG9teS50c1xudmFyIGFuYXRvbXkgPSBjcmVhdGVBbmF0b215KFwiY29sb3ItcGlja2VyXCIsIFtcbiAgXCJyb290XCIsXG4gIFwibGFiZWxcIixcbiAgXCJjb250cm9sXCIsXG4gIFwidHJpZ2dlclwiLFxuICBcInBvc2l0aW9uZXJcIixcbiAgXCJjb250ZW50XCIsXG4gIFwiYXJlYVwiLFxuICBcImFyZWFUaHVtYlwiLFxuICBcInZhbHVlVGV4dFwiLFxuICBcImFyZWFCYWNrZ3JvdW5kXCIsXG4gIFwiY2hhbm5lbFNsaWRlclwiLFxuICBcImNoYW5uZWxTbGlkZXJMYWJlbFwiLFxuICBcImNoYW5uZWxTbGlkZXJUcmFja1wiLFxuICBcImNoYW5uZWxTbGlkZXJUaHVtYlwiLFxuICBcImNoYW5uZWxTbGlkZXJWYWx1ZVRleHRcIixcbiAgXCJjaGFubmVsSW5wdXRcIixcbiAgXCJ0cmFuc3BhcmVuY3lHcmlkXCIsXG4gIFwic3dhdGNoR3JvdXBcIixcbiAgXCJzd2F0Y2hUcmlnZ2VyXCIsXG4gIFwic3dhdGNoSW5kaWNhdG9yXCIsXG4gIFwic3dhdGNoXCIsXG4gIFwiZXllRHJvcHBlclRyaWdnZXJcIixcbiAgXCJmb3JtYXRUcmlnZ2VyXCIsXG4gIFwiZm9ybWF0U2VsZWN0XCJcbl0pO1xudmFyIHBhcnRzID0gYW5hdG9teS5idWlsZCgpO1xudmFyIGdldFJvb3RJZCA9IChjdHgpID0+IGN0eC5pZHM/LnJvb3QgPz8gYGNvbG9yLXBpY2tlcjoke2N0eC5pZH1gO1xudmFyIGdldExhYmVsSWQgPSAoY3R4KSA9PiBjdHguaWRzPy5sYWJlbCA/PyBgY29sb3ItcGlja2VyOiR7Y3R4LmlkfTpsYWJlbGA7XG52YXIgZ2V0SGlkZGVuSW5wdXRJZCA9IChjdHgpID0+IGN0eC5pZHM/LmhpZGRlbklucHV0ID8/IGBjb2xvci1waWNrZXI6JHtjdHguaWR9OmhpZGRlbi1pbnB1dGA7XG52YXIgZ2V0Q29udHJvbElkID0gKGN0eCkgPT4gY3R4Lmlkcz8uY29udHJvbCA/PyBgY29sb3ItcGlja2VyOiR7Y3R4LmlkfTpjb250cm9sYDtcbnZhciBnZXRUcmlnZ2VySWQgPSAoY3R4KSA9PiBjdHguaWRzPy50cmlnZ2VyID8/IGBjb2xvci1waWNrZXI6JHtjdHguaWR9OnRyaWdnZXJgO1xudmFyIGdldENvbnRlbnRJZCA9IChjdHgpID0+IGN0eC5pZHM/LmNvbnRlbnQgPz8gYGNvbG9yLXBpY2tlcjoke2N0eC5pZH06Y29udGVudGA7XG52YXIgZ2V0UG9zaXRpb25lcklkID0gKGN0eCkgPT4gY3R4Lmlkcz8ucG9zaXRpb25lciA/PyBgY29sb3ItcGlja2VyOiR7Y3R4LmlkfTpwb3NpdGlvbmVyYDtcbnZhciBnZXRGb3JtYXRTZWxlY3RJZCA9IChjdHgpID0+IGN0eC5pZHM/LmZvcm1hdFNlbGVjdCA/PyBgY29sb3ItcGlja2VyOiR7Y3R4LmlkfTpmb3JtYXQtc2VsZWN0YDtcbnZhciBnZXRBcmVhSWQgPSAoY3R4KSA9PiBjdHguaWRzPy5hcmVhID8/IGBjb2xvci1waWNrZXI6JHtjdHguaWR9OmFyZWFgO1xudmFyIGdldEFyZWFHcmFkaWVudElkID0gKGN0eCkgPT4gY3R4Lmlkcz8uYXJlYUdyYWRpZW50ID8/IGBjb2xvci1waWNrZXI6JHtjdHguaWR9OmFyZWEtZ3JhZGllbnRgO1xudmFyIGdldEFyZWFUaHVtYklkID0gKGN0eCkgPT4gY3R4Lmlkcz8uYXJlYVRodW1iID8/IGBjb2xvci1waWNrZXI6JHtjdHguaWR9OmFyZWEtdGh1bWJgO1xudmFyIGdldENoYW5uZWxTbGlkZXJUcmFja0lkID0gKGN0eCwgY2hhbm5lbCkgPT4gY3R4Lmlkcz8uY2hhbm5lbFNsaWRlclRyYWNrPy4oY2hhbm5lbCkgPz8gYGNvbG9yLXBpY2tlcjoke2N0eC5pZH06c2xpZGVyLXRyYWNrOiR7Y2hhbm5lbH1gO1xudmFyIGdldENoYW5uZWxTbGlkZXJUaHVtYklkID0gKGN0eCwgY2hhbm5lbCkgPT4gY3R4Lmlkcz8uY2hhbm5lbFNsaWRlclRodW1iPy4oY2hhbm5lbCkgPz8gYGNvbG9yLXBpY2tlcjoke2N0eC5pZH06c2xpZGVyLXRodW1iOiR7Y2hhbm5lbH1gO1xudmFyIGdldENvbnRlbnRFbCA9IChjdHgpID0+IGN0eC5nZXRCeUlkKGdldENvbnRlbnRJZChjdHgpKTtcbnZhciBnZXRBcmVhVGh1bWJFbCA9IChjdHgpID0+IGN0eC5nZXRCeUlkKGdldEFyZWFUaHVtYklkKGN0eCkpO1xudmFyIGdldENoYW5uZWxTbGlkZXJUaHVtYkVsID0gKGN0eCwgY2hhbm5lbCkgPT4gY3R4LmdldEJ5SWQoZ2V0Q2hhbm5lbFNsaWRlclRodW1iSWQoY3R4LCBjaGFubmVsKSk7XG52YXIgZ2V0Rm9ybWF0U2VsZWN0RWwgPSAoY3R4KSA9PiBjdHguZ2V0QnlJZChnZXRGb3JtYXRTZWxlY3RJZChjdHgpKTtcbnZhciBnZXRIaWRkZW5JbnB1dEVsID0gKGN0eCkgPT4gY3R4LmdldEJ5SWQoZ2V0SGlkZGVuSW5wdXRJZChjdHgpKTtcbnZhciBnZXRBcmVhRWwgPSAoY3R4KSA9PiBjdHguZ2V0QnlJZChnZXRBcmVhSWQoY3R4KSk7XG52YXIgZ2V0QXJlYVZhbHVlRnJvbVBvaW50ID0gKGN0eCwgcG9pbnQpID0+IHtcbiAgY29uc3QgYXJlYUVsID0gZ2V0QXJlYUVsKGN0eCk7XG4gIGlmICghYXJlYUVsKSByZXR1cm47XG4gIGNvbnN0IHsgcGVyY2VudCB9ID0gZ2V0UmVsYXRpdmVQb2ludChwb2ludCwgYXJlYUVsKTtcbiAgcmV0dXJuIHBlcmNlbnQ7XG59O1xudmFyIGdldENvbnRyb2xFbCA9IChjdHgpID0+IGN0eC5nZXRCeUlkKGdldENvbnRyb2xJZChjdHgpKTtcbnZhciBnZXRUcmlnZ2VyRWwgPSAoY3R4KSA9PiBjdHguZ2V0QnlJZChnZXRUcmlnZ2VySWQoY3R4KSk7XG52YXIgZ2V0UG9zaXRpb25lckVsID0gKGN0eCkgPT4gY3R4LmdldEJ5SWQoZ2V0UG9zaXRpb25lcklkKGN0eCkpO1xudmFyIGdldENoYW5uZWxTbGlkZXJUcmFja0VsID0gKGN0eCwgY2hhbm5lbCkgPT4gY3R4LmdldEJ5SWQoZ2V0Q2hhbm5lbFNsaWRlclRyYWNrSWQoY3R4LCBjaGFubmVsKSk7XG52YXIgZ2V0Q2hhbm5lbFNsaWRlclZhbHVlRnJvbVBvaW50ID0gKGN0eCwgcG9pbnQsIGNoYW5uZWwpID0+IHtcbiAgY29uc3QgdHJhY2tFbCA9IGdldENoYW5uZWxTbGlkZXJUcmFja0VsKGN0eCwgY2hhbm5lbCk7XG4gIGlmICghdHJhY2tFbCkgcmV0dXJuO1xuICBjb25zdCB7IHBlcmNlbnQgfSA9IGdldFJlbGF0aXZlUG9pbnQocG9pbnQsIHRyYWNrRWwpO1xuICByZXR1cm4gcGVyY2VudDtcbn07XG52YXIgZ2V0Q2hhbm5lbElucHV0RWxzID0gKGN0eCkgPT4ge1xuICByZXR1cm4gW1xuICAgIC4uLnF1ZXJ5QWxsKGdldENvbnRlbnRFbChjdHgpLCBcImlucHV0W2RhdGEtY2hhbm5lbF1cIiksXG4gICAgLi4ucXVlcnlBbGwoZ2V0Q29udHJvbEVsKGN0eCksIFwiaW5wdXRbZGF0YS1jaGFubmVsXVwiKVxuICBdO1xufTtcbmZ1bmN0aW9uIGdldENoYW5uZWxEaXNwbGF5Q29sb3IoY29sb3IsIGNoYW5uZWwpIHtcbiAgc3dpdGNoIChjaGFubmVsKSB7XG4gICAgY2FzZSBcImh1ZVwiOlxuICAgICAgcmV0dXJuIHBhcnNlQ29sb3IoYGhzbCgke2NvbG9yLmdldENoYW5uZWxWYWx1ZShcImh1ZVwiKX0sIDEwMCUsIDUwJSlgKTtcbiAgICBjYXNlIFwibGlnaHRuZXNzXCI6XG4gICAgY2FzZSBcImJyaWdodG5lc3NcIjpcbiAgICBjYXNlIFwic2F0dXJhdGlvblwiOlxuICAgIGNhc2UgXCJyZWRcIjpcbiAgICBjYXNlIFwiZ3JlZW5cIjpcbiAgICBjYXNlIFwiYmx1ZVwiOlxuICAgICAgcmV0dXJuIGNvbG9yLndpdGhDaGFubmVsVmFsdWUoXCJhbHBoYVwiLCAxKTtcbiAgICBjYXNlIFwiYWxwaGFcIjoge1xuICAgICAgcmV0dXJuIGNvbG9yO1xuICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBjb2xvciBjaGFubmVsOiBcIiArIGNoYW5uZWwpO1xuICB9XG59XG5mdW5jdGlvbiBnZXRDaGFubmVsVmFsdWUoY29sb3IsIGNoYW5uZWwpIHtcbiAgaWYgKGNoYW5uZWwgPT0gbnVsbCkgcmV0dXJuIFwiXCI7XG4gIGlmIChjaGFubmVsID09PSBcImhleFwiKSB7XG4gICAgcmV0dXJuIGNvbG9yLnRvU3RyaW5nKFwiaGV4XCIpO1xuICB9XG4gIGlmIChjaGFubmVsID09PSBcImNzc1wiKSB7XG4gICAgcmV0dXJuIGNvbG9yLnRvU3RyaW5nKFwiY3NzXCIpO1xuICB9XG4gIGlmIChjaGFubmVsIGluIGNvbG9yKSB7XG4gICAgcmV0dXJuIGNvbG9yLmdldENoYW5uZWxWYWx1ZShjaGFubmVsKS50b1N0cmluZygpO1xuICB9XG4gIGNvbnN0IGlzSFNMID0gY29sb3IuZ2V0Rm9ybWF0KCkgPT09IFwiaHNsYVwiO1xuICBzd2l0Y2ggKGNoYW5uZWwpIHtcbiAgICBjYXNlIFwiaHVlXCI6XG4gICAgICByZXR1cm4gaXNIU0wgPyBjb2xvci50b0Zvcm1hdChcImhzbGFcIikuZ2V0Q2hhbm5lbFZhbHVlKFwiaHVlXCIpLnRvU3RyaW5nKCkgOiBjb2xvci50b0Zvcm1hdChcImhzYmFcIikuZ2V0Q2hhbm5lbFZhbHVlKFwiaHVlXCIpLnRvU3RyaW5nKCk7XG4gICAgY2FzZSBcInNhdHVyYXRpb25cIjpcbiAgICAgIHJldHVybiBpc0hTTCA/IGNvbG9yLnRvRm9ybWF0KFwiaHNsYVwiKS5nZXRDaGFubmVsVmFsdWUoXCJzYXR1cmF0aW9uXCIpLnRvU3RyaW5nKCkgOiBjb2xvci50b0Zvcm1hdChcImhzYmFcIikuZ2V0Q2hhbm5lbFZhbHVlKFwic2F0dXJhdGlvblwiKS50b1N0cmluZygpO1xuICAgIGNhc2UgXCJsaWdodG5lc3NcIjpcbiAgICAgIHJldHVybiBjb2xvci50b0Zvcm1hdChcImhzbGFcIikuZ2V0Q2hhbm5lbFZhbHVlKFwibGlnaHRuZXNzXCIpLnRvU3RyaW5nKCk7XG4gICAgY2FzZSBcImJyaWdodG5lc3NcIjpcbiAgICAgIHJldHVybiBjb2xvci50b0Zvcm1hdChcImhzYmFcIikuZ2V0Q2hhbm5lbFZhbHVlKFwiYnJpZ2h0bmVzc1wiKS50b1N0cmluZygpO1xuICAgIGNhc2UgXCJyZWRcIjpcbiAgICBjYXNlIFwiZ3JlZW5cIjpcbiAgICBjYXNlIFwiYmx1ZVwiOlxuICAgICAgcmV0dXJuIGNvbG9yLnRvRm9ybWF0KFwicmdiYVwiKS5nZXRDaGFubmVsVmFsdWUoY2hhbm5lbCkudG9TdHJpbmcoKTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGNvbG9yLmdldENoYW5uZWxWYWx1ZShjaGFubmVsKS50b1N0cmluZygpO1xuICB9XG59XG5mdW5jdGlvbiBnZXRDaGFubmVsUmFuZ2UoY29sb3IsIGNoYW5uZWwpIHtcbiAgc3dpdGNoIChjaGFubmVsKSB7XG4gICAgY2FzZSBcImhleFwiOlxuICAgICAgY29uc3QgbWluQ29sb3IgPSBwYXJzZUNvbG9yKFwiIzAwMDAwMFwiKTtcbiAgICAgIGNvbnN0IG1heENvbG9yID0gcGFyc2VDb2xvcihcIiNGRkZGRkZcIik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBtaW5WYWx1ZTogbWluQ29sb3IudG9IZXhJbnQoKSxcbiAgICAgICAgbWF4VmFsdWU6IG1heENvbG9yLnRvSGV4SW50KCksXG4gICAgICAgIHBhZ2VTaXplOiAxMCxcbiAgICAgICAgc3RlcDogMVxuICAgICAgfTtcbiAgICBjYXNlIFwiY3NzXCI6XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIGNhc2UgXCJodWVcIjpcbiAgICBjYXNlIFwic2F0dXJhdGlvblwiOlxuICAgIGNhc2UgXCJsaWdodG5lc3NcIjpcbiAgICAgIHJldHVybiBjb2xvci50b0Zvcm1hdChcImhzbGFcIikuZ2V0Q2hhbm5lbFJhbmdlKGNoYW5uZWwpO1xuICAgIGNhc2UgXCJicmlnaHRuZXNzXCI6XG4gICAgICByZXR1cm4gY29sb3IudG9Gb3JtYXQoXCJoc2JhXCIpLmdldENoYW5uZWxSYW5nZShjaGFubmVsKTtcbiAgICBjYXNlIFwicmVkXCI6XG4gICAgY2FzZSBcImdyZWVuXCI6XG4gICAgY2FzZSBcImJsdWVcIjpcbiAgICAgIHJldHVybiBjb2xvci50b0Zvcm1hdChcInJnYmFcIikuZ2V0Q2hhbm5lbFJhbmdlKGNoYW5uZWwpO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gY29sb3IuZ2V0Q2hhbm5lbFJhbmdlKGNoYW5uZWwpO1xuICB9XG59XG5cbi8vIHNyYy91dGlscy9nZXQtc2xpZGVyLWJhY2tncm91bmQudHNcbmZ1bmN0aW9uIGdldFNsaWRlckJhY2tncm91bmREaXJlY3Rpb24ob3JpZW50YXRpb24sIGRpcikge1xuICBpZiAob3JpZW50YXRpb24gPT09IFwidmVydGljYWxcIikge1xuICAgIHJldHVybiBcInRvcFwiO1xuICB9IGVsc2UgaWYgKGRpciA9PT0gXCJsdHJcIikge1xuICAgIHJldHVybiBcInJpZ2h0XCI7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFwibGVmdFwiO1xuICB9XG59XG52YXIgZ2V0U2xpZGVyQmFja2dyb3VuZCA9IChwcm9wczIpID0+IHtcbiAgY29uc3QgeyBjaGFubmVsLCB2YWx1ZSwgZGlyLCBvcmllbnRhdGlvbiB9ID0gcHJvcHMyO1xuICBjb25zdCBiZ0RpcmVjdGlvbiA9IGdldFNsaWRlckJhY2tncm91bmREaXJlY3Rpb24ob3JpZW50YXRpb24sIGRpcik7XG4gIGNvbnN0IHsgbWluVmFsdWUsIG1heFZhbHVlIH0gPSB2YWx1ZS5nZXRDaGFubmVsUmFuZ2UoY2hhbm5lbCk7XG4gIHN3aXRjaCAoY2hhbm5lbCkge1xuICAgIGNhc2UgXCJodWVcIjpcbiAgICAgIHJldHVybiBgbGluZWFyLWdyYWRpZW50KHRvICR7YmdEaXJlY3Rpb259LCByZ2IoMjU1LCAwLCAwKSAwJSwgcmdiKDI1NSwgMjU1LCAwKSAxNyUsIHJnYigwLCAyNTUsIDApIDMzJSwgcmdiKDAsIDI1NSwgMjU1KSA1MCUsIHJnYigwLCAwLCAyNTUpIDY3JSwgcmdiKDI1NSwgMCwgMjU1KSA4MyUsIHJnYigyNTUsIDAsIDApIDEwMCUpYDtcbiAgICBjYXNlIFwibGlnaHRuZXNzXCI6IHtcbiAgICAgIGxldCBzdGFydCA9IHZhbHVlLndpdGhDaGFubmVsVmFsdWUoY2hhbm5lbCwgbWluVmFsdWUpLnRvU3RyaW5nKFwiY3NzXCIpO1xuICAgICAgbGV0IG1pZGRsZSA9IHZhbHVlLndpdGhDaGFubmVsVmFsdWUoY2hhbm5lbCwgKG1heFZhbHVlIC0gbWluVmFsdWUpIC8gMikudG9TdHJpbmcoXCJjc3NcIik7XG4gICAgICBsZXQgZW5kID0gdmFsdWUud2l0aENoYW5uZWxWYWx1ZShjaGFubmVsLCBtYXhWYWx1ZSkudG9TdHJpbmcoXCJjc3NcIik7XG4gICAgICByZXR1cm4gYGxpbmVhci1ncmFkaWVudCh0byAke2JnRGlyZWN0aW9ufSwgJHtzdGFydH0sICR7bWlkZGxlfSwgJHtlbmR9KWA7XG4gICAgfVxuICAgIGNhc2UgXCJzYXR1cmF0aW9uXCI6XG4gICAgY2FzZSBcImJyaWdodG5lc3NcIjpcbiAgICBjYXNlIFwicmVkXCI6XG4gICAgY2FzZSBcImdyZWVuXCI6XG4gICAgY2FzZSBcImJsdWVcIjpcbiAgICBjYXNlIFwiYWxwaGFcIjoge1xuICAgICAgbGV0IHN0YXJ0ID0gdmFsdWUud2l0aENoYW5uZWxWYWx1ZShjaGFubmVsLCBtaW5WYWx1ZSkudG9TdHJpbmcoXCJjc3NcIik7XG4gICAgICBsZXQgZW5kID0gdmFsdWUud2l0aENoYW5uZWxWYWx1ZShjaGFubmVsLCBtYXhWYWx1ZSkudG9TdHJpbmcoXCJjc3NcIik7XG4gICAgICByZXR1cm4gYGxpbmVhci1ncmFkaWVudCh0byAke2JnRGlyZWN0aW9ufSwgJHtzdGFydH0sICR7ZW5kfSlgO1xuICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBjb2xvciBjaGFubmVsOiBcIiArIGNoYW5uZWwpO1xuICB9XG59O1xuXG4vLyBzcmMvY29sb3ItcGlja2VyLmNvbm5lY3QudHNcbmZ1bmN0aW9uIGNvbm5lY3Qoc2VydmljZSwgbm9ybWFsaXplKSB7XG4gIGNvbnN0IHsgY29udGV4dCwgc2VuZCwgcHJvcCwgY29tcHV0ZWQsIHN0YXRlLCBzY29wZSB9ID0gc2VydmljZTtcbiAgY29uc3QgdmFsdWUgPSBjb250ZXh0LmdldChcInZhbHVlXCIpO1xuICBjb25zdCBmb3JtYXQgPSBjb250ZXh0LmdldChcImZvcm1hdFwiKTtcbiAgY29uc3QgYXJlYVZhbHVlID0gY29tcHV0ZWQoXCJhcmVhVmFsdWVcIik7XG4gIGNvbnN0IHZhbHVlQXNTdHJpbmcgPSBjb21wdXRlZChcInZhbHVlQXNTdHJpbmdcIik7XG4gIGNvbnN0IGRpc2FibGVkID0gY29tcHV0ZWQoXCJkaXNhYmxlZFwiKTtcbiAgY29uc3QgaW50ZXJhY3RpdmUgPSBjb21wdXRlZChcImludGVyYWN0aXZlXCIpO1xuICBjb25zdCBkcmFnZ2luZyA9IHN0YXRlLmhhc1RhZyhcImRyYWdnaW5nXCIpO1xuICBjb25zdCBvcGVuID0gc3RhdGUuaGFzVGFnKFwib3BlblwiKTtcbiAgY29uc3QgZm9jdXNlZCA9IHN0YXRlLmhhc1RhZyhcImZvY3VzZWRcIik7XG4gIGNvbnN0IGdldEFyZWFDaGFubmVscyA9IChwcm9wczIpID0+IHtcbiAgICBjb25zdCBjaGFubmVscyA9IGFyZWFWYWx1ZS5nZXRDaGFubmVscygpO1xuICAgIHJldHVybiB7XG4gICAgICB4Q2hhbm5lbDogcHJvcHMyLnhDaGFubmVsID8/IGNoYW5uZWxzWzFdLFxuICAgICAgeUNoYW5uZWw6IHByb3BzMi55Q2hhbm5lbCA/PyBjaGFubmVsc1syXVxuICAgIH07XG4gIH07XG4gIGNvbnN0IGN1cnJlbnRQbGFjZW1lbnQgPSBjb250ZXh0LmdldChcImN1cnJlbnRQbGFjZW1lbnRcIik7XG4gIGNvbnN0IHBvcHBlclN0eWxlcyA9IGdldFBsYWNlbWVudFN0eWxlcyh7XG4gICAgLi4ucHJvcChcInBvc2l0aW9uaW5nXCIpLFxuICAgIHBsYWNlbWVudDogY3VycmVudFBsYWNlbWVudFxuICB9KTtcbiAgZnVuY3Rpb24gZ2V0U3dhdGNoVHJpZ2dlclN0YXRlKHByb3BzMikge1xuICAgIGNvbnN0IGNvbG9yID0gbm9ybWFsaXplQ29sb3IocHJvcHMyLnZhbHVlKS50b0Zvcm1hdChjb250ZXh0LmdldChcImZvcm1hdFwiKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiBjb2xvcixcbiAgICAgIHZhbHVlQXNTdHJpbmc6IGNvbG9yLnRvU3RyaW5nKFwiaGV4XCIpLFxuICAgICAgY2hlY2tlZDogY29sb3IuaXNFcXVhbCh2YWx1ZSksXG4gICAgICBkaXNhYmxlZDogcHJvcHMyLmRpc2FibGVkIHx8ICFpbnRlcmFjdGl2ZVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBkcmFnZ2luZyxcbiAgICBvcGVuLFxuICAgIHZhbHVlQXNTdHJpbmcsXG4gICAgdmFsdWUsXG4gICAgc2V0T3BlbihuZXh0T3Blbikge1xuICAgICAgY29uc3Qgb3BlbjIgPSBzdGF0ZS5oYXNUYWcoXCJvcGVuXCIpO1xuICAgICAgaWYgKG9wZW4yID09PSBuZXh0T3BlbikgcmV0dXJuO1xuICAgICAgc2VuZCh7IHR5cGU6IG5leHRPcGVuID8gXCJPUEVOXCIgOiBcIkNMT1NFXCIgfSk7XG4gICAgfSxcbiAgICBzZXRWYWx1ZSh2YWx1ZTIpIHtcbiAgICAgIHNlbmQoeyB0eXBlOiBcIlZBTFVFLlNFVFwiLCB2YWx1ZTogbm9ybWFsaXplQ29sb3IodmFsdWUyKSwgc3JjOiBcInNldC1jb2xvclwiIH0pO1xuICAgIH0sXG4gICAgZ2V0Q2hhbm5lbFZhbHVlKGNoYW5uZWwpIHtcbiAgICAgIHJldHVybiBnZXRDaGFubmVsVmFsdWUodmFsdWUsIGNoYW5uZWwpO1xuICAgIH0sXG4gICAgZ2V0Q2hhbm5lbFZhbHVlVGV4dChjaGFubmVsLCBsb2NhbGUpIHtcbiAgICAgIHJldHVybiB2YWx1ZS5mb3JtYXRDaGFubmVsVmFsdWUoY2hhbm5lbCwgbG9jYWxlKTtcbiAgICB9LFxuICAgIHNldENoYW5uZWxWYWx1ZShjaGFubmVsLCBjaGFubmVsVmFsdWUpIHtcbiAgICAgIGNvbnN0IGNvbG9yID0gdmFsdWUud2l0aENoYW5uZWxWYWx1ZShjaGFubmVsLCBjaGFubmVsVmFsdWUpO1xuICAgICAgc2VuZCh7IHR5cGU6IFwiVkFMVUUuU0VUXCIsIHZhbHVlOiBjb2xvciwgc3JjOiBcInNldC1jaGFubmVsXCIgfSk7XG4gICAgfSxcbiAgICBmb3JtYXQ6IGNvbnRleHQuZ2V0KFwiZm9ybWF0XCIpLFxuICAgIHNldEZvcm1hdChmb3JtYXQyKSB7XG4gICAgICBjb25zdCBmb3JtYXRWYWx1ZSA9IHZhbHVlLnRvRm9ybWF0KGZvcm1hdDIpO1xuICAgICAgc2VuZCh7IHR5cGU6IFwiVkFMVUUuU0VUXCIsIHZhbHVlOiBmb3JtYXRWYWx1ZSwgc3JjOiBcInNldC1mb3JtYXRcIiB9KTtcbiAgICB9LFxuICAgIGFscGhhOiB2YWx1ZS5nZXRDaGFubmVsVmFsdWUoXCJhbHBoYVwiKSxcbiAgICBzZXRBbHBoYShhbHBoYVZhbHVlKSB7XG4gICAgICBjb25zdCBjb2xvciA9IHZhbHVlLndpdGhDaGFubmVsVmFsdWUoXCJhbHBoYVwiLCBhbHBoYVZhbHVlKTtcbiAgICAgIHNlbmQoeyB0eXBlOiBcIlZBTFVFLlNFVFwiLCB2YWx1ZTogY29sb3IsIHNyYzogXCJzZXQtYWxwaGFcIiB9KTtcbiAgICB9LFxuICAgIGdldFJvb3RQcm9wcygpIHtcbiAgICAgIHJldHVybiBub3JtYWxpemUuZWxlbWVudCh7XG4gICAgICAgIC4uLnBhcnRzLnJvb3QuYXR0cnMsXG4gICAgICAgIGRpcjogcHJvcChcImRpclwiKSxcbiAgICAgICAgaWQ6IGdldFJvb3RJZChzY29wZSksXG4gICAgICAgIFwiZGF0YS1kaXNhYmxlZFwiOiBkYXRhQXR0cihkaXNhYmxlZCksXG4gICAgICAgIFwiZGF0YS1yZWFkb25seVwiOiBkYXRhQXR0cihwcm9wKFwicmVhZE9ubHlcIikpLFxuICAgICAgICBcImRhdGEtaW52YWxpZFwiOiBkYXRhQXR0cihwcm9wKFwiaW52YWxpZFwiKSksXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgXCItLXZhbHVlXCI6IHZhbHVlLnRvU3RyaW5nKFwiY3NzXCIpXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0TGFiZWxQcm9wcygpIHtcbiAgICAgIHJldHVybiBub3JtYWxpemUuZWxlbWVudCh7XG4gICAgICAgIC4uLnBhcnRzLmxhYmVsLmF0dHJzLFxuICAgICAgICBkaXI6IHByb3AoXCJkaXJcIiksXG4gICAgICAgIGlkOiBnZXRMYWJlbElkKHNjb3BlKSxcbiAgICAgICAgaHRtbEZvcjogZ2V0SGlkZGVuSW5wdXRJZChzY29wZSksXG4gICAgICAgIFwiZGF0YS1kaXNhYmxlZFwiOiBkYXRhQXR0cihkaXNhYmxlZCksXG4gICAgICAgIFwiZGF0YS1yZWFkb25seVwiOiBkYXRhQXR0cihwcm9wKFwicmVhZE9ubHlcIikpLFxuICAgICAgICBcImRhdGEtaW52YWxpZFwiOiBkYXRhQXR0cihwcm9wKFwiaW52YWxpZFwiKSksXG4gICAgICAgIFwiZGF0YS1mb2N1c1wiOiBkYXRhQXR0cihmb2N1c2VkKSxcbiAgICAgICAgb25DbGljayhldmVudCkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgY29uc3QgaW5wdXRFbCA9IHF1ZXJ5KGdldENvbnRyb2xFbChzY29wZSksIFwiW2RhdGEtY2hhbm5lbD1oZXhdXCIpO1xuICAgICAgICAgIGlucHV0RWw/LmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRDb250cm9sUHJvcHMoKSB7XG4gICAgICByZXR1cm4gbm9ybWFsaXplLmVsZW1lbnQoe1xuICAgICAgICAuLi5wYXJ0cy5jb250cm9sLmF0dHJzLFxuICAgICAgICBpZDogZ2V0Q29udHJvbElkKHNjb3BlKSxcbiAgICAgICAgZGlyOiBwcm9wKFwiZGlyXCIpLFxuICAgICAgICBcImRhdGEtZGlzYWJsZWRcIjogZGF0YUF0dHIoZGlzYWJsZWQpLFxuICAgICAgICBcImRhdGEtcmVhZG9ubHlcIjogZGF0YUF0dHIocHJvcChcInJlYWRPbmx5XCIpKSxcbiAgICAgICAgXCJkYXRhLWludmFsaWRcIjogZGF0YUF0dHIocHJvcChcImludmFsaWRcIikpLFxuICAgICAgICBcImRhdGEtc3RhdGVcIjogb3BlbiA/IFwib3BlblwiIDogXCJjbG9zZWRcIixcbiAgICAgICAgXCJkYXRhLWZvY3VzXCI6IGRhdGFBdHRyKGZvY3VzZWQpXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldFRyaWdnZXJQcm9wcygpIHtcbiAgICAgIHJldHVybiBub3JtYWxpemUuYnV0dG9uKHtcbiAgICAgICAgLi4ucGFydHMudHJpZ2dlci5hdHRycyxcbiAgICAgICAgaWQ6IGdldFRyaWdnZXJJZChzY29wZSksXG4gICAgICAgIGRpcjogcHJvcChcImRpclwiKSxcbiAgICAgICAgZGlzYWJsZWQsXG4gICAgICAgIFwiYXJpYS1sYWJlbFwiOiBgc2VsZWN0IGNvbG9yLiBjdXJyZW50IGNvbG9yIGlzICR7dmFsdWVBc1N0cmluZ31gLFxuICAgICAgICBcImFyaWEtY29udHJvbHNcIjogZ2V0Q29udGVudElkKHNjb3BlKSxcbiAgICAgICAgXCJhcmlhLWxhYmVsbGVkYnlcIjogZ2V0TGFiZWxJZChzY29wZSksXG4gICAgICAgIFwiZGF0YS1kaXNhYmxlZFwiOiBkYXRhQXR0cihkaXNhYmxlZCksXG4gICAgICAgIFwiZGF0YS1yZWFkb25seVwiOiBkYXRhQXR0cihwcm9wKFwicmVhZE9ubHlcIikpLFxuICAgICAgICBcImRhdGEtaW52YWxpZFwiOiBkYXRhQXR0cihwcm9wKFwiaW52YWxpZFwiKSksXG4gICAgICAgIFwiZGF0YS1wbGFjZW1lbnRcIjogY3VycmVudFBsYWNlbWVudCxcbiAgICAgICAgXCJhcmlhLWV4cGFuZGVkXCI6IGRhdGFBdHRyKG9wZW4pLFxuICAgICAgICBcImRhdGEtc3RhdGVcIjogb3BlbiA/IFwib3BlblwiIDogXCJjbG9zZWRcIixcbiAgICAgICAgXCJkYXRhLWZvY3VzXCI6IGRhdGFBdHRyKGZvY3VzZWQpLFxuICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICBvbkNsaWNrKCkge1xuICAgICAgICAgIGlmICghaW50ZXJhY3RpdmUpIHJldHVybjtcbiAgICAgICAgICBzZW5kKHsgdHlwZTogXCJUUklHR0VSLkNMSUNLXCIgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uQmx1cigpIHtcbiAgICAgICAgICBpZiAoIWludGVyYWN0aXZlKSByZXR1cm47XG4gICAgICAgICAgc2VuZCh7IHR5cGU6IFwiVFJJR0dFUi5CTFVSXCIgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIlxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldFBvc2l0aW9uZXJQcm9wcygpIHtcbiAgICAgIHJldHVybiBub3JtYWxpemUuZWxlbWVudCh7XG4gICAgICAgIC4uLnBhcnRzLnBvc2l0aW9uZXIuYXR0cnMsXG4gICAgICAgIGlkOiBnZXRQb3NpdGlvbmVySWQoc2NvcGUpLFxuICAgICAgICBkaXI6IHByb3AoXCJkaXJcIiksXG4gICAgICAgIHN0eWxlOiBwb3BwZXJTdHlsZXMuZmxvYXRpbmdcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0Q29udGVudFByb3BzKCkge1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZS5lbGVtZW50KHtcbiAgICAgICAgLi4ucGFydHMuY29udGVudC5hdHRycyxcbiAgICAgICAgaWQ6IGdldENvbnRlbnRJZChzY29wZSksXG4gICAgICAgIGRpcjogcHJvcChcImRpclwiKSxcbiAgICAgICAgdGFiSW5kZXg6IC0xLFxuICAgICAgICBcImRhdGEtcGxhY2VtZW50XCI6IGN1cnJlbnRQbGFjZW1lbnQsXG4gICAgICAgIFwiZGF0YS1zdGF0ZVwiOiBvcGVuID8gXCJvcGVuXCIgOiBcImNsb3NlZFwiLFxuICAgICAgICBoaWRkZW46ICFvcGVuXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldFZhbHVlVGV4dFByb3BzKCkge1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZS5lbGVtZW50KHtcbiAgICAgICAgLi4ucGFydHMudmFsdWVUZXh0LmF0dHJzLFxuICAgICAgICBkaXI6IHByb3AoXCJkaXJcIiksXG4gICAgICAgIFwiZGF0YS1kaXNhYmxlZFwiOiBkYXRhQXR0cihkaXNhYmxlZCksXG4gICAgICAgIFwiZGF0YS1mb2N1c1wiOiBkYXRhQXR0cihmb2N1c2VkKVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRBcmVhUHJvcHMocHJvcHMyID0ge30pIHtcbiAgICAgIGNvbnN0IHsgeENoYW5uZWwsIHlDaGFubmVsIH0gPSBnZXRBcmVhQ2hhbm5lbHMocHJvcHMyKTtcbiAgICAgIGNvbnN0IHsgYXJlYVN0eWxlcyB9ID0gZ2V0Q29sb3JBcmVhR3JhZGllbnQoYXJlYVZhbHVlLCB7XG4gICAgICAgIHhDaGFubmVsLFxuICAgICAgICB5Q2hhbm5lbCxcbiAgICAgICAgZGlyOiBwcm9wKFwiZGlyXCIpXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBub3JtYWxpemUuZWxlbWVudCh7XG4gICAgICAgIC4uLnBhcnRzLmFyZWEuYXR0cnMsXG4gICAgICAgIGlkOiBnZXRBcmVhSWQoc2NvcGUpLFxuICAgICAgICByb2xlOiBcImdyb3VwXCIsXG4gICAgICAgIFwiZGF0YS1pbnZhbGlkXCI6IGRhdGFBdHRyKHByb3AoXCJpbnZhbGlkXCIpKSxcbiAgICAgICAgXCJkYXRhLWRpc2FibGVkXCI6IGRhdGFBdHRyKGRpc2FibGVkKSxcbiAgICAgICAgXCJkYXRhLXJlYWRvbmx5XCI6IGRhdGFBdHRyKHByb3AoXCJyZWFkT25seVwiKSksXG4gICAgICAgIG9uUG9pbnRlckRvd24oZXZlbnQpIHtcbiAgICAgICAgICBpZiAoIWludGVyYWN0aXZlKSByZXR1cm47XG4gICAgICAgICAgaWYgKCFpc0xlZnRDbGljayhldmVudCkpIHJldHVybjtcbiAgICAgICAgICBpZiAoaXNNb2RpZmllcktleShldmVudCkpIHJldHVybjtcbiAgICAgICAgICBjb25zdCBwb2ludCA9IGdldEV2ZW50UG9pbnQoZXZlbnQpO1xuICAgICAgICAgIGNvbnN0IGNoYW5uZWwgPSB7IHhDaGFubmVsLCB5Q2hhbm5lbCB9O1xuICAgICAgICAgIHNlbmQoeyB0eXBlOiBcIkFSRUEuUE9JTlRFUl9ET1dOXCIsIHBvaW50LCBjaGFubmVsLCBpZDogXCJhcmVhXCIgfSk7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuICAgICAgICAgIHRvdWNoQWN0aW9uOiBcIm5vbmVcIixcbiAgICAgICAgICBmb3JjZWRDb2xvckFkanVzdDogXCJub25lXCIsXG4gICAgICAgICAgLi4uYXJlYVN0eWxlc1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldEFyZWFCYWNrZ3JvdW5kUHJvcHMocHJvcHMyID0ge30pIHtcbiAgICAgIGNvbnN0IHsgeENoYW5uZWwsIHlDaGFubmVsIH0gPSBnZXRBcmVhQ2hhbm5lbHMocHJvcHMyKTtcbiAgICAgIGNvbnN0IHsgYXJlYUdyYWRpZW50U3R5bGVzIH0gPSBnZXRDb2xvckFyZWFHcmFkaWVudChhcmVhVmFsdWUsIHtcbiAgICAgICAgeENoYW5uZWwsXG4gICAgICAgIHlDaGFubmVsLFxuICAgICAgICBkaXI6IHByb3AoXCJkaXJcIilcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZS5lbGVtZW50KHtcbiAgICAgICAgLi4ucGFydHMuYXJlYUJhY2tncm91bmQuYXR0cnMsXG4gICAgICAgIGlkOiBnZXRBcmVhR3JhZGllbnRJZChzY29wZSksXG4gICAgICAgIFwiZGF0YS1pbnZhbGlkXCI6IGRhdGFBdHRyKHByb3AoXCJpbnZhbGlkXCIpKSxcbiAgICAgICAgXCJkYXRhLWRpc2FibGVkXCI6IGRhdGFBdHRyKGRpc2FibGVkKSxcbiAgICAgICAgXCJkYXRhLXJlYWRvbmx5XCI6IGRhdGFBdHRyKHByb3AoXCJyZWFkT25seVwiKSksXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgICB0b3VjaEFjdGlvbjogXCJub25lXCIsXG4gICAgICAgICAgZm9yY2VkQ29sb3JBZGp1c3Q6IFwibm9uZVwiLFxuICAgICAgICAgIC4uLmFyZWFHcmFkaWVudFN0eWxlc1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldEFyZWFUaHVtYlByb3BzKHByb3BzMiA9IHt9KSB7XG4gICAgICBjb25zdCB7IHhDaGFubmVsLCB5Q2hhbm5lbCB9ID0gZ2V0QXJlYUNoYW5uZWxzKHByb3BzMik7XG4gICAgICBjb25zdCBjaGFubmVsID0geyB4Q2hhbm5lbCwgeUNoYW5uZWwgfTtcbiAgICAgIGNvbnN0IHhQZXJjZW50ID0gYXJlYVZhbHVlLmdldENoYW5uZWxWYWx1ZVBlcmNlbnQoeENoYW5uZWwpO1xuICAgICAgY29uc3QgeVBlcmNlbnQgPSAxIC0gYXJlYVZhbHVlLmdldENoYW5uZWxWYWx1ZVBlcmNlbnQoeUNoYW5uZWwpO1xuICAgICAgY29uc3QgeFZhbHVlID0gYXJlYVZhbHVlLmdldENoYW5uZWxWYWx1ZSh4Q2hhbm5lbCk7XG4gICAgICBjb25zdCB5VmFsdWUgPSBhcmVhVmFsdWUuZ2V0Q2hhbm5lbFZhbHVlKHlDaGFubmVsKTtcbiAgICAgIGNvbnN0IGNvbG9yID0gYXJlYVZhbHVlLndpdGhDaGFubmVsVmFsdWUoXCJhbHBoYVwiLCAxKS50b1N0cmluZyhcImNzc1wiKTtcbiAgICAgIHJldHVybiBub3JtYWxpemUuZWxlbWVudCh7XG4gICAgICAgIC4uLnBhcnRzLmFyZWFUaHVtYi5hdHRycyxcbiAgICAgICAgaWQ6IGdldEFyZWFUaHVtYklkKHNjb3BlKSxcbiAgICAgICAgZGlyOiBwcm9wKFwiZGlyXCIpLFxuICAgICAgICB0YWJJbmRleDogZGlzYWJsZWQgPyB2b2lkIDAgOiAwLFxuICAgICAgICBcImRhdGEtZGlzYWJsZWRcIjogZGF0YUF0dHIoZGlzYWJsZWQpLFxuICAgICAgICBcImRhdGEtaW52YWxpZFwiOiBkYXRhQXR0cihwcm9wKFwiaW52YWxpZFwiKSksXG4gICAgICAgIFwiZGF0YS1yZWFkb25seVwiOiBkYXRhQXR0cihwcm9wKFwicmVhZE9ubHlcIikpLFxuICAgICAgICByb2xlOiBcInNsaWRlclwiLFxuICAgICAgICBcImFyaWEtdmFsdWVtaW5cIjogMCxcbiAgICAgICAgXCJhcmlhLXZhbHVlbWF4XCI6IDEwMCxcbiAgICAgICAgXCJhcmlhLXZhbHVlbm93XCI6IHhWYWx1ZSxcbiAgICAgICAgXCJhcmlhLWxhYmVsXCI6IGAke3hDaGFubmVsfSBhbmQgJHt5Q2hhbm5lbH1gLFxuICAgICAgICBcImFyaWEtcm9sZWRlc2NyaXB0aW9uXCI6IFwiMmQgc2xpZGVyXCIsXG4gICAgICAgIFwiYXJpYS12YWx1ZXRleHRcIjogYCR7eENoYW5uZWx9ICR7eFZhbHVlfSwgJHt5Q2hhbm5lbH0gJHt5VmFsdWV9YCxcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICAgIGxlZnQ6IGAke3hQZXJjZW50ICogMTAwfSVgLFxuICAgICAgICAgIHRvcDogYCR7eVBlcmNlbnQgKiAxMDB9JWAsXG4gICAgICAgICAgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZSgtNTAlLCAtNTAlKVwiLFxuICAgICAgICAgIHRvdWNoQWN0aW9uOiBcIm5vbmVcIixcbiAgICAgICAgICBmb3JjZWRDb2xvckFkanVzdDogXCJub25lXCIsXG4gICAgICAgICAgXCItLWNvbG9yXCI6IGNvbG9yLFxuICAgICAgICAgIGJhY2tncm91bmQ6IGNvbG9yXG4gICAgICAgIH0sXG4gICAgICAgIG9uRm9jdXMoKSB7XG4gICAgICAgICAgaWYgKCFpbnRlcmFjdGl2ZSkgcmV0dXJuO1xuICAgICAgICAgIHNlbmQoeyB0eXBlOiBcIkFSRUEuRk9DVVNcIiwgaWQ6IFwiYXJlYVwiLCBjaGFubmVsIH0pO1xuICAgICAgICB9LFxuICAgICAgICBvbktleURvd24oZXZlbnQpIHtcbiAgICAgICAgICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuICAgICAgICAgIGlmICghaW50ZXJhY3RpdmUpIHJldHVybjtcbiAgICAgICAgICBjb25zdCBzdGVwID0gZ2V0RXZlbnRTdGVwKGV2ZW50KTtcbiAgICAgICAgICBjb25zdCBrZXlNYXAgPSB7XG4gICAgICAgICAgICBBcnJvd1VwKCkge1xuICAgICAgICAgICAgICBzZW5kKHsgdHlwZTogXCJBUkVBLkFSUk9XX1VQXCIsIGNoYW5uZWwsIHN0ZXAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQXJyb3dEb3duKCkge1xuICAgICAgICAgICAgICBzZW5kKHsgdHlwZTogXCJBUkVBLkFSUk9XX0RPV05cIiwgY2hhbm5lbCwgc3RlcCB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBBcnJvd0xlZnQoKSB7XG4gICAgICAgICAgICAgIHNlbmQoeyB0eXBlOiBcIkFSRUEuQVJST1dfTEVGVFwiLCBjaGFubmVsLCBzdGVwIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEFycm93UmlnaHQoKSB7XG4gICAgICAgICAgICAgIHNlbmQoeyB0eXBlOiBcIkFSRUEuQVJST1dfUklHSFRcIiwgY2hhbm5lbCwgc3RlcCB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBQYWdlVXAoKSB7XG4gICAgICAgICAgICAgIHNlbmQoeyB0eXBlOiBcIkFSRUEuUEFHRV9VUFwiLCBjaGFubmVsLCBzdGVwIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFBhZ2VEb3duKCkge1xuICAgICAgICAgICAgICBzZW5kKHsgdHlwZTogXCJBUkVBLlBBR0VfRE9XTlwiLCBjaGFubmVsLCBzdGVwIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEVzY2FwZShldmVudDIpIHtcbiAgICAgICAgICAgICAgZXZlbnQyLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgY29uc3QgZXhlYyA9IGtleU1hcFtnZXRFdmVudEtleShldmVudCwge1xuICAgICAgICAgICAgZGlyOiBwcm9wKFwiZGlyXCIpXG4gICAgICAgICAgfSldO1xuICAgICAgICAgIGlmIChleGVjKSB7XG4gICAgICAgICAgICBleGVjKGV2ZW50KTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldFRyYW5zcGFyZW5jeUdyaWRQcm9wcyhwcm9wczIgPSB7fSkge1xuICAgICAgY29uc3QgeyBzaXplID0gXCIxMnB4XCIgfSA9IHByb3BzMjtcbiAgICAgIHJldHVybiBub3JtYWxpemUuZWxlbWVudCh7XG4gICAgICAgIC4uLnBhcnRzLnRyYW5zcGFyZW5jeUdyaWQuYXR0cnMsXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgXCItLXNpemVcIjogc2l6ZSxcbiAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgICAgICAgaGVpZ2h0OiBcIjEwMCVcIixcbiAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjZmZmXCIsXG4gICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBcImNvbmljLWdyYWRpZW50KCNlZWVlZWUgMCAyNSUsIHRyYW5zcGFyZW50IDAgNTAlLCAjZWVlZWVlIDAgNzUlLCB0cmFuc3BhcmVudCAwKVwiLFxuICAgICAgICAgIGJhY2tncm91bmRTaXplOiBcInZhcigtLXNpemUpIHZhcigtLXNpemUpXCIsXG4gICAgICAgICAgaW5zZXQ6IFwiMHB4XCIsXG4gICAgICAgICAgekluZGV4OiBcImF1dG9cIixcbiAgICAgICAgICBwb2ludGVyRXZlbnRzOiBcIm5vbmVcIlxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldENoYW5uZWxTbGlkZXJQcm9wcyhwcm9wczIpIHtcbiAgICAgIGNvbnN0IHsgb3JpZW50YXRpb24gPSBcImhvcml6b250YWxcIiwgY2hhbm5lbCwgZm9ybWF0OiBmb3JtYXQyIH0gPSBwcm9wczI7XG4gICAgICByZXR1cm4gbm9ybWFsaXplLmVsZW1lbnQoe1xuICAgICAgICAuLi5wYXJ0cy5jaGFubmVsU2xpZGVyLmF0dHJzLFxuICAgICAgICBcImRhdGEtY2hhbm5lbFwiOiBjaGFubmVsLFxuICAgICAgICBcImRhdGEtb3JpZW50YXRpb25cIjogb3JpZW50YXRpb24sXG4gICAgICAgIHJvbGU6IFwicHJlc2VudGF0aW9uXCIsXG4gICAgICAgIG9uUG9pbnRlckRvd24oZXZlbnQpIHtcbiAgICAgICAgICBpZiAoIWludGVyYWN0aXZlKSByZXR1cm47XG4gICAgICAgICAgaWYgKCFpc0xlZnRDbGljayhldmVudCkpIHJldHVybjtcbiAgICAgICAgICBpZiAoaXNNb2RpZmllcktleShldmVudCkpIHJldHVybjtcbiAgICAgICAgICBjb25zdCBwb2ludCA9IGdldEV2ZW50UG9pbnQoZXZlbnQpO1xuICAgICAgICAgIHNlbmQoeyB0eXBlOiBcIkNIQU5ORUxfU0xJREVSLlBPSU5URVJfRE9XTlwiLCBjaGFubmVsLCBmb3JtYXQ6IGZvcm1hdDIsIHBvaW50LCBpZDogY2hhbm5lbCwgb3JpZW50YXRpb24gfSk7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuICAgICAgICAgIHRvdWNoQWN0aW9uOiBcIm5vbmVcIlxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldENoYW5uZWxTbGlkZXJUcmFja1Byb3BzKHByb3BzMikge1xuICAgICAgY29uc3QgeyBvcmllbnRhdGlvbiA9IFwiaG9yaXpvbnRhbFwiLCBjaGFubmVsLCBmb3JtYXQ6IGZvcm1hdDIgfSA9IHByb3BzMjtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRWYWx1ZSA9IGZvcm1hdDIgPyB2YWx1ZS50b0Zvcm1hdChmb3JtYXQyKSA6IGFyZWFWYWx1ZTtcbiAgICAgIHJldHVybiBub3JtYWxpemUuZWxlbWVudCh7XG4gICAgICAgIC4uLnBhcnRzLmNoYW5uZWxTbGlkZXJUcmFjay5hdHRycyxcbiAgICAgICAgaWQ6IGdldENoYW5uZWxTbGlkZXJUcmFja0lkKHNjb3BlLCBjaGFubmVsKSxcbiAgICAgICAgcm9sZTogXCJncm91cFwiLFxuICAgICAgICBcImRhdGEtY2hhbm5lbFwiOiBjaGFubmVsLFxuICAgICAgICBcImRhdGEtb3JpZW50YXRpb25cIjogb3JpZW50YXRpb24sXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgICBmb3JjZWRDb2xvckFkanVzdDogXCJub25lXCIsXG4gICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBnZXRTbGlkZXJCYWNrZ3JvdW5kKHtcbiAgICAgICAgICAgIG9yaWVudGF0aW9uLFxuICAgICAgICAgICAgY2hhbm5lbCxcbiAgICAgICAgICAgIGRpcjogcHJvcChcImRpclwiKSxcbiAgICAgICAgICAgIHZhbHVlOiBub3JtYWxpemVkVmFsdWVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldENoYW5uZWxTbGlkZXJMYWJlbFByb3BzKHByb3BzMikge1xuICAgICAgY29uc3QgeyBjaGFubmVsIH0gPSBwcm9wczI7XG4gICAgICByZXR1cm4gbm9ybWFsaXplLmVsZW1lbnQoe1xuICAgICAgICAuLi5wYXJ0cy5jaGFubmVsU2xpZGVyTGFiZWwuYXR0cnMsXG4gICAgICAgIFwiZGF0YS1jaGFubmVsXCI6IGNoYW5uZWwsXG4gICAgICAgIG9uQ2xpY2soZXZlbnQpIHtcbiAgICAgICAgICBpZiAoIWludGVyYWN0aXZlKSByZXR1cm47XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBjb25zdCB0aHVtYklkID0gZ2V0Q2hhbm5lbFNsaWRlclRodW1iSWQoc2NvcGUsIGNoYW5uZWwpO1xuICAgICAgICAgIHNjb3BlLmdldEJ5SWQodGh1bWJJZCk/LmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICB1c2VyU2VsZWN0OiBcIm5vbmVcIixcbiAgICAgICAgICBXZWJraXRVc2VyU2VsZWN0OiBcIm5vbmVcIlxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldENoYW5uZWxTbGlkZXJWYWx1ZVRleHRQcm9wcyhwcm9wczIpIHtcbiAgICAgIHJldHVybiBub3JtYWxpemUuZWxlbWVudCh7XG4gICAgICAgIC4uLnBhcnRzLmNoYW5uZWxTbGlkZXJWYWx1ZVRleHQuYXR0cnMsXG4gICAgICAgIFwiZGF0YS1jaGFubmVsXCI6IHByb3BzMi5jaGFubmVsXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldENoYW5uZWxTbGlkZXJUaHVtYlByb3BzKHByb3BzMikge1xuICAgICAgY29uc3QgeyBvcmllbnRhdGlvbiA9IFwiaG9yaXpvbnRhbFwiLCBjaGFubmVsLCBmb3JtYXQ6IGZvcm1hdDIgfSA9IHByb3BzMjtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRWYWx1ZSA9IGZvcm1hdDIgPyB2YWx1ZS50b0Zvcm1hdChmb3JtYXQyKSA6IGFyZWFWYWx1ZTtcbiAgICAgIGNvbnN0IGNoYW5uZWxSYW5nZSA9IG5vcm1hbGl6ZWRWYWx1ZS5nZXRDaGFubmVsUmFuZ2UoY2hhbm5lbCk7XG4gICAgICBjb25zdCBjaGFubmVsVmFsdWUgPSBub3JtYWxpemVkVmFsdWUuZ2V0Q2hhbm5lbFZhbHVlKGNoYW5uZWwpO1xuICAgICAgY29uc3Qgb2Zmc2V0ID0gKGNoYW5uZWxWYWx1ZSAtIGNoYW5uZWxSYW5nZS5taW5WYWx1ZSkgLyAoY2hhbm5lbFJhbmdlLm1heFZhbHVlIC0gY2hhbm5lbFJhbmdlLm1pblZhbHVlKTtcbiAgICAgIGNvbnN0IHBsYWNlbWVudFN0eWxlcyA9IG9yaWVudGF0aW9uID09PSBcImhvcml6b250YWxcIiA/IHsgbGVmdDogYCR7b2Zmc2V0ICogMTAwfSVgLCB0b3A6IFwiNTAlXCIgfSA6IHsgdG9wOiBgJHtvZmZzZXQgKiAxMDB9JWAsIGxlZnQ6IFwiNTAlXCIgfTtcbiAgICAgIHJldHVybiBub3JtYWxpemUuZWxlbWVudCh7XG4gICAgICAgIC4uLnBhcnRzLmNoYW5uZWxTbGlkZXJUaHVtYi5hdHRycyxcbiAgICAgICAgaWQ6IGdldENoYW5uZWxTbGlkZXJUaHVtYklkKHNjb3BlLCBjaGFubmVsKSxcbiAgICAgICAgcm9sZTogXCJzbGlkZXJcIixcbiAgICAgICAgXCJhcmlhLWxhYmVsXCI6IGNoYW5uZWwsXG4gICAgICAgIHRhYkluZGV4OiBkaXNhYmxlZCA/IHZvaWQgMCA6IDAsXG4gICAgICAgIFwiZGF0YS1jaGFubmVsXCI6IGNoYW5uZWwsXG4gICAgICAgIFwiZGF0YS1kaXNhYmxlZFwiOiBkYXRhQXR0cihkaXNhYmxlZCksXG4gICAgICAgIFwiZGF0YS1vcmllbnRhdGlvblwiOiBvcmllbnRhdGlvbixcbiAgICAgICAgXCJhcmlhLWRpc2FibGVkXCI6IGRhdGFBdHRyKGRpc2FibGVkKSxcbiAgICAgICAgXCJhcmlhLW9yaWVudGF0aW9uXCI6IG9yaWVudGF0aW9uLFxuICAgICAgICBcImFyaWEtdmFsdWVtYXhcIjogY2hhbm5lbFJhbmdlLm1heFZhbHVlLFxuICAgICAgICBcImFyaWEtdmFsdWVtaW5cIjogY2hhbm5lbFJhbmdlLm1pblZhbHVlLFxuICAgICAgICBcImFyaWEtdmFsdWVub3dcIjogY2hhbm5lbFZhbHVlLFxuICAgICAgICBcImFyaWEtdmFsdWV0ZXh0XCI6IGAke2NoYW5uZWx9ICR7Y2hhbm5lbFZhbHVlfWAsXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgZm9yY2VkQ29sb3JBZGp1c3Q6IFwibm9uZVwiLFxuICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgYmFja2dyb3VuZDogZ2V0Q2hhbm5lbERpc3BsYXlDb2xvcihhcmVhVmFsdWUsIGNoYW5uZWwpLnRvU3RyaW5nKFwiY3NzXCIpLFxuICAgICAgICAgIC4uLnBsYWNlbWVudFN0eWxlc1xuICAgICAgICB9LFxuICAgICAgICBvbkZvY3VzKCkge1xuICAgICAgICAgIGlmICghaW50ZXJhY3RpdmUpIHJldHVybjtcbiAgICAgICAgICBzZW5kKHsgdHlwZTogXCJDSEFOTkVMX1NMSURFUi5GT0NVU1wiLCBjaGFubmVsIH0pO1xuICAgICAgICB9LFxuICAgICAgICBvbktleURvd24oZXZlbnQpIHtcbiAgICAgICAgICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuICAgICAgICAgIGlmICghaW50ZXJhY3RpdmUpIHJldHVybjtcbiAgICAgICAgICBjb25zdCBzdGVwID0gZ2V0RXZlbnRTdGVwKGV2ZW50KSAqIGNoYW5uZWxSYW5nZS5zdGVwO1xuICAgICAgICAgIGNvbnN0IGtleU1hcCA9IHtcbiAgICAgICAgICAgIEFycm93VXAoKSB7XG4gICAgICAgICAgICAgIHNlbmQoeyB0eXBlOiBcIkNIQU5ORUxfU0xJREVSLkFSUk9XX1VQXCIsIGNoYW5uZWwsIHN0ZXAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQXJyb3dEb3duKCkge1xuICAgICAgICAgICAgICBzZW5kKHsgdHlwZTogXCJDSEFOTkVMX1NMSURFUi5BUlJPV19ET1dOXCIsIGNoYW5uZWwsIHN0ZXAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQXJyb3dMZWZ0KCkge1xuICAgICAgICAgICAgICBzZW5kKHsgdHlwZTogXCJDSEFOTkVMX1NMSURFUi5BUlJPV19MRUZUXCIsIGNoYW5uZWwsIHN0ZXAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQXJyb3dSaWdodCgpIHtcbiAgICAgICAgICAgICAgc2VuZCh7IHR5cGU6IFwiQ0hBTk5FTF9TTElERVIuQVJST1dfUklHSFRcIiwgY2hhbm5lbCwgc3RlcCB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBQYWdlVXAoKSB7XG4gICAgICAgICAgICAgIHNlbmQoeyB0eXBlOiBcIkNIQU5ORUxfU0xJREVSLlBBR0VfVVBcIiwgY2hhbm5lbCB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBQYWdlRG93bigpIHtcbiAgICAgICAgICAgICAgc2VuZCh7IHR5cGU6IFwiQ0hBTk5FTF9TTElERVIuUEFHRV9ET1dOXCIsIGNoYW5uZWwgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgSG9tZSgpIHtcbiAgICAgICAgICAgICAgc2VuZCh7IHR5cGU6IFwiQ0hBTk5FTF9TTElERVIuSE9NRVwiLCBjaGFubmVsIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEVuZCgpIHtcbiAgICAgICAgICAgICAgc2VuZCh7IHR5cGU6IFwiQ0hBTk5FTF9TTElERVIuRU5EXCIsIGNoYW5uZWwgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgRXNjYXBlKGV2ZW50Mikge1xuICAgICAgICAgICAgICBldmVudDIuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBjb25zdCBleGVjID0ga2V5TWFwW2dldEV2ZW50S2V5KGV2ZW50LCB7XG4gICAgICAgICAgICBkaXI6IHByb3AoXCJkaXJcIilcbiAgICAgICAgICB9KV07XG4gICAgICAgICAgaWYgKGV4ZWMpIHtcbiAgICAgICAgICAgIGV4ZWMoZXZlbnQpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0Q2hhbm5lbElucHV0UHJvcHMocHJvcHMyKSB7XG4gICAgICBjb25zdCB7IGNoYW5uZWwgfSA9IHByb3BzMjtcbiAgICAgIGNvbnN0IGlzVGV4dEZpZWxkID0gY2hhbm5lbCA9PT0gXCJoZXhcIiB8fCBjaGFubmVsID09PSBcImNzc1wiO1xuICAgICAgY29uc3QgY2hhbm5lbFJhbmdlID0gZ2V0Q2hhbm5lbFJhbmdlKHZhbHVlLCBjaGFubmVsKTtcbiAgICAgIHJldHVybiBub3JtYWxpemUuaW5wdXQoe1xuICAgICAgICAuLi5wYXJ0cy5jaGFubmVsSW5wdXQuYXR0cnMsXG4gICAgICAgIGRpcjogcHJvcChcImRpclwiKSxcbiAgICAgICAgdHlwZTogaXNUZXh0RmllbGQgPyBcInRleHRcIiA6IFwibnVtYmVyXCIsXG4gICAgICAgIFwiZGF0YS1jaGFubmVsXCI6IGNoYW5uZWwsXG4gICAgICAgIFwiYXJpYS1sYWJlbFwiOiBjaGFubmVsLFxuICAgICAgICBzcGVsbENoZWNrOiBmYWxzZSxcbiAgICAgICAgYXV0b0NvbXBsZXRlOiBcIm9mZlwiLFxuICAgICAgICBkaXNhYmxlZCxcbiAgICAgICAgXCJkYXRhLWRpc2FibGVkXCI6IGRhdGFBdHRyKGRpc2FibGVkKSxcbiAgICAgICAgXCJkYXRhLWludmFsaWRcIjogZGF0YUF0dHIocHJvcChcImludmFsaWRcIikpLFxuICAgICAgICBcImRhdGEtcmVhZG9ubHlcIjogZGF0YUF0dHIocHJvcChcInJlYWRPbmx5XCIpKSxcbiAgICAgICAgcmVhZE9ubHk6IHByb3AoXCJyZWFkT25seVwiKSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBnZXRDaGFubmVsVmFsdWUodmFsdWUsIGNoYW5uZWwpLFxuICAgICAgICBtaW46IGNoYW5uZWxSYW5nZT8ubWluVmFsdWUsXG4gICAgICAgIG1heDogY2hhbm5lbFJhbmdlPy5tYXhWYWx1ZSxcbiAgICAgICAgc3RlcDogY2hhbm5lbFJhbmdlPy5zdGVwLFxuICAgICAgICBvbkJlZm9yZUlucHV0KGV2ZW50KSB7XG4gICAgICAgICAgaWYgKGlzVGV4dEZpZWxkIHx8ICFpbnRlcmFjdGl2ZSkgcmV0dXJuO1xuICAgICAgICAgIGNvbnN0IHZhbHVlMiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWU7XG4gICAgICAgICAgaWYgKHZhbHVlMi5tYXRjaCgvW14wLTkuXS9nKSkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uRm9jdXMoZXZlbnQpIHtcbiAgICAgICAgICBpZiAoIWludGVyYWN0aXZlKSByZXR1cm47XG4gICAgICAgICAgc2VuZCh7IHR5cGU6IFwiQ0hBTk5FTF9JTlBVVC5GT0NVU1wiLCBjaGFubmVsIH0pO1xuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuc2VsZWN0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uQmx1cihldmVudCkge1xuICAgICAgICAgIGlmICghaW50ZXJhY3RpdmUpIHJldHVybjtcbiAgICAgICAgICBjb25zdCB2YWx1ZTIgPSBpc1RleHRGaWVsZCA/IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUgOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlQXNOdW1iZXI7XG4gICAgICAgICAgc2VuZCh7IHR5cGU6IFwiQ0hBTk5FTF9JTlBVVC5CTFVSXCIsIGNoYW5uZWwsIHZhbHVlOiB2YWx1ZTIsIGlzVGV4dEZpZWxkIH0pO1xuICAgICAgICB9LFxuICAgICAgICBvbktleURvd24oZXZlbnQpIHtcbiAgICAgICAgICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuICAgICAgICAgIGlmICghaW50ZXJhY3RpdmUpIHJldHVybjtcbiAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlMiA9IGlzVGV4dEZpZWxkID8gZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSA6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVBc051bWJlcjtcbiAgICAgICAgICAgIHNlbmQoeyB0eXBlOiBcIkNIQU5ORUxfSU5QVVQuQ0hBTkdFXCIsIGNoYW5uZWwsIHZhbHVlOiB2YWx1ZTIsIGlzVGV4dEZpZWxkIH0pO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgYXBwZWFyYW5jZTogXCJub25lXCIsXG4gICAgICAgICAgV2Via2l0QXBwZWFyYW5jZTogXCJub25lXCIsXG4gICAgICAgICAgTW96QXBwZWFyYW5jZTogXCJ0ZXh0ZmllbGRcIlxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldEhpZGRlbklucHV0UHJvcHMoKSB7XG4gICAgICByZXR1cm4gbm9ybWFsaXplLmlucHV0KHtcbiAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgIGRpc2FibGVkLFxuICAgICAgICBuYW1lOiBwcm9wKFwibmFtZVwiKSxcbiAgICAgICAgdGFiSW5kZXg6IC0xLFxuICAgICAgICByZWFkT25seTogcHJvcChcInJlYWRPbmx5XCIpLFxuICAgICAgICByZXF1aXJlZDogcHJvcChcInJlcXVpcmVkXCIpLFxuICAgICAgICBpZDogZ2V0SGlkZGVuSW5wdXRJZChzY29wZSksXG4gICAgICAgIHN0eWxlOiB2aXN1YWxseUhpZGRlblN0eWxlLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IHZhbHVlQXNTdHJpbmdcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0RXllRHJvcHBlclRyaWdnZXJQcm9wcygpIHtcbiAgICAgIHJldHVybiBub3JtYWxpemUuYnV0dG9uKHtcbiAgICAgICAgLi4ucGFydHMuZXllRHJvcHBlclRyaWdnZXIuYXR0cnMsXG4gICAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgICAgIGRpcjogcHJvcChcImRpclwiKSxcbiAgICAgICAgZGlzYWJsZWQsXG4gICAgICAgIFwiZGF0YS1kaXNhYmxlZFwiOiBkYXRhQXR0cihkaXNhYmxlZCksXG4gICAgICAgIFwiZGF0YS1pbnZhbGlkXCI6IGRhdGFBdHRyKHByb3AoXCJpbnZhbGlkXCIpKSxcbiAgICAgICAgXCJkYXRhLXJlYWRvbmx5XCI6IGRhdGFBdHRyKHByb3AoXCJyZWFkT25seVwiKSksXG4gICAgICAgIFwiYXJpYS1sYWJlbFwiOiBcIlBpY2sgYSBjb2xvciBmcm9tIHRoZSBzY3JlZW5cIixcbiAgICAgICAgb25DbGljaygpIHtcbiAgICAgICAgICBpZiAoIWludGVyYWN0aXZlKSByZXR1cm47XG4gICAgICAgICAgc2VuZCh7IHR5cGU6IFwiRVlFRFJPUFBFUi5DTElDS1wiIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldFN3YXRjaEdyb3VwUHJvcHMoKSB7XG4gICAgICByZXR1cm4gbm9ybWFsaXplLmVsZW1lbnQoe1xuICAgICAgICAuLi5wYXJ0cy5zd2F0Y2hHcm91cC5hdHRycyxcbiAgICAgICAgcm9sZTogXCJncm91cFwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldFN3YXRjaFRyaWdnZXJTdGF0ZSxcbiAgICBnZXRTd2F0Y2hUcmlnZ2VyUHJvcHMocHJvcHMyKSB7XG4gICAgICBjb25zdCBzd2F0Y2hTdGF0ZSA9IGdldFN3YXRjaFRyaWdnZXJTdGF0ZShwcm9wczIpO1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZS5idXR0b24oe1xuICAgICAgICAuLi5wYXJ0cy5zd2F0Y2hUcmlnZ2VyLmF0dHJzLFxuICAgICAgICBkaXNhYmxlZDogc3dhdGNoU3RhdGUuZGlzYWJsZWQsXG4gICAgICAgIGRpcjogcHJvcChcImRpclwiKSxcbiAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgXCJhcmlhLWxhYmVsXCI6IGBzZWxlY3QgJHtzd2F0Y2hTdGF0ZS52YWx1ZUFzU3RyaW5nfSBhcyB0aGUgY29sb3JgLFxuICAgICAgICBcImRhdGEtc3RhdGVcIjogc3dhdGNoU3RhdGUuY2hlY2tlZCA/IFwiY2hlY2tlZFwiIDogXCJ1bmNoZWNrZWRcIixcbiAgICAgICAgXCJkYXRhLXZhbHVlXCI6IHN3YXRjaFN0YXRlLnZhbHVlQXNTdHJpbmcsXG4gICAgICAgIFwiZGF0YS1kaXNhYmxlZFwiOiBkYXRhQXR0cihzd2F0Y2hTdGF0ZS5kaXNhYmxlZCksXG4gICAgICAgIG9uQ2xpY2soKSB7XG4gICAgICAgICAgaWYgKHN3YXRjaFN0YXRlLmRpc2FibGVkKSByZXR1cm47XG4gICAgICAgICAgc2VuZCh7IHR5cGU6IFwiU1dBVENIX1RSSUdHRVIuQ0xJQ0tcIiwgdmFsdWU6IHN3YXRjaFN0YXRlLnZhbHVlIH0pO1xuICAgICAgICB9LFxuICAgICAgICBzdHlsZToge1xuICAgICAgICAgIFwiLS1jb2xvclwiOiBzd2F0Y2hTdGF0ZS52YWx1ZUFzU3RyaW5nLFxuICAgICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCJcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRTd2F0Y2hJbmRpY2F0b3JQcm9wcyhwcm9wczIpIHtcbiAgICAgIGNvbnN0IHN3YXRjaFN0YXRlID0gZ2V0U3dhdGNoVHJpZ2dlclN0YXRlKHByb3BzMik7XG4gICAgICByZXR1cm4gbm9ybWFsaXplLmVsZW1lbnQoe1xuICAgICAgICAuLi5wYXJ0cy5zd2F0Y2hJbmRpY2F0b3IuYXR0cnMsXG4gICAgICAgIGRpcjogcHJvcChcImRpclwiKSxcbiAgICAgICAgaGlkZGVuOiAhc3dhdGNoU3RhdGUuY2hlY2tlZFxuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRTd2F0Y2hQcm9wcyhwcm9wczIpIHtcbiAgICAgIGNvbnN0IHsgcmVzcGVjdEFscGhhID0gdHJ1ZSB9ID0gcHJvcHMyO1xuICAgICAgY29uc3Qgc3dhdGNoU3RhdGUgPSBnZXRTd2F0Y2hUcmlnZ2VyU3RhdGUocHJvcHMyKTtcbiAgICAgIGNvbnN0IGNvbG9yID0gc3dhdGNoU3RhdGUudmFsdWUudG9TdHJpbmcocmVzcGVjdEFscGhhID8gXCJjc3NcIiA6IFwiaGV4XCIpO1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZS5lbGVtZW50KHtcbiAgICAgICAgLi4ucGFydHMuc3dhdGNoLmF0dHJzLFxuICAgICAgICBkaXI6IHByb3AoXCJkaXJcIiksXG4gICAgICAgIFwiZGF0YS1zdGF0ZVwiOiBzd2F0Y2hTdGF0ZS5jaGVja2VkID8gXCJjaGVja2VkXCIgOiBcInVuY2hlY2tlZFwiLFxuICAgICAgICBcImRhdGEtdmFsdWVcIjogc3dhdGNoU3RhdGUudmFsdWVBc1N0cmluZyxcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICBcIi0tY29sb3JcIjogY29sb3IsXG4gICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgICBiYWNrZ3JvdW5kOiBjb2xvclxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldEZvcm1hdFRyaWdnZXJQcm9wcygpIHtcbiAgICAgIHJldHVybiBub3JtYWxpemUuYnV0dG9uKHtcbiAgICAgICAgLi4ucGFydHMuZm9ybWF0VHJpZ2dlci5hdHRycyxcbiAgICAgICAgZGlyOiBwcm9wKFwiZGlyXCIpLFxuICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICBcImFyaWEtbGFiZWxcIjogYGNoYW5nZSBjb2xvciBmb3JtYXQgdG8gJHtnZXROZXh0Rm9ybWF0KGZvcm1hdCl9YCxcbiAgICAgICAgb25DbGljayhldmVudCkge1xuICAgICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRpc2FibGVkKSByZXR1cm47XG4gICAgICAgICAgY29uc3QgbmV4dEZvcm1hdCA9IGdldE5leHRGb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgICBzZW5kKHsgdHlwZTogXCJGT1JNQVQuU0VUXCIsIGZvcm1hdDogbmV4dEZvcm1hdCwgc3JjOiBcImZvcm1hdC10cmlnZ2VyXCIgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0Rm9ybWF0U2VsZWN0UHJvcHMoKSB7XG4gICAgICByZXR1cm4gbm9ybWFsaXplLnNlbGVjdCh7XG4gICAgICAgIC4uLnBhcnRzLmZvcm1hdFNlbGVjdC5hdHRycyxcbiAgICAgICAgXCJhcmlhLWxhYmVsXCI6IFwiY2hhbmdlIGNvbG9yIGZvcm1hdFwiLFxuICAgICAgICBkaXI6IHByb3AoXCJkaXJcIiksXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogcHJvcChcImZvcm1hdFwiKSxcbiAgICAgICAgZGlzYWJsZWQsXG4gICAgICAgIG9uQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgICAgY29uc3QgZm9ybWF0MiA9IGFzc2VydEZvcm1hdChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICBzZW5kKHsgdHlwZTogXCJGT1JNQVQuU0VUXCIsIGZvcm1hdDogZm9ybWF0Miwgc3JjOiBcImZvcm1hdC1zZWxlY3RcIiB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxudmFyIGZvcm1hdHMgPSBbXCJoc2JhXCIsIFwiaHNsYVwiLCBcInJnYmFcIl07XG52YXIgZm9ybWF0UmVnZXggPSBuZXcgUmVnRXhwKGBeKCR7Zm9ybWF0cy5qb2luKFwifFwiKX0pJGApO1xuZnVuY3Rpb24gZ2V0TmV4dEZvcm1hdChmb3JtYXQpIHtcbiAgY29uc3QgaW5kZXggPSBmb3JtYXRzLmluZGV4T2YoZm9ybWF0KTtcbiAgcmV0dXJuIGZvcm1hdHNbaW5kZXggKyAxXSA/PyBmb3JtYXRzWzBdO1xufVxuZnVuY3Rpb24gYXNzZXJ0Rm9ybWF0KGZvcm1hdCkge1xuICBpZiAoZm9ybWF0UmVnZXgudGVzdChmb3JtYXQpKSByZXR1cm4gZm9ybWF0O1xuICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGNvbG9yIGZvcm1hdDogJHtmb3JtYXR9YCk7XG59XG52YXIgcGFyc2UgPSAoY29sb3JTdHJpbmcpID0+IHtcbiAgcmV0dXJuIHBhcnNlQ29sb3IoY29sb3JTdHJpbmcpO1xufTtcblxuLy8gc3JjL2NvbG9yLXBpY2tlci5tYWNoaW5lLnRzXG52YXIgeyBhbmQgfSA9IGNyZWF0ZUd1YXJkcygpO1xudmFyIG1hY2hpbmUgPSBjcmVhdGVNYWNoaW5lKHtcbiAgcHJvcHMoeyBwcm9wczogcHJvcHMyIH0pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGlyOiBcImx0clwiLFxuICAgICAgZGVmYXVsdFZhbHVlOiBwYXJzZShcIiMwMDAwMDBcIiksXG4gICAgICBkZWZhdWx0Rm9ybWF0OiBcInJnYmFcIixcbiAgICAgIG9wZW5BdXRvRm9jdXM6IHRydWUsXG4gICAgICAuLi5wcm9wczIsXG4gICAgICBwb3NpdGlvbmluZzoge1xuICAgICAgICBwbGFjZW1lbnQ6IFwiYm90dG9tXCIsXG4gICAgICAgIC4uLnByb3BzMi5wb3NpdGlvbmluZ1xuICAgICAgfVxuICAgIH07XG4gIH0sXG4gIGluaXRpYWxTdGF0ZSh7IHByb3AgfSkge1xuICAgIGNvbnN0IG9wZW4gPSBwcm9wKFwib3BlblwiKSB8fCBwcm9wKFwiZGVmYXVsdE9wZW5cIik7XG4gICAgcmV0dXJuIG9wZW4gPyBcIm9wZW5cIiA6IFwiaWRsZVwiO1xuICB9LFxuICBjb250ZXh0KHsgcHJvcCwgYmluZGFibGUsIGdldENvbnRleHQgfSkge1xuICAgIHJldHVybiB7XG4gICAgICB2YWx1ZTogYmluZGFibGUoKCkgPT4gKHtcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBwcm9wKFwiZGVmYXVsdFZhbHVlXCIpLFxuICAgICAgICB2YWx1ZTogcHJvcChcInZhbHVlXCIpLFxuICAgICAgICBpc0VxdWFsKGEsIGIpIHtcbiAgICAgICAgICByZXR1cm4gYS50b1N0cmluZyhcImNzc1wiKSA9PT0gYj8udG9TdHJpbmcoXCJjc3NcIik7XG4gICAgICAgIH0sXG4gICAgICAgIGhhc2goYSkge1xuICAgICAgICAgIHJldHVybiBhLnRvU3RyaW5nKFwiY3NzXCIpO1xuICAgICAgICB9LFxuICAgICAgICBvbkNoYW5nZSh2YWx1ZSkge1xuICAgICAgICAgIGNvbnN0IGN0eCA9IGdldENvbnRleHQoKTtcbiAgICAgICAgICBjb25zdCB2YWx1ZUFzU3RyaW5nID0gdmFsdWUudG9TdHJpbmcoY3R4LmdldChcImZvcm1hdFwiKSk7XG4gICAgICAgICAgcHJvcChcIm9uVmFsdWVDaGFuZ2VcIik/Lih7IHZhbHVlLCB2YWx1ZUFzU3RyaW5nIH0pO1xuICAgICAgICB9XG4gICAgICB9KSksXG4gICAgICBmb3JtYXQ6IGJpbmRhYmxlKCgpID0+ICh7XG4gICAgICAgIGRlZmF1bHRWYWx1ZTogcHJvcChcImRlZmF1bHRGb3JtYXRcIiksXG4gICAgICAgIHZhbHVlOiBwcm9wKFwiZm9ybWF0XCIpLFxuICAgICAgICBvbkNoYW5nZShmb3JtYXQpIHtcbiAgICAgICAgICBwcm9wKFwib25Gb3JtYXRDaGFuZ2VcIik/Lih7IGZvcm1hdCB9KTtcbiAgICAgICAgfVxuICAgICAgfSkpLFxuICAgICAgYWN0aXZlSWQ6IGJpbmRhYmxlKCgpID0+ICh7IGRlZmF1bHRWYWx1ZTogbnVsbCB9KSksXG4gICAgICBhY3RpdmVDaGFubmVsOiBiaW5kYWJsZSgoKSA9PiAoeyBkZWZhdWx0VmFsdWU6IG51bGwgfSkpLFxuICAgICAgYWN0aXZlT3JpZW50YXRpb246IGJpbmRhYmxlKCgpID0+ICh7IGRlZmF1bHRWYWx1ZTogbnVsbCB9KSksXG4gICAgICBmaWVsZHNldERpc2FibGVkOiBiaW5kYWJsZSgoKSA9PiAoeyBkZWZhdWx0VmFsdWU6IGZhbHNlIH0pKSxcbiAgICAgIHJlc3RvcmVGb2N1czogYmluZGFibGUoKCkgPT4gKHsgZGVmYXVsdFZhbHVlOiB0cnVlIH0pKSxcbiAgICAgIGN1cnJlbnRQbGFjZW1lbnQ6IGJpbmRhYmxlKCgpID0+ICh7XG4gICAgICAgIGRlZmF1bHRWYWx1ZTogdm9pZCAwXG4gICAgICB9KSlcbiAgICB9O1xuICB9LFxuICBjb21wdXRlZDoge1xuICAgIHJ0bDogKHsgcHJvcCB9KSA9PiBwcm9wKFwiZGlyXCIpID09PSBcInJ0bFwiLFxuICAgIGRpc2FibGVkOiAoeyBwcm9wLCBjb250ZXh0IH0pID0+ICEhcHJvcChcImRpc2FibGVkXCIpIHx8IGNvbnRleHQuZ2V0KFwiZmllbGRzZXREaXNhYmxlZFwiKSxcbiAgICBpbnRlcmFjdGl2ZTogKHsgcHJvcCB9KSA9PiAhKHByb3AoXCJkaXNhYmxlZFwiKSB8fCBwcm9wKFwicmVhZE9ubHlcIikpLFxuICAgIHZhbHVlQXNTdHJpbmc6ICh7IGNvbnRleHQgfSkgPT4gY29udGV4dC5nZXQoXCJ2YWx1ZVwiKS50b1N0cmluZyhjb250ZXh0LmdldChcImZvcm1hdFwiKSksXG4gICAgYXJlYVZhbHVlOiAoeyBjb250ZXh0IH0pID0+IHtcbiAgICAgIGNvbnN0IGZvcm1hdCA9IGNvbnRleHQuZ2V0KFwiZm9ybWF0XCIpLnN0YXJ0c1dpdGgoXCJoc2xcIikgPyBcImhzbGFcIiA6IFwiaHNiYVwiO1xuICAgICAgcmV0dXJuIGNvbnRleHQuZ2V0KFwidmFsdWVcIikudG9Gb3JtYXQoZm9ybWF0KTtcbiAgICB9XG4gIH0sXG4gIGVmZmVjdHM6IFtcInRyYWNrRm9ybUNvbnRyb2xcIl0sXG4gIHdhdGNoKHsgcHJvcCwgY29udGV4dCwgYWN0aW9uLCB0cmFjayB9KSB7XG4gICAgdHJhY2soWygpID0+IGNvbnRleHQuaGFzaChcInZhbHVlXCIpXSwgKCkgPT4ge1xuICAgICAgYWN0aW9uKFtcInN5bmNJbnB1dEVsZW1lbnRzXCIsIFwiZGlzcGF0Y2hDaGFuZ2VFdmVudFwiXSk7XG4gICAgfSk7XG4gICAgdHJhY2soWygpID0+IGNvbnRleHQuZ2V0KFwiZm9ybWF0XCIpXSwgKCkgPT4ge1xuICAgICAgYWN0aW9uKFtcInN5bmNGb3JtYXRTZWxlY3RFbGVtZW50XCJdKTtcbiAgICB9KTtcbiAgICB0cmFjayhbKCkgPT4gcHJvcChcIm9wZW5cIildLCAoKSA9PiB7XG4gICAgICBhY3Rpb24oW1widG9nZ2xlVmlzaWJpbGl0eVwiXSk7XG4gICAgfSk7XG4gIH0sXG4gIG9uOiB7XG4gICAgXCJWQUxVRS5TRVRcIjoge1xuICAgICAgYWN0aW9uczogW1wic2V0VmFsdWVcIl1cbiAgICB9LFxuICAgIFwiRk9STUFULlNFVFwiOiB7XG4gICAgICBhY3Rpb25zOiBbXCJzZXRGb3JtYXRcIl1cbiAgICB9LFxuICAgIFwiQ0hBTk5FTF9JTlBVVC5DSEFOR0VcIjoge1xuICAgICAgYWN0aW9uczogW1wic2V0Q2hhbm5lbENvbG9yRnJvbUlucHV0XCJdXG4gICAgfSxcbiAgICBcIkVZRURST1BQRVIuQ0xJQ0tcIjoge1xuICAgICAgYWN0aW9uczogW1wib3BlbkV5ZURyb3BwZXJcIl1cbiAgICB9LFxuICAgIFwiU1dBVENIX1RSSUdHRVIuQ0xJQ0tcIjoge1xuICAgICAgYWN0aW9uczogW1wic2V0VmFsdWVcIl1cbiAgICB9XG4gIH0sXG4gIHN0YXRlczoge1xuICAgIGlkbGU6IHtcbiAgICAgIHRhZ3M6IFtcImNsb3NlZFwiXSxcbiAgICAgIG9uOiB7XG4gICAgICAgIFwiQ09OVFJPTExFRC5PUEVOXCI6IHtcbiAgICAgICAgICB0YXJnZXQ6IFwib3BlblwiLFxuICAgICAgICAgIGFjdGlvbnM6IFtcInNldEluaXRpYWxGb2N1c1wiXVxuICAgICAgICB9LFxuICAgICAgICBPUEVOOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgZ3VhcmQ6IFwiaXNPcGVuQ29udHJvbGxlZFwiLFxuICAgICAgICAgICAgYWN0aW9uczogW1wiaW52b2tlT25PcGVuXCJdXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0YXJnZXQ6IFwib3BlblwiLFxuICAgICAgICAgICAgYWN0aW9uczogW1wiaW52b2tlT25PcGVuXCIsIFwic2V0SW5pdGlhbEZvY3VzXCJdXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBcIlRSSUdHRVIuQ0xJQ0tcIjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGd1YXJkOiBcImlzT3BlbkNvbnRyb2xsZWRcIixcbiAgICAgICAgICAgIGFjdGlvbnM6IFtcImludm9rZU9uT3BlblwiXVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGFyZ2V0OiBcIm9wZW5cIixcbiAgICAgICAgICAgIGFjdGlvbnM6IFtcImludm9rZU9uT3BlblwiLCBcInNldEluaXRpYWxGb2N1c1wiXVxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgXCJDSEFOTkVMX0lOUFVULkZPQ1VTXCI6IHtcbiAgICAgICAgICB0YXJnZXQ6IFwiZm9jdXNlZFwiLFxuICAgICAgICAgIGFjdGlvbnM6IFtcInNldEFjdGl2ZUNoYW5uZWxcIl1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgZm9jdXNlZDoge1xuICAgICAgdGFnczogW1wiY2xvc2VkXCIsIFwiZm9jdXNlZFwiXSxcbiAgICAgIG9uOiB7XG4gICAgICAgIFwiQ09OVFJPTExFRC5PUEVOXCI6IHtcbiAgICAgICAgICB0YXJnZXQ6IFwib3BlblwiLFxuICAgICAgICAgIGFjdGlvbnM6IFtcInNldEluaXRpYWxGb2N1c1wiXVxuICAgICAgICB9LFxuICAgICAgICBPUEVOOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgZ3VhcmQ6IFwiaXNPcGVuQ29udHJvbGxlZFwiLFxuICAgICAgICAgICAgYWN0aW9uczogW1wiaW52b2tlT25PcGVuXCJdXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0YXJnZXQ6IFwib3BlblwiLFxuICAgICAgICAgICAgYWN0aW9uczogW1wiaW52b2tlT25PcGVuXCIsIFwic2V0SW5pdGlhbEZvY3VzXCJdXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBcIlRSSUdHRVIuQ0xJQ0tcIjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGd1YXJkOiBcImlzT3BlbkNvbnRyb2xsZWRcIixcbiAgICAgICAgICAgIGFjdGlvbnM6IFtcImludm9rZU9uT3BlblwiXVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGFyZ2V0OiBcIm9wZW5cIixcbiAgICAgICAgICAgIGFjdGlvbnM6IFtcImludm9rZU9uT3BlblwiLCBcInNldEluaXRpYWxGb2N1c1wiXVxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgXCJDSEFOTkVMX0lOUFVULkZPQ1VTXCI6IHtcbiAgICAgICAgICBhY3Rpb25zOiBbXCJzZXRBY3RpdmVDaGFubmVsXCJdXG4gICAgICAgIH0sXG4gICAgICAgIFwiQ0hBTk5FTF9JTlBVVC5CTFVSXCI6IHtcbiAgICAgICAgICB0YXJnZXQ6IFwiaWRsZVwiLFxuICAgICAgICAgIGFjdGlvbnM6IFtcInNldENoYW5uZWxDb2xvckZyb21JbnB1dFwiXVxuICAgICAgICB9LFxuICAgICAgICBcIlRSSUdHRVIuQkxVUlwiOiB7XG4gICAgICAgICAgdGFyZ2V0OiBcImlkbGVcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBvcGVuOiB7XG4gICAgICB0YWdzOiBbXCJvcGVuXCJdLFxuICAgICAgZWZmZWN0czogW1widHJhY2tQb3NpdGlvbmluZ1wiLCBcInRyYWNrRGlzbWlzc2FibGVFbGVtZW50XCJdLFxuICAgICAgb246IHtcbiAgICAgICAgXCJDT05UUk9MTEVELkNMT1NFXCI6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogXCJzaG91bGRSZXN0b3JlRm9jdXNcIixcbiAgICAgICAgICAgIHRhcmdldDogXCJmb2N1c2VkXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiBbXCJzZXRSZXR1cm5Gb2N1c1wiXVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGFyZ2V0OiBcImlkbGVcIlxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgXCJUUklHR0VSLkNMSUNLXCI6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogXCJpc09wZW5Db250cm9sbGVkXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiBbXCJpbnZva2VPbkNsb3NlXCJdXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0YXJnZXQ6IFwiaWRsZVwiLFxuICAgICAgICAgICAgYWN0aW9uczogW1wiaW52b2tlT25DbG9zZVwiXVxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgXCJBUkVBLlBPSU5URVJfRE9XTlwiOiB7XG4gICAgICAgICAgdGFyZ2V0OiBcIm9wZW46ZHJhZ2dpbmdcIixcbiAgICAgICAgICBhY3Rpb25zOiBbXCJzZXRBY3RpdmVDaGFubmVsXCIsIFwic2V0QXJlYUNvbG9yRnJvbVBvaW50XCIsIFwiZm9jdXNBcmVhVGh1bWJcIl1cbiAgICAgICAgfSxcbiAgICAgICAgXCJBUkVBLkZPQ1VTXCI6IHtcbiAgICAgICAgICBhY3Rpb25zOiBbXCJzZXRBY3RpdmVDaGFubmVsXCJdXG4gICAgICAgIH0sXG4gICAgICAgIFwiQ0hBTk5FTF9TTElERVIuUE9JTlRFUl9ET1dOXCI6IHtcbiAgICAgICAgICB0YXJnZXQ6IFwib3BlbjpkcmFnZ2luZ1wiLFxuICAgICAgICAgIGFjdGlvbnM6IFtcInNldEFjdGl2ZUNoYW5uZWxcIiwgXCJzZXRDaGFubmVsQ29sb3JGcm9tUG9pbnRcIiwgXCJmb2N1c0NoYW5uZWxUaHVtYlwiXVxuICAgICAgICB9LFxuICAgICAgICBcIkNIQU5ORUxfU0xJREVSLkZPQ1VTXCI6IHtcbiAgICAgICAgICBhY3Rpb25zOiBbXCJzZXRBY3RpdmVDaGFubmVsXCJdXG4gICAgICAgIH0sXG4gICAgICAgIFwiQVJFQS5BUlJPV19MRUZUXCI6IHtcbiAgICAgICAgICBhY3Rpb25zOiBbXCJkZWNyZW1lbnRBcmVhWENoYW5uZWxcIl1cbiAgICAgICAgfSxcbiAgICAgICAgXCJBUkVBLkFSUk9XX1JJR0hUXCI6IHtcbiAgICAgICAgICBhY3Rpb25zOiBbXCJpbmNyZW1lbnRBcmVhWENoYW5uZWxcIl1cbiAgICAgICAgfSxcbiAgICAgICAgXCJBUkVBLkFSUk9XX1VQXCI6IHtcbiAgICAgICAgICBhY3Rpb25zOiBbXCJpbmNyZW1lbnRBcmVhWUNoYW5uZWxcIl1cbiAgICAgICAgfSxcbiAgICAgICAgXCJBUkVBLkFSUk9XX0RPV05cIjoge1xuICAgICAgICAgIGFjdGlvbnM6IFtcImRlY3JlbWVudEFyZWFZQ2hhbm5lbFwiXVxuICAgICAgICB9LFxuICAgICAgICBcIkFSRUEuUEFHRV9VUFwiOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wiaW5jcmVtZW50QXJlYVhDaGFubmVsXCJdXG4gICAgICAgIH0sXG4gICAgICAgIFwiQVJFQS5QQUdFX0RPV05cIjoge1xuICAgICAgICAgIGFjdGlvbnM6IFtcImRlY3JlbWVudEFyZWFYQ2hhbm5lbFwiXVxuICAgICAgICB9LFxuICAgICAgICBcIkNIQU5ORUxfU0xJREVSLkFSUk9XX0xFRlRcIjoge1xuICAgICAgICAgIGFjdGlvbnM6IFtcImRlY3JlbWVudENoYW5uZWxcIl1cbiAgICAgICAgfSxcbiAgICAgICAgXCJDSEFOTkVMX1NMSURFUi5BUlJPV19SSUdIVFwiOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wiaW5jcmVtZW50Q2hhbm5lbFwiXVxuICAgICAgICB9LFxuICAgICAgICBcIkNIQU5ORUxfU0xJREVSLkFSUk9XX1VQXCI6IHtcbiAgICAgICAgICBhY3Rpb25zOiBbXCJpbmNyZW1lbnRDaGFubmVsXCJdXG4gICAgICAgIH0sXG4gICAgICAgIFwiQ0hBTk5FTF9TTElERVIuQVJST1dfRE9XTlwiOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wiZGVjcmVtZW50Q2hhbm5lbFwiXVxuICAgICAgICB9LFxuICAgICAgICBcIkNIQU5ORUxfU0xJREVSLlBBR0VfVVBcIjoge1xuICAgICAgICAgIGFjdGlvbnM6IFtcImluY3JlbWVudENoYW5uZWxcIl1cbiAgICAgICAgfSxcbiAgICAgICAgXCJDSEFOTkVMX1NMSURFUi5QQUdFX0RPV05cIjoge1xuICAgICAgICAgIGFjdGlvbnM6IFtcImRlY3JlbWVudENoYW5uZWxcIl1cbiAgICAgICAgfSxcbiAgICAgICAgXCJDSEFOTkVMX1NMSURFUi5IT01FXCI6IHtcbiAgICAgICAgICBhY3Rpb25zOiBbXCJzZXRDaGFubmVsVG9NaW5cIl1cbiAgICAgICAgfSxcbiAgICAgICAgXCJDSEFOTkVMX1NMSURFUi5FTkRcIjoge1xuICAgICAgICAgIGFjdGlvbnM6IFtcInNldENoYW5uZWxUb01heFwiXVxuICAgICAgICB9LFxuICAgICAgICBcIkNIQU5ORUxfSU5QVVQuQkxVUlwiOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wic2V0Q2hhbm5lbENvbG9yRnJvbUlucHV0XCJdXG4gICAgICAgIH0sXG4gICAgICAgIElOVEVSQUNUX09VVFNJREU6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogXCJpc09wZW5Db250cm9sbGVkXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiBbXCJpbnZva2VPbkNsb3NlXCJdXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogXCJzaG91bGRSZXN0b3JlRm9jdXNcIixcbiAgICAgICAgICAgIHRhcmdldDogXCJmb2N1c2VkXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiBbXCJpbnZva2VPbkNsb3NlXCIsIFwic2V0UmV0dXJuRm9jdXNcIl1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRhcmdldDogXCJpZGxlXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiBbXCJpbnZva2VPbkNsb3NlXCJdXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBDTE9TRTogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGd1YXJkOiBcImlzT3BlbkNvbnRyb2xsZWRcIixcbiAgICAgICAgICAgIGFjdGlvbnM6IFtcImludm9rZU9uQ2xvc2VcIl1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRhcmdldDogXCJpZGxlXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiBbXCJpbnZva2VPbkNsb3NlXCJdXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBcIlNXQVRDSF9UUklHR0VSLkNMSUNLXCI6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogYW5kKFwiaXNPcGVuQ29udHJvbGxlZFwiLCBcImNsb3NlT25TZWxlY3RcIiksXG4gICAgICAgICAgICBhY3Rpb25zOiBbXCJzZXRWYWx1ZVwiLCBcImludm9rZU9uQ2xvc2VcIl1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGd1YXJkOiBcImNsb3NlT25TZWxlY3RcIixcbiAgICAgICAgICAgIHRhcmdldDogXCJmb2N1c2VkXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiBbXCJzZXRWYWx1ZVwiLCBcImludm9rZU9uQ2xvc2VcIiwgXCJzZXRSZXR1cm5Gb2N1c1wiXVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgYWN0aW9uczogW1wic2V0VmFsdWVcIl1cbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH1cbiAgICB9LFxuICAgIFwib3BlbjpkcmFnZ2luZ1wiOiB7XG4gICAgICB0YWdzOiBbXCJvcGVuXCJdLFxuICAgICAgZXhpdDogW1wiY2xlYXJBY3RpdmVDaGFubmVsXCJdLFxuICAgICAgZWZmZWN0czogW1widHJhY2tQb2ludGVyTW92ZVwiLCBcImRpc2FibGVUZXh0U2VsZWN0aW9uXCIsIFwidHJhY2tQb3NpdGlvbmluZ1wiLCBcInRyYWNrRGlzbWlzc2FibGVFbGVtZW50XCJdLFxuICAgICAgb246IHtcbiAgICAgICAgXCJDT05UUk9MTEVELkNMT1NFXCI6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogXCJzaG91bGRSZXN0b3JlRm9jdXNcIixcbiAgICAgICAgICAgIHRhcmdldDogXCJmb2N1c2VkXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiBbXCJzZXRSZXR1cm5Gb2N1c1wiXVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGFyZ2V0OiBcImlkbGVcIlxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgXCJBUkVBLlBPSU5URVJfTU9WRVwiOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wic2V0QXJlYUNvbG9yRnJvbVBvaW50XCIsIFwiZm9jdXNBcmVhVGh1bWJcIl1cbiAgICAgICAgfSxcbiAgICAgICAgXCJBUkVBLlBPSU5URVJfVVBcIjoge1xuICAgICAgICAgIHRhcmdldDogXCJvcGVuXCIsXG4gICAgICAgICAgYWN0aW9uczogW1wiaW52b2tlT25DaGFuZ2VFbmRcIl1cbiAgICAgICAgfSxcbiAgICAgICAgXCJDSEFOTkVMX1NMSURFUi5QT0lOVEVSX01PVkVcIjoge1xuICAgICAgICAgIGFjdGlvbnM6IFtcInNldENoYW5uZWxDb2xvckZyb21Qb2ludFwiLCBcImZvY3VzQ2hhbm5lbFRodW1iXCJdXG4gICAgICAgIH0sXG4gICAgICAgIFwiQ0hBTk5FTF9TTElERVIuUE9JTlRFUl9VUFwiOiB7XG4gICAgICAgICAgdGFyZ2V0OiBcIm9wZW5cIixcbiAgICAgICAgICBhY3Rpb25zOiBbXCJpbnZva2VPbkNoYW5nZUVuZFwiXVxuICAgICAgICB9LFxuICAgICAgICBJTlRFUkFDVF9PVVRTSURFOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgZ3VhcmQ6IFwiaXNPcGVuQ29udHJvbGxlZFwiLFxuICAgICAgICAgICAgYWN0aW9uczogW1wiaW52b2tlT25DbG9zZVwiXVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZ3VhcmQ6IFwic2hvdWxkUmVzdG9yZUZvY3VzXCIsXG4gICAgICAgICAgICB0YXJnZXQ6IFwiZm9jdXNlZFwiLFxuICAgICAgICAgICAgYWN0aW9uczogW1wiaW52b2tlT25DbG9zZVwiLCBcInNldFJldHVybkZvY3VzXCJdXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0YXJnZXQ6IFwiaWRsZVwiLFxuICAgICAgICAgICAgYWN0aW9uczogW1wiaW52b2tlT25DbG9zZVwiXVxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgQ0xPU0U6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogXCJpc09wZW5Db250cm9sbGVkXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiBbXCJpbnZva2VPbkNsb3NlXCJdXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0YXJnZXQ6IFwiaWRsZVwiLFxuICAgICAgICAgICAgYWN0aW9uczogW1wiaW52b2tlT25DbG9zZVwiXVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgaW1wbGVtZW50YXRpb25zOiB7XG4gICAgZ3VhcmRzOiB7XG4gICAgICBjbG9zZU9uU2VsZWN0OiAoeyBwcm9wIH0pID0+ICEhcHJvcChcImNsb3NlT25TZWxlY3RcIiksXG4gICAgICBpc09wZW5Db250cm9sbGVkOiAoeyBwcm9wIH0pID0+IHByb3AoXCJvcGVuXCIpICE9IG51bGwsXG4gICAgICBzaG91bGRSZXN0b3JlRm9jdXM6ICh7IGNvbnRleHQgfSkgPT4gISFjb250ZXh0LmdldChcInJlc3RvcmVGb2N1c1wiKVxuICAgIH0sXG4gICAgZWZmZWN0czoge1xuICAgICAgdHJhY2tQb3NpdGlvbmluZyh7IGNvbnRleHQsIHByb3AsIHNjb3BlIH0pIHtcbiAgICAgICAgaWYgKCFjb250ZXh0LmdldChcImN1cnJlbnRQbGFjZW1lbnRcIikpIHtcbiAgICAgICAgICBjb250ZXh0LnNldChcImN1cnJlbnRQbGFjZW1lbnRcIiwgcHJvcChcInBvc2l0aW9uaW5nXCIpPy5wbGFjZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFuY2hvckVsID0gZ2V0VHJpZ2dlckVsKHNjb3BlKTtcbiAgICAgICAgY29uc3QgZ2V0UG9zaXRpb25lckVsMiA9ICgpID0+IGdldFBvc2l0aW9uZXJFbChzY29wZSk7XG4gICAgICAgIHJldHVybiBnZXRQbGFjZW1lbnQoYW5jaG9yRWwsIGdldFBvc2l0aW9uZXJFbDIsIHtcbiAgICAgICAgICAuLi5wcm9wKFwicG9zaXRpb25pbmdcIiksXG4gICAgICAgICAgZGVmZXI6IHRydWUsXG4gICAgICAgICAgb25Db21wbGV0ZShkYXRhKSB7XG4gICAgICAgICAgICBjb250ZXh0LnNldChcImN1cnJlbnRQbGFjZW1lbnRcIiwgZGF0YS5wbGFjZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgdHJhY2tEaXNtaXNzYWJsZUVsZW1lbnQoeyBjb250ZXh0LCBzY29wZSwgcHJvcCwgc2VuZCB9KSB7XG4gICAgICAgIGNvbnN0IGdldENvbnRlbnRFbDIgPSAoKSA9PiBnZXRDb250ZW50RWwoc2NvcGUpO1xuICAgICAgICByZXR1cm4gdHJhY2tEaXNtaXNzYWJsZUVsZW1lbnQoZ2V0Q29udGVudEVsMiwge1xuICAgICAgICAgIGV4Y2x1ZGU6IGdldFRyaWdnZXJFbChzY29wZSksXG4gICAgICAgICAgZGVmZXI6IHRydWUsXG4gICAgICAgICAgb25JbnRlcmFjdE91dHNpZGUoZXZlbnQpIHtcbiAgICAgICAgICAgIHByb3AoXCJvbkludGVyYWN0T3V0c2lkZVwiKT8uKGV2ZW50KTtcbiAgICAgICAgICAgIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47XG4gICAgICAgICAgICBjb250ZXh0LnNldChcInJlc3RvcmVGb2N1c1wiLCAhKGV2ZW50LmRldGFpbC5mb2N1c2FibGUgfHwgZXZlbnQuZGV0YWlsLmNvbnRleHRtZW51KSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvblBvaW50ZXJEb3duT3V0c2lkZTogcHJvcChcIm9uUG9pbnRlckRvd25PdXRzaWRlXCIpLFxuICAgICAgICAgIG9uRm9jdXNPdXRzaWRlOiBwcm9wKFwib25Gb2N1c091dHNpZGVcIiksXG4gICAgICAgICAgb25EaXNtaXNzKCkge1xuICAgICAgICAgICAgc2VuZCh7IHR5cGU6IFwiSU5URVJBQ1RfT1VUU0lERVwiIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgdHJhY2tGb3JtQ29udHJvbCh7IGNvbnRleHQsIHNjb3BlLCBzZW5kIH0pIHtcbiAgICAgICAgY29uc3QgaW5wdXRFbCA9IGdldEhpZGRlbklucHV0RWwoc2NvcGUpO1xuICAgICAgICByZXR1cm4gdHJhY2tGb3JtQ29udHJvbChpbnB1dEVsLCB7XG4gICAgICAgICAgb25GaWVsZHNldERpc2FibGVkQ2hhbmdlKGRpc2FibGVkKSB7XG4gICAgICAgICAgICBjb250ZXh0LnNldChcImZpZWxkc2V0RGlzYWJsZWRcIiwgZGlzYWJsZWQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25Gb3JtUmVzZXQoKSB7XG4gICAgICAgICAgICBzZW5kKHsgdHlwZTogXCJWQUxVRS5TRVRcIiwgdmFsdWU6IGNvbnRleHQuaW5pdGlhbChcInZhbHVlXCIpLCBzcmM6IFwiZm9ybS5yZXNldFwiIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgdHJhY2tQb2ludGVyTW92ZSh7IGNvbnRleHQsIHNjb3BlLCBldmVudCwgc2VuZCB9KSB7XG4gICAgICAgIHJldHVybiB0cmFja1BvaW50ZXJNb3ZlKHNjb3BlLmdldERvYygpLCB7XG4gICAgICAgICAgb25Qb2ludGVyTW92ZSh7IHBvaW50IH0pIHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBjb250ZXh0LmdldChcImFjdGl2ZUlkXCIpID09PSBcImFyZWFcIiA/IFwiQVJFQS5QT0lOVEVSX01PVkVcIiA6IFwiQ0hBTk5FTF9TTElERVIuUE9JTlRFUl9NT1ZFXCI7XG4gICAgICAgICAgICBzZW5kKHsgdHlwZSwgcG9pbnQsIGZvcm1hdDogZXZlbnQuZm9ybWF0IH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25Qb2ludGVyVXAoKSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gY29udGV4dC5nZXQoXCJhY3RpdmVJZFwiKSA9PT0gXCJhcmVhXCIgPyBcIkFSRUEuUE9JTlRFUl9VUFwiIDogXCJDSEFOTkVMX1NMSURFUi5QT0lOVEVSX1VQXCI7XG4gICAgICAgICAgICBzZW5kKHsgdHlwZSB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGRpc2FibGVUZXh0U2VsZWN0aW9uKHsgc2NvcGUgfSkge1xuICAgICAgICByZXR1cm4gZGlzYWJsZVRleHRTZWxlY3Rpb24oe1xuICAgICAgICAgIGRvYzogc2NvcGUuZ2V0RG9jKCksXG4gICAgICAgICAgdGFyZ2V0OiBnZXRDb250ZW50RWwoc2NvcGUpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgYWN0aW9uczoge1xuICAgICAgb3BlbkV5ZURyb3BwZXIoeyBzY29wZSwgY29udGV4dCB9KSB7XG4gICAgICAgIGNvbnN0IHdpbiA9IHNjb3BlLmdldFdpbigpO1xuICAgICAgICBjb25zdCBpc1N1cHBvcnRlZCA9IFwiRXllRHJvcHBlclwiIGluIHdpbjtcbiAgICAgICAgaWYgKCFpc1N1cHBvcnRlZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBwaWNrZXIgPSBuZXcgd2luLkV5ZURyb3BwZXIoKTtcbiAgICAgICAgcGlja2VyLm9wZW4oKS50aGVuKCh7IHNSR0JIZXggfSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGZvcm1hdCA9IGNvbnRleHQuZ2V0KFwidmFsdWVcIikuZ2V0Rm9ybWF0KCk7XG4gICAgICAgICAgY29uc3QgY29sb3IgPSBwYXJzZUNvbG9yKHNSR0JIZXgpLnRvRm9ybWF0KGZvcm1hdCk7XG4gICAgICAgICAgY29udGV4dC5zZXQoXCJ2YWx1ZVwiLCBjb2xvcik7XG4gICAgICAgIH0pLmNhdGNoKCgpID0+IHZvaWQgMCk7XG4gICAgICB9LFxuICAgICAgc2V0QWN0aXZlQ2hhbm5lbCh7IGNvbnRleHQsIGV2ZW50IH0pIHtcbiAgICAgICAgY29udGV4dC5zZXQoXCJhY3RpdmVJZFwiLCBldmVudC5pZCk7XG4gICAgICAgIGlmIChldmVudC5jaGFubmVsKSBjb250ZXh0LnNldChcImFjdGl2ZUNoYW5uZWxcIiwgZXZlbnQuY2hhbm5lbCk7XG4gICAgICAgIGlmIChldmVudC5vcmllbnRhdGlvbikgY29udGV4dC5zZXQoXCJhY3RpdmVPcmllbnRhdGlvblwiLCBldmVudC5vcmllbnRhdGlvbik7XG4gICAgICB9LFxuICAgICAgY2xlYXJBY3RpdmVDaGFubmVsKHsgY29udGV4dCB9KSB7XG4gICAgICAgIGNvbnRleHQuc2V0KFwiYWN0aXZlQ2hhbm5lbFwiLCBudWxsKTtcbiAgICAgICAgY29udGV4dC5zZXQoXCJhY3RpdmVJZFwiLCBudWxsKTtcbiAgICAgICAgY29udGV4dC5zZXQoXCJhY3RpdmVPcmllbnRhdGlvblwiLCBudWxsKTtcbiAgICAgIH0sXG4gICAgICBzZXRBcmVhQ29sb3JGcm9tUG9pbnQoeyBjb250ZXh0LCBldmVudCwgY29tcHV0ZWQsIHNjb3BlIH0pIHtcbiAgICAgICAgY29uc3QgdiA9IGV2ZW50LmZvcm1hdCA/IGNvbnRleHQuZ2V0KFwidmFsdWVcIikudG9Gb3JtYXQoZXZlbnQuZm9ybWF0KSA6IGNvbXB1dGVkKFwiYXJlYVZhbHVlXCIpO1xuICAgICAgICBjb25zdCB7IHhDaGFubmVsLCB5Q2hhbm5lbCB9ID0gZXZlbnQuY2hhbm5lbCB8fCBjb250ZXh0LmdldChcImFjdGl2ZUNoYW5uZWxcIik7XG4gICAgICAgIGNvbnN0IHBlcmNlbnQgPSBnZXRBcmVhVmFsdWVGcm9tUG9pbnQoc2NvcGUsIGV2ZW50LnBvaW50KTtcbiAgICAgICAgaWYgKCFwZXJjZW50KSByZXR1cm47XG4gICAgICAgIGNvbnN0IHhWYWx1ZSA9IHYuZ2V0Q2hhbm5lbFBlcmNlbnRWYWx1ZSh4Q2hhbm5lbCwgcGVyY2VudC54KTtcbiAgICAgICAgY29uc3QgeVZhbHVlID0gdi5nZXRDaGFubmVsUGVyY2VudFZhbHVlKHlDaGFubmVsLCAxIC0gcGVyY2VudC55KTtcbiAgICAgICAgY29uc3QgY29sb3IgPSB2LndpdGhDaGFubmVsVmFsdWUoeENoYW5uZWwsIHhWYWx1ZSkud2l0aENoYW5uZWxWYWx1ZSh5Q2hhbm5lbCwgeVZhbHVlKTtcbiAgICAgICAgY29udGV4dC5zZXQoXCJ2YWx1ZVwiLCBjb2xvcik7XG4gICAgICB9LFxuICAgICAgc2V0Q2hhbm5lbENvbG9yRnJvbVBvaW50KHsgY29udGV4dCwgZXZlbnQsIGNvbXB1dGVkLCBzY29wZSB9KSB7XG4gICAgICAgIGNvbnN0IGNoYW5uZWwgPSBldmVudC5jaGFubmVsIHx8IGNvbnRleHQuZ2V0KFwiYWN0aXZlSWRcIik7XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRWYWx1ZSA9IGV2ZW50LmZvcm1hdCA/IGNvbnRleHQuZ2V0KFwidmFsdWVcIikudG9Gb3JtYXQoZXZlbnQuZm9ybWF0KSA6IGNvbXB1dGVkKFwiYXJlYVZhbHVlXCIpO1xuICAgICAgICBjb25zdCBwZXJjZW50ID0gZ2V0Q2hhbm5lbFNsaWRlclZhbHVlRnJvbVBvaW50KHNjb3BlLCBldmVudC5wb2ludCwgY2hhbm5lbCk7XG4gICAgICAgIGlmICghcGVyY2VudCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBvcmllbnRhdGlvbiA9IGNvbnRleHQuZ2V0KFwiYWN0aXZlT3JpZW50YXRpb25cIikgfHwgXCJob3Jpem9udGFsXCI7XG4gICAgICAgIGNvbnN0IGNoYW5uZWxQZXJjZW50ID0gb3JpZW50YXRpb24gPT09IFwiaG9yaXpvbnRhbFwiID8gcGVyY2VudC54IDogcGVyY2VudC55O1xuICAgICAgICBjb25zdCB2YWx1ZSA9IG5vcm1hbGl6ZWRWYWx1ZS5nZXRDaGFubmVsUGVyY2VudFZhbHVlKGNoYW5uZWwsIGNoYW5uZWxQZXJjZW50KTtcbiAgICAgICAgY29uc3QgY29sb3IgPSBub3JtYWxpemVkVmFsdWUud2l0aENoYW5uZWxWYWx1ZShjaGFubmVsLCB2YWx1ZSk7XG4gICAgICAgIGNvbnRleHQuc2V0KFwidmFsdWVcIiwgY29sb3IpO1xuICAgICAgfSxcbiAgICAgIHNldFZhbHVlKHsgY29udGV4dCwgZXZlbnQgfSkge1xuICAgICAgICBjb250ZXh0LnNldChcInZhbHVlXCIsIGV2ZW50LnZhbHVlKTtcbiAgICAgIH0sXG4gICAgICBzZXRGb3JtYXQoeyBjb250ZXh0LCBldmVudCB9KSB7XG4gICAgICAgIGNvbnRleHQuc2V0KFwiZm9ybWF0XCIsIGV2ZW50LmZvcm1hdCk7XG4gICAgICB9LFxuICAgICAgZGlzcGF0Y2hDaGFuZ2VFdmVudCh7IHNjb3BlLCBjb21wdXRlZCB9KSB7XG4gICAgICAgIGRpc3BhdGNoSW5wdXRWYWx1ZUV2ZW50KGdldEhpZGRlbklucHV0RWwoc2NvcGUpLCB7IHZhbHVlOiBjb21wdXRlZChcInZhbHVlQXNTdHJpbmdcIikgfSk7XG4gICAgICB9LFxuICAgICAgc3luY0lucHV0RWxlbWVudHMoeyBjb250ZXh0LCBzY29wZSB9KSB7XG4gICAgICAgIHN5bmNDaGFubmVsSW5wdXRzKHNjb3BlLCBjb250ZXh0LmdldChcInZhbHVlXCIpKTtcbiAgICAgIH0sXG4gICAgICBpbnZva2VPbkNoYW5nZUVuZCh7IGNvbnRleHQsIHByb3AsIGNvbXB1dGVkIH0pIHtcbiAgICAgICAgcHJvcChcIm9uVmFsdWVDaGFuZ2VFbmRcIik/Lih7XG4gICAgICAgICAgdmFsdWU6IGNvbnRleHQuZ2V0KFwidmFsdWVcIiksXG4gICAgICAgICAgdmFsdWVBc1N0cmluZzogY29tcHV0ZWQoXCJ2YWx1ZUFzU3RyaW5nXCIpXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHNldENoYW5uZWxDb2xvckZyb21JbnB1dCh7IGNvbnRleHQsIGV2ZW50LCBzY29wZSB9KSB7XG4gICAgICAgIGNvbnN0IHsgY2hhbm5lbCwgaXNUZXh0RmllbGQsIHZhbHVlIH0gPSBldmVudDtcbiAgICAgICAgY29uc3QgY3VycmVudEFscGhhID0gY29udGV4dC5nZXQoXCJ2YWx1ZVwiKS5nZXRDaGFubmVsVmFsdWUoXCJhbHBoYVwiKTtcbiAgICAgICAgbGV0IGNvbG9yO1xuICAgICAgICBpZiAoY2hhbm5lbCA9PT0gXCJhbHBoYVwiKSB7XG4gICAgICAgICAgbGV0IHZhbHVlQXNOdW1iZXIgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICAgICAgICB2YWx1ZUFzTnVtYmVyID0gTnVtYmVyLmlzTmFOKHZhbHVlQXNOdW1iZXIpID8gY3VycmVudEFscGhhIDogdmFsdWVBc051bWJlcjtcbiAgICAgICAgICBjb2xvciA9IGNvbnRleHQuZ2V0KFwidmFsdWVcIikud2l0aENoYW5uZWxWYWx1ZShcImFscGhhXCIsIHZhbHVlQXNOdW1iZXIpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzVGV4dEZpZWxkKSB7XG4gICAgICAgICAgY29sb3IgPSB0cnlDYXRjaChcbiAgICAgICAgICAgICgpID0+IHBhcnNlKHZhbHVlKS53aXRoQ2hhbm5lbFZhbHVlKFwiYWxwaGFcIiwgY3VycmVudEFscGhhKSxcbiAgICAgICAgICAgICgpID0+IGNvbnRleHQuZ2V0KFwidmFsdWVcIilcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBjb250ZXh0LmdldChcInZhbHVlXCIpLnRvRm9ybWF0KGNvbnRleHQuZ2V0KFwiZm9ybWF0XCIpKTtcbiAgICAgICAgICBjb25zdCB2YWx1ZUFzTnVtYmVyID0gTnVtYmVyLmlzTmFOKHZhbHVlKSA/IGN1cnJlbnQuZ2V0Q2hhbm5lbFZhbHVlKGNoYW5uZWwpIDogdmFsdWU7XG4gICAgICAgICAgY29sb3IgPSBjdXJyZW50LndpdGhDaGFubmVsVmFsdWUoY2hhbm5lbCwgdmFsdWVBc051bWJlcik7XG4gICAgICAgIH1cbiAgICAgICAgc3luY0NoYW5uZWxJbnB1dHMoc2NvcGUsIGNvbnRleHQuZ2V0KFwidmFsdWVcIiksIGNvbG9yKTtcbiAgICAgICAgY29udGV4dC5zZXQoXCJ2YWx1ZVwiLCBjb2xvcik7XG4gICAgICB9LFxuICAgICAgaW5jcmVtZW50Q2hhbm5lbCh7IGNvbnRleHQsIGV2ZW50IH0pIHtcbiAgICAgICAgY29uc3QgY29sb3IgPSBjb250ZXh0LmdldChcInZhbHVlXCIpLmluY3JlbWVudENoYW5uZWwoZXZlbnQuY2hhbm5lbCwgZXZlbnQuc3RlcCk7XG4gICAgICAgIGNvbnRleHQuc2V0KFwidmFsdWVcIiwgY29sb3IpO1xuICAgICAgfSxcbiAgICAgIGRlY3JlbWVudENoYW5uZWwoeyBjb250ZXh0LCBldmVudCB9KSB7XG4gICAgICAgIGNvbnN0IGNvbG9yID0gY29udGV4dC5nZXQoXCJ2YWx1ZVwiKS5kZWNyZW1lbnRDaGFubmVsKGV2ZW50LmNoYW5uZWwsIGV2ZW50LnN0ZXApO1xuICAgICAgICBjb250ZXh0LnNldChcInZhbHVlXCIsIGNvbG9yKTtcbiAgICAgIH0sXG4gICAgICBpbmNyZW1lbnRBcmVhWENoYW5uZWwoeyBjb250ZXh0LCBldmVudCwgY29tcHV0ZWQgfSkge1xuICAgICAgICBjb25zdCB7IHhDaGFubmVsIH0gPSBldmVudC5jaGFubmVsO1xuICAgICAgICBjb25zdCBjb2xvciA9IGNvbXB1dGVkKFwiYXJlYVZhbHVlXCIpLmluY3JlbWVudENoYW5uZWwoeENoYW5uZWwsIGV2ZW50LnN0ZXApO1xuICAgICAgICBjb250ZXh0LnNldChcInZhbHVlXCIsIGNvbG9yKTtcbiAgICAgIH0sXG4gICAgICBkZWNyZW1lbnRBcmVhWENoYW5uZWwoeyBjb250ZXh0LCBldmVudCwgY29tcHV0ZWQgfSkge1xuICAgICAgICBjb25zdCB7IHhDaGFubmVsIH0gPSBldmVudC5jaGFubmVsO1xuICAgICAgICBjb25zdCBjb2xvciA9IGNvbXB1dGVkKFwiYXJlYVZhbHVlXCIpLmRlY3JlbWVudENoYW5uZWwoeENoYW5uZWwsIGV2ZW50LnN0ZXApO1xuICAgICAgICBjb250ZXh0LnNldChcInZhbHVlXCIsIGNvbG9yKTtcbiAgICAgIH0sXG4gICAgICBpbmNyZW1lbnRBcmVhWUNoYW5uZWwoeyBjb250ZXh0LCBldmVudCwgY29tcHV0ZWQgfSkge1xuICAgICAgICBjb25zdCB7IHlDaGFubmVsIH0gPSBldmVudC5jaGFubmVsO1xuICAgICAgICBjb25zdCBjb2xvciA9IGNvbXB1dGVkKFwiYXJlYVZhbHVlXCIpLmluY3JlbWVudENoYW5uZWwoeUNoYW5uZWwsIGV2ZW50LnN0ZXApO1xuICAgICAgICBjb250ZXh0LnNldChcInZhbHVlXCIsIGNvbG9yKTtcbiAgICAgIH0sXG4gICAgICBkZWNyZW1lbnRBcmVhWUNoYW5uZWwoeyBjb250ZXh0LCBldmVudCwgY29tcHV0ZWQgfSkge1xuICAgICAgICBjb25zdCB7IHlDaGFubmVsIH0gPSBldmVudC5jaGFubmVsO1xuICAgICAgICBjb25zdCBjb2xvciA9IGNvbXB1dGVkKFwiYXJlYVZhbHVlXCIpLmRlY3JlbWVudENoYW5uZWwoeUNoYW5uZWwsIGV2ZW50LnN0ZXApO1xuICAgICAgICBjb250ZXh0LnNldChcInZhbHVlXCIsIGNvbG9yKTtcbiAgICAgIH0sXG4gICAgICBzZXRDaGFubmVsVG9NYXgoeyBjb250ZXh0LCBldmVudCB9KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gY29udGV4dC5nZXQoXCJ2YWx1ZVwiKTtcbiAgICAgICAgY29uc3QgcmFuZ2UgPSB2YWx1ZS5nZXRDaGFubmVsUmFuZ2UoZXZlbnQuY2hhbm5lbCk7XG4gICAgICAgIGNvbnN0IGNvbG9yID0gdmFsdWUud2l0aENoYW5uZWxWYWx1ZShldmVudC5jaGFubmVsLCByYW5nZS5tYXhWYWx1ZSk7XG4gICAgICAgIGNvbnRleHQuc2V0KFwidmFsdWVcIiwgY29sb3IpO1xuICAgICAgfSxcbiAgICAgIHNldENoYW5uZWxUb01pbih7IGNvbnRleHQsIGV2ZW50IH0pIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBjb250ZXh0LmdldChcInZhbHVlXCIpO1xuICAgICAgICBjb25zdCByYW5nZSA9IHZhbHVlLmdldENoYW5uZWxSYW5nZShldmVudC5jaGFubmVsKTtcbiAgICAgICAgY29uc3QgY29sb3IgPSB2YWx1ZS53aXRoQ2hhbm5lbFZhbHVlKGV2ZW50LmNoYW5uZWwsIHJhbmdlLm1pblZhbHVlKTtcbiAgICAgICAgY29udGV4dC5zZXQoXCJ2YWx1ZVwiLCBjb2xvcik7XG4gICAgICB9LFxuICAgICAgZm9jdXNBcmVhVGh1bWIoeyBzY29wZSB9KSB7XG4gICAgICAgIHJhZigoKSA9PiB7XG4gICAgICAgICAgZ2V0QXJlYVRodW1iRWwoc2NvcGUpPy5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGZvY3VzQ2hhbm5lbFRodW1iKHsgZXZlbnQsIHNjb3BlIH0pIHtcbiAgICAgICAgcmFmKCgpID0+IHtcbiAgICAgICAgICBnZXRDaGFubmVsU2xpZGVyVGh1bWJFbChzY29wZSwgZXZlbnQuY2hhbm5lbCk/LmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgc2V0SW5pdGlhbEZvY3VzKHsgcHJvcCwgc2NvcGUgfSkge1xuICAgICAgICBpZiAoIXByb3AoXCJvcGVuQXV0b0ZvY3VzXCIpKSByZXR1cm47XG4gICAgICAgIHJhZigoKSA9PiB7XG4gICAgICAgICAgY29uc3QgZWxlbWVudCA9IGdldEluaXRpYWxGb2N1cyh7XG4gICAgICAgICAgICByb290OiBnZXRDb250ZW50RWwoc2NvcGUpLFxuICAgICAgICAgICAgZ2V0SW5pdGlhbEVsOiBwcm9wKFwiaW5pdGlhbEZvY3VzRWxcIilcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBlbGVtZW50Py5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHNldFJldHVybkZvY3VzKHsgc2NvcGUgfSkge1xuICAgICAgICByYWYoKCkgPT4ge1xuICAgICAgICAgIGdldFRyaWdnZXJFbChzY29wZSk/LmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgc3luY0Zvcm1hdFNlbGVjdEVsZW1lbnQoeyBjb250ZXh0LCBzY29wZSB9KSB7XG4gICAgICAgIHN5bmNGb3JtYXRTZWxlY3Qoc2NvcGUsIGNvbnRleHQuZ2V0KFwiZm9ybWF0XCIpKTtcbiAgICAgIH0sXG4gICAgICBpbnZva2VPbk9wZW4oeyBwcm9wIH0pIHtcbiAgICAgICAgcHJvcChcIm9uT3BlbkNoYW5nZVwiKT8uKHsgb3BlbjogdHJ1ZSB9KTtcbiAgICAgIH0sXG4gICAgICBpbnZva2VPbkNsb3NlKHsgcHJvcCB9KSB7XG4gICAgICAgIHByb3AoXCJvbk9wZW5DaGFuZ2VcIik/Lih7IG9wZW46IGZhbHNlIH0pO1xuICAgICAgfSxcbiAgICAgIHRvZ2dsZVZpc2liaWxpdHkoeyBwcm9wLCBldmVudCwgc2VuZCB9KSB7XG4gICAgICAgIHNlbmQoeyB0eXBlOiBwcm9wKFwib3BlblwiKSA/IFwiQ09OVFJPTExFRC5PUEVOXCIgOiBcIkNPTlRST0xMRUQuQ0xPU0VcIiwgcHJldmlvdXNFdmVudDogZXZlbnQgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcbmZ1bmN0aW9uIHN5bmNDaGFubmVsSW5wdXRzKHNjb3BlLCBjdXJyZW50VmFsdWUsIG5leHRWYWx1ZSkge1xuICBjb25zdCBjaGFubmVsSW5wdXRFbHMgPSBnZXRDaGFubmVsSW5wdXRFbHMoc2NvcGUpO1xuICByYWYoKCkgPT4ge1xuICAgIGNoYW5uZWxJbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBjb25zdCBjaGFubmVsID0gaW5wdXRFbC5kYXRhc2V0LmNoYW5uZWw7XG4gICAgICBzZXRFbGVtZW50VmFsdWUoaW5wdXRFbCwgZ2V0Q2hhbm5lbFZhbHVlKG5leHRWYWx1ZSB8fCBjdXJyZW50VmFsdWUsIGNoYW5uZWwpKTtcbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBzeW5jRm9ybWF0U2VsZWN0KHNjb3BlLCBmb3JtYXQpIHtcbiAgY29uc3Qgc2VsZWN0RWwgPSBnZXRGb3JtYXRTZWxlY3RFbChzY29wZSk7XG4gIGlmICghc2VsZWN0RWwpIHJldHVybjtcbiAgcmFmKCgpID0+IHNldEVsZW1lbnRWYWx1ZShzZWxlY3RFbCwgZm9ybWF0KSk7XG59XG52YXIgcHJvcHMgPSBjcmVhdGVQcm9wcygpKFtcbiAgXCJjbG9zZU9uU2VsZWN0XCIsXG4gIFwiZGlyXCIsXG4gIFwiZGlzYWJsZWRcIixcbiAgXCJmb3JtYXRcIixcbiAgXCJkZWZhdWx0Rm9ybWF0XCIsXG4gIFwiZ2V0Um9vdE5vZGVcIixcbiAgXCJpZFwiLFxuICBcImlkc1wiLFxuICBcImluaXRpYWxGb2N1c0VsXCIsXG4gIFwibmFtZVwiLFxuICBcInBvc2l0aW9uaW5nXCIsXG4gIFwib25Gb2N1c091dHNpZGVcIixcbiAgXCJvbkZvcm1hdENoYW5nZVwiLFxuICBcIm9uSW50ZXJhY3RPdXRzaWRlXCIsXG4gIFwib25PcGVuQ2hhbmdlXCIsXG4gIFwib25Qb2ludGVyRG93bk91dHNpZGVcIixcbiAgXCJvblZhbHVlQ2hhbmdlXCIsXG4gIFwib25WYWx1ZUNoYW5nZUVuZFwiLFxuICBcImRlZmF1bHRPcGVuXCIsXG4gIFwib3BlblwiLFxuICBcInBvc2l0aW9uaW5nXCIsXG4gIFwicmVxdWlyZWRcIixcbiAgXCJyZWFkT25seVwiLFxuICBcInZhbHVlXCIsXG4gIFwiZGVmYXVsdFZhbHVlXCIsXG4gIFwiaW52YWxpZFwiLFxuICBcIm9wZW5BdXRvRm9jdXNcIlxuXSk7XG52YXIgc3BsaXRQcm9wcyA9IGNyZWF0ZVNwbGl0UHJvcHMocHJvcHMpO1xudmFyIGFyZWFQcm9wcyA9IGNyZWF0ZVByb3BzKCkoW1wieENoYW5uZWxcIiwgXCJ5Q2hhbm5lbFwiXSk7XG52YXIgc3BsaXRBcmVhUHJvcHMgPSBjcmVhdGVTcGxpdFByb3BzKGFyZWFQcm9wcyk7XG52YXIgY2hhbm5lbFByb3BzID0gY3JlYXRlUHJvcHMoKShbXCJjaGFubmVsXCIsIFwib3JpZW50YXRpb25cIl0pO1xudmFyIHNwbGl0Q2hhbm5lbFByb3BzID0gY3JlYXRlU3BsaXRQcm9wcyhjaGFubmVsUHJvcHMpO1xudmFyIHN3YXRjaFRyaWdnZXJQcm9wcyA9IGNyZWF0ZVByb3BzKCkoW1widmFsdWVcIiwgXCJkaXNhYmxlZFwiXSk7XG52YXIgc3BsaXRTd2F0Y2hUcmlnZ2VyUHJvcHMgPSBjcmVhdGVTcGxpdFByb3BzKHN3YXRjaFRyaWdnZXJQcm9wcyk7XG52YXIgc3dhdGNoUHJvcHMgPSBjcmVhdGVQcm9wcygpKFtcInZhbHVlXCIsIFwicmVzcGVjdEFscGhhXCJdKTtcbnZhciBzcGxpdFN3YXRjaFByb3BzID0gY3JlYXRlU3BsaXRQcm9wcyhzd2F0Y2hQcm9wcyk7XG52YXIgdHJhbnNwYXJlbmN5R3JpZFByb3BzID0gY3JlYXRlUHJvcHMoKShbXCJzaXplXCJdKTtcbnZhciBzcGxpdFRyYW5zcGFyZW5jeUdyaWRQcm9wcyA9IGNyZWF0ZVNwbGl0UHJvcHModHJhbnNwYXJlbmN5R3JpZFByb3BzKTtcblxuZXhwb3J0IHsgYW5hdG9teSwgYXJlYVByb3BzLCBjaGFubmVsUHJvcHMsIGNvbm5lY3QsIG1hY2hpbmUsIHBhcnNlLCBwcm9wcywgc3BsaXRBcmVhUHJvcHMsIHNwbGl0Q2hhbm5lbFByb3BzLCBzcGxpdFByb3BzLCBzcGxpdFN3YXRjaFByb3BzLCBzcGxpdFN3YXRjaFRyaWdnZXJQcm9wcywgc3BsaXRUcmFuc3BhcmVuY3lHcmlkUHJvcHMsIHN3YXRjaFByb3BzLCBzd2F0Y2hUcmlnZ2VyUHJvcHMsIHRyYW5zcGFyZW5jeUdyaWRQcm9wcyB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@zag-js+color-picker@1.8.2/node_modules/@zag-js/color-picker/dist/index.mjs\n");

/***/ })

};
;